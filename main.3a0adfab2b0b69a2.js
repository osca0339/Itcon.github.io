"use strict";(self.webpackChunkItconAngular=self.webpackChunkItconAngular||[]).push([[179],{2011:(st,Te,P)=>{P.d(Te,{Dh:()=>le,GT:()=>ge,cc:()=>Ae,hO:()=>He,on:()=>$,pX:()=>te,xv:()=>de});var p=P(4650),X=P(127),O=P(5813);st=P.hmd(st);const ae=["ngOnDestroy"],te=(me,ze,Qe,De={})=>new Proxy(me,{get:(we,Ee)=>Qe.runOutsideAngular(()=>{var Be;if(me[Ee])return!(null===(Be=De?.spy)||void 0===Be)&&Be.get&&De.spy.get(Ee,me[Ee]),me[Ee];if(ae.indexOf(Ee)>-1)return()=>{};const Ue=ze.toPromise().then(j=>{const ve=j&&j[Ee];return"function"==typeof ve?ve.bind(j):ve&&ve.then?ve.then(W=>Qe.run(()=>W)):Qe.run(()=>ve)});return new Proxy(()=>{},{get:(j,ve)=>Ue[ve],apply:(j,ve,W)=>Ue.then(ne=>{var ee;const ye=ne&&ne(...W);return!(null===(ee=De?.spy)||void 0===ee)&&ee.apply&&De.spy.apply(Ee,W,ye),ye})})})}),ge=(me,ze)=>{ze.forEach(Qe=>{Object.getOwnPropertyNames(Qe.prototype||Qe).forEach(De=>{Object.defineProperty(me.prototype,De,Object.getOwnPropertyDescriptor(Qe.prototype||Qe,De))})})};class ue{constructor(ze){return ze}}const le=new p.OlP("angularfire2.app.options"),de=new p.OlP("angularfire2.app.name");function $(me,ze,Qe){const we="object"==typeof Qe&&Qe||{};we.name=we.name||"string"==typeof Qe&&Qe||"[DEFAULT]";const Be=X.Z.apps.filter(Ue=>Ue&&Ue.name===we.name)[0]||ze.runOutsideAngular(()=>X.Z.initializeApp(me,we));try{JSON.stringify(me)!==JSON.stringify(Be.options)&&B("error",`${Be.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(Be)}const B=(me,...ze)=>{(0,p.X6Q)()&&typeof console<"u"&&console[me](...ze)},Q={provide:ue,useFactory:$,deps:[le,p.R0b,[new p.FiY,de]]};let He=(()=>{class me{constructor(Qe){X.Z.registerVersion("angularfire",O.q4.full,"core"),X.Z.registerVersion("angularfire",O.q4.full,"app-compat"),X.Z.registerVersion("angular",p.q4F.full,Qe.toString())}static initializeApp(Qe,De){return{ngModule:me,providers:[{provide:le,useValue:Qe},{provide:de,useValue:De}]}}}return me.\u0275fac=function(Qe){return new(Qe||me)(p.LFG(p.Lbi))},me.\u0275mod=p.oAB({type:me}),me.\u0275inj=p.cJS({providers:[Q]}),me})();function Ae(me,ze,Qe,De,we){const[,Ee,Be]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===me)||[];if(Ee)return function Se(me,ze){try{return me.toString()===ze.toString()}catch{return me===ze}}(we,Be)||(he("error",`${ze} was already initialized on the ${Qe} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:we,was:Be})),Ee;{const Ue=De();return globalThis.\u0275AngularfireInstanceCache.push([me,Ue,we]),Ue}}const Le=!!st.hot,he=(me,...ze)=>{(0,p.X6Q)()&&typeof console<"u"&&console[me](...ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(st,Te,P)=>{P.d(Te,{q4:()=>Bu,iC:()=>ir,HU:()=>pd,vb:()=>pr,JM:()=>Gl});var p=P(4650),X=P(5867),O=P(5861),ae=P(9681),te=P(2090),ge=P(4859),ue=P(1877),le=P(8766);const de="@firebase/installations",$="0.5.11",Q=`w:${$}`,He="FIS_v2",ze=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Qe(D){return D instanceof te.ZR&&D.code.includes("request-failed")}function De({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function we(D){return{token:D.token,requestStatus:2,expiresIn:ne(D.expiresIn),creationTime:Date.now()}}function Ee(D,C){return Be.apply(this,arguments)}function Be(){return(Be=(0,O.Z)(function*(D,C){const F=(yield C.json()).error;return ze.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Ue({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function j(D,{refreshToken:C}){const x=Ue(D);return x.append("Authorization",function ee(D){return`${He} ${D}`}(C)),x}function ve(D){return W.apply(this,arguments)}function W(){return(W=(0,O.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function ne(D){return Number(D.replace("s","000"))}function ye(D,C){return oe.apply(this,arguments)}function oe(){return(oe=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:x}){const F=De(D),q=Ue(D),re=C.getImmediate({optional:!0});if(re){const yt=yield re.getHeartbeatsHeader();yt&&q.append("x-firebase-client",yt)}const Ve={method:"POST",headers:q,body:JSON.stringify({fid:x,authVersion:He,appId:D.appId,sdkVersion:Q})},lt=yield ve(()=>fetch(F,Ve));if(lt.ok){const yt=yield lt.json();return{fid:yt.fid||x,registrationStatus:2,refreshToken:yt.refreshToken,authToken:we(yt.authToken)}}throw yield Ee("Create Installation",lt)})).apply(this,arguments)}function Oe(D){return new Promise(C=>{setTimeout(C,D)})}const Bt=/^[cdef][\w-]{21}$/;function We(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function tn(D){return function at(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Bt.test(x)?x:""}catch{return""}}function Sn(D){return`${D.appName}!${D.appId}`}const an=new Map;function Kt(D,C){const x=Sn(D);Rt(x,C),function Hi(D,C){const x=function vr(){return!Kr&&"BroadcastChannel"in self&&(Kr=new BroadcastChannel("[Firebase] FID Change"),Kr.onmessage=D=>{Rt(D.data.key,D.data.fid)}),Kr}();x&&x.postMessage({key:D,fid:C}),function Ar(){0===an.size&&Kr&&(Kr.close(),Kr=null)}()}(x,C)}function Rt(D,C){const x=an.get(D);if(x)for(const F of x)F(C)}let Kr=null;const Yr="firebase-installations-store";let di=null;function ut(){return di||(di=(0,le.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Yr)}})),di}function Qr(D,C){return bn.apply(this,arguments)}function bn(){return(bn=(0,O.Z)(function*(D,C){const x=Sn(D),q=(yield ut()).transaction(Yr,"readwrite"),re=q.objectStore(Yr),be=yield re.get(x);return yield re.put(C,x),yield q.done,(!be||be.fid!==C.fid)&&Kt(D,C.fid),C})).apply(this,arguments)}function En(D){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,O.Z)(function*(D){const C=Sn(D),F=(yield ut()).transaction(Yr,"readwrite");yield F.objectStore(Yr).delete(C),yield F.done})).apply(this,arguments)}function Jr(D,C){return er.apply(this,arguments)}function er(){return(er=(0,O.Z)(function*(D,C){const x=Sn(D),q=(yield ut()).transaction(Yr,"readwrite"),re=q.objectStore(Yr),be=yield re.get(x),Ve=C(be);return void 0===Ve?yield re.delete(x):yield re.put(Ve,x),yield q.done,Ve&&(!be||be.fid!==Ve.fid)&&Kt(D,Ve.fid),Ve})).apply(this,arguments)}function Vn(D){return hi.apply(this,arguments)}function hi(){return(hi=(0,O.Z)(function*(D){let C;const x=yield Jr(D.appConfig,F=>{const q=Eo(F),re=jt(D,q);return C=re.registrationPromise,re.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function Eo(D){return Xr(D||{fid:We(),registrationStatus:0})}function jt(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(ze.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function je(D,C){return gt.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Sr(D)}:{installationEntry:C}}function gt(){return(gt=(0,O.Z)(function*(D,C){try{const x=yield ye(D,C);return Qr(D.appConfig,x)}catch(x){throw Qe(x)&&409===x.customData.serverCode?yield En(D.appConfig):yield Qr(D.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Sr(D){return qn.apply(this,arguments)}function qn(){return(qn=(0,O.Z)(function*(D){let C=yield wt(D.appConfig);for(;1===C.registrationStatus;)yield Oe(100),C=yield wt(D.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield Vn(D);return F||x}return C})).apply(this,arguments)}function wt(D){return Jr(D,C=>{if(!C)throw ze.create("installation-not-found");return Xr(C)})}function Xr(D){return function tr(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function ei(D,C){return en.apply(this,arguments)}function en(){return(en=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},x){const F=z(D,x),q=j(D,x),re=C.getImmediate({optional:!0});if(re){const yt=yield re.getHeartbeatsHeader();yt&&q.append("x-firebase-client",yt)}const Ve={method:"POST",headers:q,body:JSON.stringify({installation:{sdkVersion:Q,appId:D.appId}})},lt=yield ve(()=>fetch(F,Ve));if(lt.ok)return we(yield lt.json());throw yield Ee("Generate Auth Token",lt)})).apply(this,arguments)}function z(D,{fid:C}){return`${De(D)}/${C}/authTokens:generate`}function V(D){return Y.apply(this,arguments)}function Y(){return(Y=(0,O.Z)(function*(D,C=!1){let x;const F=yield Jr(D.appConfig,re=>{if(!mt(re))throw ze.create("not-registered");const be=re.authToken;if(!C&&nn(be))return re;if(1===be.requestStatus)return x=K(D,C),re;{if(!navigator.onLine)throw ze.create("app-offline");const Ve=St(re);return x=Pe(D,Ve),Ve}});return x?yield x:F.authToken})).apply(this,arguments)}function K(D,C){return L.apply(this,arguments)}function L(){return(L=(0,O.Z)(function*(D,C){let x=yield _e(D.appConfig);for(;1===x.authToken.requestStatus;)yield Oe(100),x=yield _e(D.appConfig);const F=x.authToken;return 0===F.requestStatus?V(D,C):F})).apply(this,arguments)}function _e(D){return Jr(D,C=>{if(!mt(C))throw ze.create("not-registered");return function Zn(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Pe(D,C){return et.apply(this,arguments)}function et(){return(et=(0,O.Z)(function*(D,C){try{const x=yield ei(D,C),F=Object.assign(Object.assign({},C),{authToken:x});return yield Qr(D.appConfig,F),x}catch(x){if(!Qe(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Qr(D.appConfig,F)}else yield En(D.appConfig);throw x}})).apply(this,arguments)}function mt(D){return void 0!==D&&2===D.registrationStatus}function nn(D){return 2===D.requestStatus&&!function rn(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function St(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function xn(){return(xn=(0,O.Z)(function*(D){const C=D,{installationEntry:x,registrationPromise:F}=yield Vn(C);return F?F.catch(console.error):V(C).catch(console.error),x.fid})).apply(this,arguments)}function lr(){return(lr=(0,O.Z)(function*(D,C=!1){const x=D;return yield xr(x),(yield V(x,C)).token})).apply(this,arguments)}function xr(D){return $e.apply(this,arguments)}function $e(){return($e=(0,O.Z)(function*(D){const{registrationPromise:C}=yield Vn(D);C&&(yield C)})).apply(this,arguments)}function fi(D){return ze.create("missing-app-config-values",{valueName:D})}const Dt="installations",gn=D=>{const C=D.getProvider("app").getImmediate(),x=function ga(D){if(!D||!D.options)throw fi("App Configuration");if(!D.name)throw fi("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!D.options[x])throw fi(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,ae._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Do=D=>{const C=D.getProvider("app").getImmediate(),x=(0,ae._getProvider)(C,Dt).getImmediate();return{getId:()=>function Vt(D){return xn.apply(this,arguments)}(x),getToken:q=>function nr(D){return lr.apply(this,arguments)}(x,q)}};(function qs(){(0,ae._registerComponent)(new ge.wA(Dt,gn,"PUBLIC")),(0,ae._registerComponent)(new ge.wA("installations-internal",Do,"PRIVATE"))})(),(0,ae.registerVersion)(de,$),(0,ae.registerVersion)(de,$,"esm2017");const Un="@firebase/remote-config",cr=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Nh{constructor(C,x,F,q){this.client=C,this.storage=x,this.storageCache=F,this.logger=q}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,q=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${q}.`),q}fetch(C){var x=this;return(0,O.Z)(function*(){const[F,q]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(q&&x.isCachedDataFresh(C.cacheMaxAgeMillis,F))return q;C.eTag=q&&q.eTag;const re=yield x.client.fetch(C),be=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&be.push(x.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(be),re})()}}function Yc(D=navigator){return D.languages&&D.languages[0]||D.language}class Al{constructor(C,x,F,q,re,be){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=F,this.projectId=q,this.apiKey=re,this.appId=be}fetch(C){var x=this;return(0,O.Z)(function*(){var F,q,re;const[be,Ve]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),yt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,rt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},ct={sdk_version:x.sdkVersion,app_instance_id:be,app_instance_id_token:Ve,app_id:x.appId,language_code:Yc()},Hn={method:"POST",headers:rt,body:JSON.stringify(ct)},sr=fetch(yt,Hn),_i=new Promise((dn,Lr)=>{C.signal.addEventListener(()=>{const ja=new Error("The operation was aborted.");ja.name="AbortError",Lr(ja)})});let Os;try{yield Promise.race([sr,_i]),Os=yield sr}catch(dn){let Lr="fetch-client-network";throw"AbortError"===(null===(F=dn)||void 0===F?void 0:F.name)&&(Lr="fetch-timeout"),cr.create(Lr,{originalErrorMessage:null===(q=dn)||void 0===q?void 0:q.message})}let Pi=Os.status;const Gu=Os.headers.get("ETag")||void 0;let Fi,cn;if(200===Os.status){let dn;try{dn=yield Os.json()}catch(Lr){throw cr.create("fetch-client-parse",{originalErrorMessage:null===(re=Lr)||void 0===re?void 0:re.message})}Fi=dn.entries,cn=dn.state}if("INSTANCE_STATE_UNSPECIFIED"===cn?Pi=500:"NO_CHANGE"===cn?Pi=304:("NO_TEMPLATE"===cn||"EMPTY_CONFIG"===cn)&&(Fi={}),304!==Pi&&200!==Pi)throw cr.create("fetch-status",{httpStatus:Pi});return{status:Pi,eTag:Gu,config:Fi}})()}}class Op{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:F}){var q=this;return(0,O.Z)(function*(){yield function Kn(D,C){return new Promise((x,F)=>{const q=Math.max(C-Date.now(),0),re=setTimeout(x,q);D.addEventListener(()=>{clearTimeout(re),F(cr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const re=yield q.client.fetch(C);return yield q.storage.deleteThrottleMetadata(),re}catch(re){if(!function Qc(D){if(!(D instanceof te.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(re))throw re;const be={throttleEndTimeMillis:Date.now()+(0,te.$s)(F),backoffCount:F+1};return yield q.storage.setThrottleMetadata(be),q.attemptFetch(C,be)}})()}}class Jc{constructor(C,x,F,q,re){this.app=C,this._client=x,this._storageCache=F,this._storage=q,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Sl(D,C){var x;const F=D.target.error||void 0;return cr.create(C,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const vs="app_namespace_store";class Lp{constructor(C,x,F,q=function Fp(){return new Promise((D,C)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=q=>{C(Sl(q,"storage-open"))},F.onsuccess=q=>{D(q.target.result)},F.onupgradeneeded=q=>{0===q.oldVersion&&q.target.result.createObjectStore(vs,{keyPath:"compositeKey"})}}catch(F){C(cr.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=C,this.appName=x,this.namespace=F,this.openDbPromise=q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((q,re)=>{var be;const lt=F.transaction([vs],"readonly").objectStore(vs),yt=x.createCompositeKey(C);try{const rt=lt.get(yt);rt.onerror=ct=>{re(Sl(ct,"storage-get"))},rt.onsuccess=ct=>{const Hn=ct.target.result;q(Hn?Hn.value:void 0)}}catch(rt){re(cr.create("storage-get",{originalErrorMessage:null===(be=rt)||void 0===be?void 0:be.message}))}})})()}set(C,x){var F=this;return(0,O.Z)(function*(){const q=yield F.openDbPromise;return new Promise((re,be)=>{var Ve;const yt=q.transaction([vs],"readwrite").objectStore(vs),rt=F.createCompositeKey(C);try{const ct=yt.put({compositeKey:rt,value:x});ct.onerror=Hn=>{be(Sl(Hn,"storage-set"))},ct.onsuccess=()=>{re()}}catch(ct){be(cr.create("storage-set",{originalErrorMessage:null===(Ve=ct)||void 0===Ve?void 0:Ve.message}))}})})()}delete(C){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((q,re)=>{var be;const lt=F.transaction([vs],"readwrite").objectStore(vs),yt=x.createCompositeKey(C);try{const rt=lt.delete(yt);rt.onerror=ct=>{re(Sl(ct,"storage-delete"))},rt.onsuccess=()=>{q()}}catch(rt){re(cr.create("storage-delete",{originalErrorMessage:null===(be=rt)||void 0===be?void 0:be.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class mu{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const x=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),q=C.storage.getActiveConfig(),re=yield x;re&&(C.lastFetchStatus=re);const be=yield F;be&&(C.lastSuccessfulFetchTimestampMillis=be);const Ve=yield q;Ve&&(C.activeConfig=Ve)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function yu(){return _s.apply(this,arguments)}function _s(){return(_s=(0,O.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch{return!1}})).apply(this,arguments)}!function Wi(){(0,ae._registerComponent)(new ge.wA("remote-config",function D(C,{instanceIdentifier:x}){const F=C.getProvider("app").getImmediate(),q=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw cr.create("registration-window");if(!(0,te.hl)())throw cr.create("indexed-db-unavailable");const{projectId:re,apiKey:be,appId:Ve}=F.options;if(!re)throw cr.create("registration-project-id");if(!be)throw cr.create("registration-api-key");if(!Ve)throw cr.create("registration-app-id");const lt=new Lp(Ve,F.name,x=x||"firebase"),yt=new mu(lt),rt=new ue.Yd(Un);rt.logLevel=ue.in.ERROR;const ct=new Al(q,ae.SDK_VERSION,x,re,be,Ve),Hn=new Op(ct,lt),sr=new Nh(Hn,lt,yt,rt),_i=new Jc(F,sr,yt,lt,rt);return function Kc(D){const C=(0,te.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(_i),_i},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Un,"0.3.10"),(0,ae.registerVersion)(Un,"0.3.10","esm2017")}();const vu="/firebase-messaging-sw.js",gi="/firebase-cloud-messaging-push-scope",ws="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",wa="google.c.a.c_id",Ea="google.c.a.c_l",xl="google.c.a.ts",Vp="google.c.a.e";var Ys=(()=>{return(D=Ys||(Ys={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Ys;var D})();function mn(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _u(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),q=new Uint8Array(F.length);for(let re=0;re<F.length;++re)q[re]=F.charCodeAt(re);return q}const wu="fcm_token_details_db",Nr="fcm_token_object_Store";function Oh(D){return Iu.apply(this,arguments)}function Iu(){return Iu=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(wu))return null;let C=null;return(yield(0,le.X3)(wu,5,{upgrade:(F=(0,O.Z)(function*(q,re,be,Ve){var lt;if(re<2||!q.objectStoreNames.contains(Nr))return;const yt=Ve.objectStore(Nr),rt=yield yt.index("fcmSenderId").get(D);if(yield yt.clear(),rt)if(2===re){const ct=rt;if(!ct.auth||!ct.p256dh||!ct.endpoint)return;C={token:ct.fcmToken,createTime:null!==(lt=ct.createTime)&&void 0!==lt?lt:Date.now(),subscriptionOptions:{auth:ct.auth,p256dh:ct.p256dh,endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:"string"==typeof ct.vapidKey?ct.vapidKey:mn(ct.vapidKey)}}}else if(3===re){const ct=rt;C={token:ct.fcmToken,createTime:ct.createTime,subscriptionOptions:{auth:mn(ct.auth),p256dh:mn(ct.p256dh),endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:mn(ct.vapidKey)}}}else if(4===re){const ct=rt;C={token:ct.fcmToken,createTime:ct.createTime,subscriptionOptions:{auth:mn(ct.auth),p256dh:mn(ct.p256dh),endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:mn(ct.vapidKey)}}}}),function(re,be,Ve,lt){return F.apply(this,arguments)})})).close(),yield(0,le.Lj)(wu),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),td(C)?C:null;var F}),Iu.apply(this,arguments)}function td(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const Qt="firebase-messaging-store";let Du=null;function bu(){return Du||(Du=(0,le.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Qt)}})),Du}function yn(D){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,O.Z)(function*(D){const C=So(D),F=yield(yield bu()).transaction(Qt).objectStore(Qt).get(C);if(F)return F;{const q=yield Oh(D.appConfig.senderId);if(q)return yield Js(D,q),q}})).apply(this,arguments)}function Js(D,C){return ni.apply(this,arguments)}function ni(){return(ni=(0,O.Z)(function*(D,C){const x=So(D),q=(yield bu()).transaction(Qt,"readwrite");return yield q.objectStore(Qt).put(C,x),yield q.done,C})).apply(this,arguments)}function $r(D){return Es.apply(this,arguments)}function Es(){return(Es=(0,O.Z)(function*(D){const C=So(D),F=(yield bu()).transaction(Qt,"readwrite");yield F.objectStore(Qt).delete(C),yield F.done})).apply(this,arguments)}function So({appConfig:D}){return D.appId}const $t=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Cu(D,C){return xo.apply(this,arguments)}function xo(){return(xo=(0,O.Z)(function*(D,C){var x;const F=yield Ds(D),q=Xs(C),re={method:"POST",headers:F,body:JSON.stringify(q)};let be;try{be=yield(yield fetch(dt(D.appConfig),re)).json()}catch(Ve){throw $t.create("token-subscribe-failed",{errorInfo:null===(x=Ve)||void 0===x?void 0:x.toString()})}if(be.error)throw $t.create("token-subscribe-failed",{errorInfo:be.error.message});if(!be.token)throw $t.create("token-subscribe-no-token");return be.token})).apply(this,arguments)}function Ml(D,C){return Or.apply(this,arguments)}function Or(){return(Or=(0,O.Z)(function*(D,C){var x;const F=yield Ds(D),q=Xs(C.subscriptionOptions),re={method:"PATCH",headers:F,body:JSON.stringify(q)};let be;try{be=yield(yield fetch(`${dt(D.appConfig)}/${C.token}`,re)).json()}catch(Ve){throw $t.create("token-update-failed",{errorInfo:null===(x=Ve)||void 0===x?void 0:x.toString()})}if(be.error)throw $t.create("token-update-failed",{errorInfo:be.error.message});if(!be.token)throw $t.create("token-update-no-token");return be.token})).apply(this,arguments)}function Is(D,C){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,O.Z)(function*(D,C){var x;const q={method:"DELETE",headers:yield Ds(D)};try{const be=yield(yield fetch(`${dt(D.appConfig)}/${C}`,q)).json();if(be.error)throw $t.create("token-unsubscribe-failed",{errorInfo:be.error.message})}catch(re){throw $t.create("token-unsubscribe-failed",{errorInfo:null===(x=re)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function dt({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Ds(D){return Da.apply(this,arguments)}function Da(){return(Da=(0,O.Z)(function*({appConfig:D,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Xs({p256dh:D,auth:C,endpoint:x,vapidKey:F}){const q={web:{endpoint:x,auth:C,p256dh:D}};return F!==ws&&(q.web.applicationPubKey=F),q}const ba=6048e5;function Ca(D){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,O.Z)(function*(D){const C=yield Rn(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:mn(C.getKey("auth")),p256dh:mn(C.getKey("p256dh"))},F=yield yn(D.firebaseDependencies);if(F){if(Zi(F.subscriptionOptions,x))return Date.now()>=F.createTime+ba?Ce(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield Is(D.firebaseDependencies,F.token)}catch(q){console.warn(q)}return bs(D.firebaseDependencies,x)}return bs(D.firebaseDependencies,x)})).apply(this,arguments)}function Tu(D){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,O.Z)(function*(D){const C=yield yn(D.firebaseDependencies);C&&(yield Is(D.firebaseDependencies,C.token),yield $r(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Ce(D,C){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,O.Z)(function*(D,C){try{const x=yield Ml(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield Js(D.firebaseDependencies,F),x}catch(x){throw yield Tu(D),x}})).apply(this,arguments)}function bs(D,C){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,O.Z)(function*(D,C){const F={token:yield Cu(D,C),createTime:Date.now(),subscriptionOptions:C};return yield Js(D,F),F.token})).apply(this,arguments)}function Rn(D,C){return No.apply(this,arguments)}function No(){return(No=(0,O.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_u(C)})})).apply(this,arguments)}function Zi(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function mi(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Oo(D,C){if(!C.notification)return;D.notification={};const x=C.notification.title;x&&(D.notification.title=x);const F=C.notification.body;F&&(D.notification.body=F);const q=C.notification.image;q&&(D.notification.image=q)}(C,D),function Au(D,C){!C.data||(D.data=C.data)}(C,D),function Up(D,C){var x,F,q,re,be;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const Ve=null!==(q=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==q?q:null===(re=C.notification)||void 0===re?void 0:re.click_action;Ve&&(D.fcmOptions.link=Ve);const lt=null===(be=C.fcmOptions)||void 0===be?void 0:be.analytics_label;lt&&(D.fcmOptions.analyticsLabel=lt)}(C,D),C}function Nl(D){return"object"==typeof D&&!!D&&wa in D}function Ph(D,C){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<C.length&&x.push(C.charAt(F));return x.join("")}function jn(D){return $t.create("missing-app-config-values",{valueName:D})}Ph("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ph("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ki{constructor(C,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const q=function Aa(D){if(!D||!D.options)throw jn("App Configuration Object");if(!D.name)throw jn("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of C)if(!x[F])throw jn(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:q,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ko(D){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,O.Z)(function*(D){var C;try{D.swRegistration=yield navigator.serviceWorker.register(vu,{scope:gi}),D.swRegistration.update().catch(()=>{})}catch(x){throw $t.create("failed-service-worker-registration",{browserErrorMessage:null===(C=x)||void 0===C?void 0:C.message})}})).apply(this,arguments)}function yi(D,C){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,O.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield ko(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw $t.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function Po(D,C){return nd.apply(this,arguments)}function nd(){return(nd=(0,O.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=ws)})).apply(this,arguments)}function Sa(){return(Sa=(0,O.Z)(function*(D,C){if(!navigator)throw $t.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw $t.create("permission-blocked");return yield Po(D,C?.vapidKey),yield yi(D,C?.serviceWorkerRegistration),Ca(D)})).apply(this,arguments)}function xa(D,C,x){return Su.apply(this,arguments)}function Su(){return(Su=(0,O.Z)(function*(D,C,x){const F=Fo(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[wa],message_name:x[Ea],message_time:x[xl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Fo(D){switch(D){case Ys.NOTIFICATION_CLICKED:return"notification_open";case Ys.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ma(){return(Ma=(0,O.Z)(function*(D,C){const x=C.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===Ys.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(mi(x)):D.onMessageHandler.next(mi(x)));const F=x.data;Nl(F)&&"1"===F[Vp]&&(yield xa(D,x.messageType,F))})).apply(this,arguments)}const eo="@firebase/messaging",rd=D=>{const C=new Ki(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Fh(D,C){return Ma.apply(this,arguments)}(C,x)),C},Vo=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function kl(D,C){return Sa.apply(this,arguments)}(C,F)}};function xu(){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,O.Z)(function*(){try{yield(0,te.eu)()}catch{return!1}return typeof window<"u"&&(0,te.hl)()&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pl(){(0,ae._registerComponent)(new ge.wA("messaging",rd,"PUBLIC")),(0,ae._registerComponent)(new ge.wA("messaging-internal",Vo,"PRIVATE")),(0,ae.registerVersion)(eo,"0.9.15"),(0,ae.registerVersion)(eo,"0.9.15","esm2017")}();const Vl="analytics",sd="firebase_id",Yi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Na="https://www.googletagmanager.com/gtag/js",Yn=new ue.Yd("@firebase/analytics");function Lh(D){return Promise.all(D.map(C=>C.catch(x=>x)))}function As(D,C){const x=document.createElement("script");x.src=`${Na}?l=${D}&id=${C}`,x.async=!0,document.head.appendChild(x)}function od(D,C,x,F,q,re){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,O.Z)(function*(D,C,x,F,q,re){const be=F[q];try{if(be)yield C[be];else{const lt=(yield Lh(x)).find(yt=>yt.measurementId===q);lt&&(yield C[lt.appId])}}catch(Ve){Yn.error(Ve)}D("config",q,re)})).apply(this,arguments)}function Oa(D,C,x,F,q){return to.apply(this,arguments)}function to(){return(to=(0,O.Z)(function*(D,C,x,F,q){try{let re=[];if(q&&q.send_to){let be=q.send_to;Array.isArray(be)||(be=[be]);const Ve=yield Lh(x);for(const lt of be){const yt=Ve.find(ct=>ct.measurementId===lt),rt=yt&&C[yt.appId];if(!rt){re=[];break}re.push(rt)}}0===re.length&&(re=Object.values(C)),yield Promise.all(re),D("event",F,q||{})}catch(re){Yn.error(re)}})).apply(this,arguments)}function ty(){const D=window.document.getElementsByTagName("script");for(const C of Object.values(D))if(C.src&&C.src.includes(Na))return C;return null}const kr=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ad=new class vi{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Ul(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Nn(D){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,O.Z)(function*(D){var C;const{appId:x,apiKey:F}=D,q={method:"GET",headers:Ul(F)},re=Yi.replace("{app-id}",x),be=yield fetch(re,q);if(200!==be.status&&304!==be.status){let Ve="";try{const lt=yield be.json();null!==(C=lt.error)&&void 0!==C&&C.message&&(Ve=lt.error.message)}catch{}throw kr.create("config-fetch-failed",{httpStatus:be.status,responseMessage:Ve})}return be.json()})).apply(this,arguments)}function un(D){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,O.Z)(function*(D,C=ad,x){const{appId:F,apiKey:q,measurementId:re}=D.options;if(!F)throw kr.create("no-app-id");if(!q){if(re)return{measurementId:re,appId:F};throw kr.create("no-api-key")}const be=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ve=new jp;return setTimeout((0,O.Z)(function*(){Ve.abort()}),void 0!==x?x:6e4),no({appId:F,apiKey:q,measurementId:re},be,Ve,C)})).apply(this,arguments)}function no(D,C,x){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,O.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:x},F,q=ad){var re,be;const{appId:Ve,measurementId:lt}=D;try{yield ku(F,C)}catch(yt){if(lt)return Yn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${lt} provided in the "measurementId" field in the local Firebase config. [${null===(re=yt)||void 0===re?void 0:re.message}]`),{appId:Ve,measurementId:lt};throw yt}try{const yt=yield Nn(D);return q.deleteThrottleMetadata(Ve),yt}catch(yt){const rt=yt;if(!Pu(rt)){if(q.deleteThrottleMetadata(Ve),lt)return Yn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${lt} provided in the "measurementId" field in the local Firebase config. [${rt?.message}]`),{appId:Ve,measurementId:lt};throw yt}const ct=503===Number(null===(be=rt?.customData)||void 0===be?void 0:be.httpStatus)?(0,te.$s)(x,q.intervalMillis,30):(0,te.$s)(x,q.intervalMillis),Hn={throttleEndTimeMillis:Date.now()+ct,backoffCount:x+1};return q.setThrottleMetadata(Ve,Hn),Yn.debug(`Calling attemptFetch again in ${ct} millis`),no(D,Hn,F,q)}})).apply(this,arguments)}function ku(D,C){return new Promise((x,F)=>{const q=Math.max(C-Date.now(),0),re=setTimeout(x,q);D.addEventListener(()=>{clearTimeout(re),F(kr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function Pu(D){if(!(D instanceof te.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class jp{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function Mi(){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,O.Z)(function*(){var D;if(!(0,te.hl)())return Yn.warn(kr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(C){return Yn.warn(kr.create("indexeddb-unavailable",{errorInfo:null===(D=C)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function ka(){return(ka=(0,O.Z)(function*(D,C,x,F,q,re,be){var Ve;const lt=un(D);lt.then(sr=>{x[sr.measurementId]=sr.appId,D.options.measurementId&&sr.measurementId!==D.options.measurementId&&Yn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${sr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(sr=>Yn.error(sr)),C.push(lt);const yt=Mi().then(sr=>{if(sr)return F.getId()}),[rt,ct]=yield Promise.all([lt,yt]);ty()||As(re,rt.measurementId),q("js",new Date);const Hn=null!==(Ve=be?.config)&&void 0!==Ve?Ve:{};return Hn.origin="firebase",Hn.update=!0,null!=ct&&(Hn[sd]=ct),q("config",rt.measurementId,Hn),rt.measurementId})).apply(this,arguments)}class Bo{constructor(C){this.app=C}_delete(){return delete Pr[this.app.options.appId],Promise.resolve()}}let Pr={},Fu=[];const jl={};let ud,pe,Pa="dataLayer",Ri=!1;function xt(D,C,x){!function ri(){const D=[];if((0,te.ru)()&&D.push("This is a browser extension environment."),(0,te.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,q)=>`(${q+1}) ${F}`).join(" "),x=kr.create("invalid-analytics-context",{errorInfo:C});Yn.warn(x.message)}}();const F=D.options.appId;if(!F)throw kr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw kr.create("no-api-key");Yn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Pr[F])throw kr.create("already-exists",{id:F});if(!Ri){!function Ru(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Pa);const{wrappedGtag:re,gtagCore:be}=function Bp(D,C,x,F,q){let re=function(...be){window[F].push(arguments)};return window[q]&&"function"==typeof window[q]&&(re=window[q]),window[q]=function Vh(D,C,x,F){function re(){return(re=(0,O.Z)(function*(be,Ve,lt){try{"event"===be?yield Oa(D,C,x,Ve,lt):"config"===be?yield od(D,C,x,F,Ve,lt):D("set",Ve)}catch(yt){Yn.error(yt)}})).apply(this,arguments)}return function q(be,Ve,lt){return re.apply(this,arguments)}}(re,D,C,x),{gtagCore:re,wrappedGtag:window[q]}}(Pr,Fu,jl,Pa,"gtag");pe=re,ud=be,Ri=!0}return Pr[F]=function Ss(D,C,x,F,q,re,be){return ka.apply(this,arguments)}(D,Fu,jl,C,ud,Pa,x),new Bo(D)}function ii(){return(ii=(0,O.Z)(function*(D,C,x,F,q){if(q&&q.global)D("event",x,F);else{const re=yield C;D("event",x,Object.assign(Object.assign({},F),{send_to:re}))}})).apply(this,arguments)}function ld(){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,O.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch{return!1}})).apply(this,arguments)}const cd="@firebase/analytics";!function $p(){(0,ae._registerComponent)(new ge.wA(Vl,(C,{options:x})=>xt(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ae._registerComponent)(new ge.wA("analytics-internal",function D(C){try{const x=C.getProvider(Vl).getImmediate();return{logEvent:(F,q,re)=>function jh(D,C,x,F){D=(0,te.m9)(D),function ro(D,C,x,F,q){return ii.apply(this,arguments)}(pe,Pr[D.app.options.appId],C,x,F).catch(q=>Yn.error(q))}(x,F,q,re)}}catch(x){throw kr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ae.registerVersion)(cd,"0.7.11"),(0,ae.registerVersion)(cd,"0.7.11","esm2017")}();var $h=P(4408),La=P(7565);const hr=new class Ho extends La.v{}(class dd extends $h.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,x,F):C.flush(this)}});var Lt=P(4986),Uu=P(8505),Rs=P(9468),Va=P(5363);const Bu=new p.GfV("7.4.1"),fr="__angularfire_symbol__analyticsIsSupportedValue",Fr="__angularfire_symbol__analyticsIsSupported",ki="__angularfire_symbol__remoteConfigIsSupportedValue",si="__angularfire_symbol__remoteConfigIsSupported",Xi="__angularfire_symbol__messagingIsSupportedValue",es="__angularfire_symbol__messagingIsSupported";function Gl(D,C,x){if(C){if(1===C.length)return C[0];const re=C.filter(be=>be.app===x);if(1===re.length)return re[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Fr]||(globalThis[Fr]=ld().then(D=>globalThis[fr]=D).catch(()=>globalThis[fr]=!1)),globalThis[es]||(globalThis[es]=xu().then(D=>globalThis[Xi]=D).catch(()=>globalThis[Xi]=!1)),globalThis[si]||(globalThis[si]=yu().then(D=>globalThis[ki]=D).catch(()=>globalThis[ki]=!1));const pr=(D,C)=>{const x=C?[C]:(0,X.C6)(),F=[];return x.forEach(q=>{q.container.getProvider(D).instances.forEach(be=>{F.includes(be)||F.push(be)})}),F};function oi(){}class ts{constructor(C,x=hr){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,F){const q=this.zone;return this.delegate.schedule(function(be){q.runGuarded(()=>{C.apply(this,[be])})},x,F)}}class $u{constructor(C){this.zone=C,this.task=null}call(C,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oi,{},oi,oi)),x.pipe((0,Uu.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let pd=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new ts(Zone.current)),this.insideAngular=x.run(()=>new ts(Zone.current,Lt.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(p.LFG(p.R0b))},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function ns(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function ir(D){return ns(),function rs(D){return function(x){return(x=x.lift(new $u(D.ngZone))).pipe((0,Rs.R)(D.outsideAngular),(0,Va.Q)(D.insideAngular))}}(ns())(D)}},2090:(st,Te,P)=>{P.d(Te,{$s:()=>Xr,BH:()=>He,G6:()=>Ue,L:()=>le,LL:()=>oe,Mn:()=>Ee,Sg:()=>Ae,UG:()=>he,US:()=>ge,ZB:()=>B,ZR:()=>ye,b$:()=>Qe,d:()=>De,eu:()=>ve,hl:()=>j,jU:()=>me,m9:()=>en,ne:()=>di,pd:()=>gs,r3:()=>Tr,ru:()=>ze,tV:()=>de,uI:()=>Le,vZ:()=>Kr,w1:()=>we,xO:()=>Ar,xb:()=>Rt,z$:()=>Se,zI:()=>W,zd:()=>Si});const ae=function(z){const V=[];let Y=0;for(let K=0;K<z.length;K++){let L=z.charCodeAt(K);L<128?V[Y++]=L:L<2048?(V[Y++]=L>>6|192,V[Y++]=63&L|128):55296==(64512&L)&&K+1<z.length&&56320==(64512&z.charCodeAt(K+1))?(L=65536+((1023&L)<<10)+(1023&z.charCodeAt(++K)),V[Y++]=L>>18|240,V[Y++]=L>>12&63|128,V[Y++]=L>>6&63|128,V[Y++]=63&L|128):(V[Y++]=L>>12|224,V[Y++]=L>>6&63|128,V[Y++]=63&L|128)}return V},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,V){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,K=[];for(let L=0;L<z.length;L+=3){const _e=z[L],Pe=L+1<z.length,et=Pe?z[L+1]:0,mt=L+2<z.length,nn=mt?z[L+2]:0;let Zn=(15&et)<<2|nn>>6,Vt=63&nn;mt||(Vt=64,Pe||(Zn=64)),K.push(Y[_e>>2],Y[(3&_e)<<4|et>>4],Y[Zn],Y[Vt])}return K.join("")},encodeString(z,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(z):this.encodeByteArray(ae(z),V)},decodeString(z,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(z):function(z){const V=[];let Y=0,K=0;for(;Y<z.length;){const L=z[Y++];if(L<128)V[K++]=String.fromCharCode(L);else if(L>191&&L<224){const _e=z[Y++];V[K++]=String.fromCharCode((31&L)<<6|63&_e)}else if(L>239&&L<365){const mt=((7&L)<<18|(63&z[Y++])<<12|(63&z[Y++])<<6|63&z[Y++])-65536;V[K++]=String.fromCharCode(55296+(mt>>10)),V[K++]=String.fromCharCode(56320+(1023&mt))}else{const _e=z[Y++],Pe=z[Y++];V[K++]=String.fromCharCode((15&L)<<12|(63&_e)<<6|63&Pe)}}return V.join("")}(this.decodeStringToByteArray(z,V))},decodeStringToByteArray(z,V){this.init_();const Y=V?this.charToByteMapWebSafe_:this.charToByteMap_,K=[];for(let L=0;L<z.length;){const _e=Y[z.charAt(L++)],et=L<z.length?Y[z.charAt(L)]:0;++L;const nn=L<z.length?Y[z.charAt(L)]:64;++L;const St=L<z.length?Y[z.charAt(L)]:64;if(++L,null==_e||null==et||null==nn||null==St)throw Error();K.push(_e<<2|et>>4),64!==nn&&(K.push(et<<4&240|nn>>2),64!==St&&K.push(nn<<6&192|St))}return K},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},le=function(z){return function(z){const V=ae(z);return ge.encodeByteArray(V,!0)}(z).replace(/\./g,"")},de=function(z){try{return ge.decodeString(z,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function B(z,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return V}for(const Y in V)!V.hasOwnProperty(Y)||!Q(Y)||(z[Y]=B(z[Y],V[Y]));return z}function Q(z){return"__proto__"!==z}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,Y)=>{this.resolve=V,this.reject=Y})}wrapCallback(V){return(Y,K)=>{Y?this.reject(Y):this.resolve(K),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(Y):V(Y,K))}}}function Ae(z,V){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const K=V||"demo-project",L=z.iat||0,_e=z.sub||z.user_id;if(!_e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pe=Object.assign({iss:`https://securetoken.google.com/${K}`,aud:K,iat:L,exp:L+3600,auth_time:L,sub:_e,user_id:_e,firebase:{sign_in_provider:"custom",identities:{}}},z);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(Pe)),""].join(".")}function Se(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function he(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function me(){return"object"==typeof self&&self.self===self}function ze(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function Qe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function De(){return Se().indexOf("Electron/")>=0}function we(){const z=Se();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function Ee(){return Se().indexOf("MSAppHost/")>=0}function Ue(){return!he()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j(){return"object"==typeof indexedDB}function ve(){return new Promise((z,V)=>{try{let Y=!0;const K="validate-browser-context-for-indexeddb-analytics-module",L=self.indexedDB.open(K);L.onsuccess=()=>{L.result.close(),Y||self.indexedDB.deleteDatabase(K),z(!0)},L.onupgradeneeded=()=>{Y=!1},L.onerror=()=>{var _e;V((null===(_e=L.error)||void 0===_e?void 0:_e.message)||"")}}catch(Y){V(Y)}})}function W(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ye extends Error{constructor(V,Y,K){super(Y),this.code=V,this.customData=K,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(V,Y,K){this.service=V,this.serviceName=Y,this.errors=K}create(V,...Y){const K=Y[0]||{},L=`${this.service}/${V}`,_e=this.errors[V],Pe=_e?function Oe(z,V){return z.replace(at,(Y,K)=>{const L=V[K];return null!=L?String(L):`<${K}?>`})}(_e,K):"Error";return new ye(L,`${this.serviceName}: ${Pe} (${L}).`,K)}}const at=/\{\$([^}]+)}/g;function Tr(z,V){return Object.prototype.hasOwnProperty.call(z,V)}function Rt(z){for(const V in z)if(Object.prototype.hasOwnProperty.call(z,V))return!1;return!0}function Kr(z,V){if(z===V)return!0;const Y=Object.keys(z),K=Object.keys(V);for(const L of Y){if(!K.includes(L))return!1;const _e=z[L],Pe=V[L];if(vr(_e)&&vr(Pe)){if(!Kr(_e,Pe))return!1}else if(_e!==Pe)return!1}for(const L of K)if(!Y.includes(L))return!1;return!0}function vr(z){return null!==z&&"object"==typeof z}function Ar(z){const V=[];for(const[Y,K]of Object.entries(z))Array.isArray(K)?K.forEach(L=>{V.push(encodeURIComponent(Y)+"="+encodeURIComponent(L))}):V.push(encodeURIComponent(Y)+"="+encodeURIComponent(K));return V.length?"&"+V.join("&"):""}function Si(z){const V={};return z.replace(/^\?/,"").split("&").forEach(K=>{if(K){const[L,_e]=K.split("=");V[decodeURIComponent(L)]=decodeURIComponent(_e)}}),V}function gs(z){const V=z.indexOf("?");if(!V)return"";const Y=z.indexOf("#",V);return z.substring(V,Y>0?Y:void 0)}function di(z,V){const Y=new ut(z,V);return Y.subscribe.bind(Y)}class ut{constructor(V,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{V(this)}).catch(K=>{this.error(K)})}next(V){this.forEachObserver(Y=>{Y.next(V)})}error(V){this.forEachObserver(Y=>{Y.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,Y,K){let L;if(void 0===V&&void 0===Y&&void 0===K)throw new Error("Missing Observer.");L=function bn(z,V){if("object"!=typeof z||null===z)return!1;for(const Y of V)if(Y in z&&"function"==typeof z[Y])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:Y,complete:K},void 0===L.next&&(L.next=En),void 0===L.error&&(L.error=En),void 0===L.complete&&(L.complete=En);const _e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?L.error(this.finalError):L.complete()}catch{}}),this.observers.push(L),_e}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,V)}sendOne(V,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{Y(this.observers[V])}catch(K){typeof console<"u"&&console.error&&console.error(K)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function En(){}function Xr(z,V=1e3,Y=2){const K=V*Math.pow(Y,z),L=Math.round(.5*K*(Math.random()-.5)*2);return Math.min(144e5,K+L)}function en(z){return z&&z._delegate?z._delegate:z}},5789:(st,Te,P)=>{var p=P(4650);let X=null;function O(){return X}const ue=new p.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function de(){return(0,p.LFG)(B)}()},providedIn:"platform"}),n})();const $=new p.OlP("Location Initialized");let B=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function He(){return new B((0,p.LFG)(ue))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Se(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function me(){const n=(0,p.LFG)(ue).location;return new Qe((0,p.LFG)(le),n&&n.origin||"")}()},providedIn:"root"}),n})();const ze=new p.OlP("appBaseHref");let Qe=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Le(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Le(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le),p.LFG(ze,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Le(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Le(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le),p.LFG(ze,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),we=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Se(Ue(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function Be(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Le,n.joinWithSlash=Ae,n.stripTrailingSlash=Se,n.\u0275fac=function(t){return new(t||n)(p.LFG(he))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Ee(){return new we((0,p.LFG)(he))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}class Zs{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ys=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Zs(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),pi(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{pi(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function pi(n,e){n.context.$implicit=e.item}let Kc=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new dr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Rr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Rr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class dr{constructor(){this.$implicit=null,this.ngIf=null}}function Rr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let Ks=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function Nr(n){return"server"===n}let Qs=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new kh((0,p.LFG)(ue),window)}),n})();class kh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Du(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Qt(this.window.history)||Qt(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Qt(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Js extends class Ia extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function te(n){X||(X=n)}(new Js)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function $r(){return ni=ni||document.querySelector("base"),ni?ni.getAttribute("href"):null}();return null==t?null:function So(n){Es=Es||document.createElement("a"),Es.setAttribute("href",n);const e=Es.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ni=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Zc(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Es,ni=null;const qi=new p.OlP("TRANSITION_ID"),Cu=[{provide:p.ip1,useFactory:function $t(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[qi,ue,p.zs3],multi:!0}];let Ml=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Or=new p.OlP("EventManagerPlugins");let Is=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Or),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Mo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let dt=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ds=(()=>{class n extends dt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Da),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Da))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Da(n){O().remove(n)}const Xs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ba=/%COMP%/g;function bs(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?bs(n,o,t):(o=o.replace(ba,n),t.push(o))}return t}function Ro(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let No=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Zi(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Up(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case p.ifc.ShadowDom:return new Nl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=bs(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Is),p.LFG(Ds),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Zi{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Xs[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Au(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Au(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Xs[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Xs[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,o&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ro(r)):this.eventManager.addEventListener(e,t,Ro(r))}}function Au(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Up extends Zi{constructor(e,t,r,o){super(e),this.component=r;const u=bs(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Ce(n){return"_ngcontent-%COMP%".replace(ba,n)}(o+"-"+r.id),this.hostAttr=function Nt(n){return"_nghost-%COMP%".replace(ba,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Nl extends Zi{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=bs(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ph=(()=>{class n extends Mo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Aa=["alt","control","meta","shift"],Ki={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ko={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Cs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let yi=(()=>{class n extends Mo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(Aa.forEach(E=>{const b=r.indexOf(E);b>-1&&(r.splice(b,1),d+=E+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function Ol(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ko.hasOwnProperty(e)&&(e=ko[e]))}return Ki[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Aa.forEach(u=>{u!=o&&Cs[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Fh=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function Sa(){Js.makeCurrent()},multi:!0},{provide:ue,useFactory:function Su(){return(0,p.RDi)(document),document},deps:[]}]),Ma=new p.OlP(""),eo=[{provide:p.rWj,useClass:class xo{addToWindow(e){p.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const o=p.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(E){d=d||E,u--,0==u&&r(d)};o.forEach(function(E){E.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],Lo=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function xa(){return new p.qLn},deps:[]},{provide:Or,useClass:Ph,multi:!0,deps:[ue,p.R0b,p.Lbi]},{provide:Or,useClass:yi,multi:!0,deps:[ue]},{provide:No,useClass:No,deps:[Is,Ds,p.AFp]},{provide:p.FYo,useExisting:No},{provide:dt,useExisting:Ds},{provide:Ds,useClass:Ds,deps:[ue]},{provide:Is,useClass:Is,deps:[Or,p.R0b]},{provide:class yn{},useClass:Ml,deps:[]},[]];let rd=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:qi,useExisting:p.AFp},Cu]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ma,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...Lo,...eo],imports:[Ks,p.hGG]}),n})(),id=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Fl(){return new id((0,p.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;const Ul_firebase={apiKey:"AIzaSyDFdw5CQR2mR5dSwShnjr4aLJnTrwQxLGU",authDomain:"itcon-4e7f4.firebaseapp.com",databaseURL:"https://itcon-4e7f4-default-rtdb.europe-west1.firebasedatabase.app",projectId:"itcon-4e7f4",storageBucket:"itcon-4e7f4.appspot.com",messagingSenderId:"186123877919",appId:"1:186123877919:web:e76d787125e33b90f05f2a",measurementId:"G-15G5ZXQTW4"};var Nn=P(2011),Cn=P(5813),un=P(5867);var Ke,pe=P(5861),Ri=P(9681),jo=P(4859),ri=P(1877),xt=P(2090),ro=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ii={},Fa=Fa||{},pt=ro||self;function xs(){}function Vu(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ji(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ni="closure_uid_"+(1e9*Math.random()>>>0),Ms=0;function $o(n,e,t){return n.call.apply(n.bind,arguments)}function ld(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Tn(n,e,t){return(Tn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$o:ld).apply(null,arguments)}function Oi(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function _r(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function io(){this.s=this.s,this.o=this.o}var jh={};io.prototype.s=!1,io.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function $l(n){return Object.prototype.hasOwnProperty.call(n,Ni)&&n[Ni]||(n[Ni]=++Ms)}(this);delete jh[n]}},io.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const cd=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Hl=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function $h(n){return Array.prototype.concat.apply([],arguments)}function dd(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function La(n){return/^[\s\xa0]*$/.test(n)}var Lt,Ho=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function hr(n,e){return-1!=n.indexOf(e)}function Hh(n,e){return n<e?-1:n>e?1:0}e:{var Uu=pt.navigator;if(Uu){var Rs=Uu.userAgent;if(Rs){Lt=Rs;break e}}Lt=""}function Va(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Bu(n){const e={};for(const t in n)e[t]=n[t];return e}var fr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fr(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<fr.length;u++)t=fr[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ki(n){return ki[" "](n),n}ki[" "]=xs;var pr,n,Xi=hr(Lt,"Opera"),es=hr(Lt,"Trident")||hr(Lt,"MSIE"),ju=hr(Lt,"Edge"),hd=ju||es,fd=hr(Lt,"Gecko")&&!(hr(Lt.toLowerCase(),"webkit")&&!hr(Lt,"Edge"))&&!(hr(Lt,"Trident")||hr(Lt,"MSIE"))&&!hr(Lt,"Edge"),Hp=hr(Lt.toLowerCase(),"webkit")&&!hr(Lt,"Edge");function Gl(){var n=pt.document;return n?n.documentMode:void 0}e:{var oi="",ts=(n=Lt,fd?/rv:([^\);]+)(\)|;)/.exec(n):ju?/Edge\/([\d\.]+)/.exec(n):es?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Hp?/WebKit\/(\S+)/.exec(n):Xi?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ts&&(oi=ts?ts[1]:""),es){var $u=Gl();if(null!=$u&&$u>parseFloat(oi)){pr=String($u);break e}}pr=oi}var pd={};var Hu=pt.document&&es&&(Gl()||parseInt(pr,10))||void 0,Gp=function(){if(!pt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{pt.addEventListener("test",xs,e),pt.removeEventListener("test",xs,e)}catch{}return n}();function ir(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function rs(n,e){if(ir.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(fd){e:{try{ki(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Go[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&rs.Z.h.call(this)}}ir.prototype.h=function(){this.defaultPrevented=!0},_r(rs,ir);var Go={2:"touch",3:"pen",4:"mouse"};rs.prototype.h=function(){rs.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ba="closure_listenable_"+(1e6*Math.random()|0),D=0;function C(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++D,this.ca=this.fa=!1}function x(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function F(n){this.src=n,this.g={},this.h=0}function q(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=cd(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(x(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function re(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}F.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=re(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new C(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var be="closure_lm_"+(1e6*Math.random()|0),Ve={};function lt(n,e,t,r,o){if(r&&r.once)return ct(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)lt(n,e[u],t,r,o);return null}return t=Fi(t),n&&n[Ba]?n.N(e,t,Ji(r)?!!r.capture:!!r,o):yt(n,e,t,!1,r,o)}function yt(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Ji(o)?!!o.capture:!!o,m=Pi(n);if(m||(n[be]=m=new F(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function rt(){var e=Os;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Gp||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(_i(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ct(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)ct(n,e[u],t,r,o);return null}return t=Fi(t),n&&n[Ba]?n.O(e,t,Ji(r)?!!r.capture:!!r,o):yt(n,e,t,!0,r,o)}function Hn(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Hn(n,e[u],t,r,o);else r=Ji(r)?!!r.capture:!!r,t=Fi(t),n&&n[Ba]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=re(u=n.g[e],t,r,o))&&(x(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Pi(n))&&(e=n.g[e.toString()],n=-1,e&&(n=re(e,t,r,o)),(t=-1<n?e[n]:null)&&sr(t))}function sr(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ba])q(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(_i(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Pi(e))?(q(t,n),0==t.h&&(t.src=null,e[be]=null)):x(n)}}}function _i(n){return n in Ve?Ve[n]:Ve[n]="on"+n}function Os(n,e){if(n.ca)n=!0;else{e=new rs(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&sr(n),n=t.call(r,e)}return n}function Pi(n){return(n=n[be])instanceof F?n:null}var Gu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fi(n){return"function"==typeof n?n:(n[Gu]||(n[Gu]=function(e){return n.handleEvent(e)}),n[Gu])}function cn(){io.call(this),this.i=new F(this),this.P=this,this.I=null}function dn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ir(e,n);else if(e instanceof ir)e.target=e.target||n;else{var o=e;Fr(e=new ir(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Lr(d,r,!0,e)&&o}if(o=Lr(d=e.g=n,r,!0,e)&&o,o=Lr(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Lr(d=e.g=t[u],r,!1,e)&&o}function Lr(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,E=d.ia||d.src;d.fa&&q(n.i,d),o=!1!==m.call(E,r)&&o}}return o&&!r.defaultPrevented}_r(cn,io),cn.prototype[Ba]=!0,cn.prototype.removeEventListener=function(n,e,t,r){Hn(this,n,e,t,r)},cn.prototype.M=function(){if(cn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)x(t[r]);delete n.g[e],n.h--}}this.I=null},cn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},cn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ja=pt.JSON.stringify;function zp(){var n=qp;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ks,$a=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Wp,n=>n.reset());class Wp{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ry(n){pt.setTimeout(()=>{throw n},0)}function Gh(n,e){ks||function zl(){var n=pt.Promise.resolve(void 0);ks=function(){n.then(Zp)}}(),zh||(ks(),zh=!0),qp.add(n,e)}var zh=!1,qp=new class zu{constructor(){this.h=this.g=null}add(e,t){const r=$a.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Zp(){for(var n;n=zp();){try{n.h.call(n.g)}catch(t){ry(t)}var e=$a;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}zh=!1}function Ha(n,e){cn.call(this),this.h=n||1,this.g=e||pt,this.j=Tn(this.kb,this),this.l=Date.now()}function Kp(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Wh(n,e,t){if("function"==typeof n)t&&(n=Tn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Tn(n.handleEvent,n)}return 2147483647<Number(e)?-1:pt.setTimeout(n,e||0)}function Yp(n){n.g=Wh(()=>{n.g=null,n.i&&(n.i=!1,Yp(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}_r(Ha,cn),(Ke=Ha.prototype).da=!1,Ke.S=null,Ke.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),dn(this,"tick"),this.da&&(Kp(this),this.start()))}},Ke.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ke.M=function(){Ha.Z.M.call(this),Kp(this),delete this.g};class iy extends io{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Yp(this)}M(){super.M(),this.g&&(pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zo(n){io.call(this),this.h=n,this.g={}}_r(zo,io);var qh=[];function Qp(n,e,t,r){Array.isArray(t)||(t&&(qh[0]=t.toString()),t=qh);for(var o=0;o<t.length;o++){var u=lt(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Zh(n){Va(n.g,function(e,t){this.g.hasOwnProperty(t)&&sr(e)},n),n.g={}}function Wl(){this.g=!0}function so(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Wu(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return ja(t)}catch{return e}}(n,t)+(r?" "+r:"")})}zo.prototype.M=function(){zo.Z.M.call(this),Zh(this)},zo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wl.prototype.Aa=function(){this.g=!1},Wl.prototype.info=function(){};var Wo={},Xp=null;function Yh(){return Xp=Xp||new cn}function ql(n){ir.call(this,Wo.Ma,n)}function Ga(n){const e=Yh();dn(e,new ql(e,n))}function Zl(n,e){ir.call(this,Wo.STAT_EVENT,n),this.stat=e}function Vr(n){const e=Yh();dn(e,new Zl(e,n))}function Kl(n,e){ir.call(this,Wo.Na,n),this.size=e}function qu(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return pt.setTimeout(function(){n()},e)}Wo.Ma="serverreachability",_r(ql,ir),Wo.STAT_EVENT="statevent",_r(Zl,ir),Wo.Na="timingevent",_r(Kl,ir);var Yl={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},eg={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ql(){}function Qh(){}Ql.prototype.h=null;var ng,wi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function za(){ir.call(this,"d")}function Jh(){ir.call(this,"c")}function rg(){}function Ps(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new zo(this),this.P=_0,this.W=new Ha(n=hd?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new sy}function sy(){this.i=null,this.g="",this.h=!1}_r(za,ir),_r(Jh,ir),_r(rg,Ql),rg.prototype.g=function(){return new XMLHttpRequest},rg.prototype.i=function(){return{}},ng=new rg;var _0=45e3,Zu={},gd={};function Jl(n,e,t){n.K=1,n.v=tc(Ko(e)),n.s=t,n.U=!0,ig(n,null)}function ig(n,e){n.F=Date.now(),qo(n),n.A=Ko(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),cy(t.h,"t",r),n.C=0,t=n.l.H,n.h=new sy,n.g=FI(n.l,t?e:null,!n.s),0<n.O&&(n.L=new iy(Tn(n.Ia,n,n.g),n.O)),Qp(n.V,n.g,"readystatechange",n.gb),e=n.H?Bu(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Ga(1),function Jp(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),E=0;E<m.length;E++){var b=m[E].split("=");if(1<b.length){var S=b[0];b=b[1];var N=S.split("_");d=2<=N.length&&"type"==N[1]?d+(S+"=")+b+"&":d+(S+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function sg(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Xh(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=oy(n,t),o==gd){4==e&&(n.o=4,Vr(14),r=!1),so(n.j,n.m,null,"[Incomplete Response]");break}if(o==Zu){n.o=4,Vr(15),so(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}so(n.j,n.m,o,null),md(n,o)}sg(n)&&o!=gd&&o!=Zu&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Vr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ad(e),e.L=!0,Vr(11))):(so(n.j,n.m,t,"[Invalid Chunked Response]"),Zo(n),oo(n))}function oy(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?gd:(t=Number(e.substring(t,r)),isNaN(t)?Zu:(r+=1)+t>e.length?gd:(e=e.substr(r,t),n.C=r+t,e))}function qo(n){n.Y=Date.now()+n.P,Xl(n,n.P)}function Xl(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=qu(Tn(n.eb,n),e)}function Ei(n){n.B&&(pt.clearTimeout(n.B),n.B=null)}function oo(n){0==n.l.G||n.I||xd(n.l,n)}function Zo(n){Ei(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Kp(n.W),Zh(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function md(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||rc(t.i,n)))if(t.I=n.N,!n.J&&rc(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Vs(t),it(t)}Qa(t),Vr(18)}}else t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=qu(Tn(t.ab,t),6e3));if(1>=Id(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else is(t,11)}else if((n.J||t.g==n)&&Vs(t),!La(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const S=b[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const N=b[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const H=b[5];null!=H&&"number"==typeof H&&0<H&&(t.K=r=1.5*H,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Z=n.g;if(Z){const fe=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fe){var u=r.i;!u.g&&(hr(fe,"spdy")||hr(fe,"quic")||hr(fe,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(sf(u,u.h),u.h=null))}if(r.D){const Fe=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.sa=Fe,vn(r.F,r.D,Fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=fy(r,r.H?r.la:null,r.W),d.J){Dd(r.i,d);var m=d,E=r.K;E&&m.setTimeout(E),m.B&&(Ei(m),qo(m)),r.g=d}else oc(r);0<t.l.length&&Ii(t)}else"stop"!=b[0]&&"close"!=b[0]||is(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?is(t,7):Xe(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}Ga(4)}catch{}}function ef(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Vu(n)||"string"==typeof n)Hl(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Vu(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function og(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Vu(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Wa(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Wa)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function ag(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];ao(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)ao(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function ao(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ke=Ps.prototype).setTimeout=function(n){this.P=n},Ke.gb=function(n){n=n.target;const e=this.L;e&&3==_(n)?e.l():this.Ia(n)},Ke.Ia=function(n){try{if(n==this.g)e:{const S=_(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>S)&&(3!=S||hd||this.g&&(this.h.h||this.g.ga()||A(this.g)))){this.I||4!=S||7==e||Ga(8==e||0>=N?3:2),Ei(this);var t=this.g.ba();this.N=t;t:if(sg(this)){var r=A(this.g);n="";var o=r.length,u=4==_(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Zo(this),oo(this);var d="";break t}this.h.i=new pt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function v0(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,E=this.g;if((m=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!La(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Vr(12),Zo(this),oo(this);break e}so(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,md(this,t)}this.U?(Xh(this,S,d),hd&&this.i&&3==S&&(Qp(this.V,this.W,"tick",this.fb),this.W.start())):(so(this.j,this.m,d,null),md(this,d)),4==S&&Zo(this),this.i&&!this.I&&(4==S?xd(this.l,this):(this.i=!1,qo(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Vr(12)):(this.o=0,Vr(13)),Zo(this),oo(this)}}}catch{}},Ke.fb=function(){if(this.g){var n=_(this.g),e=this.g.ga();this.C<e.length&&(Ei(this),Xh(this,n,e),this.i&&4!=n&&qo(this))}},Ke.cancel=function(){this.I=!0,Zo(this)},Ke.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Kh(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ga(3),Vr(17)),Zo(this),this.o=2,oo(this)):Xl(this,this.Y-n)},(Ke=Wa.prototype).R=function(){ag(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ke.T=function(){return ag(this),this.g.concat()},Ke.get=function(n,e){return ao(this.h,n)?this.h[n]:e},Ke.set=function(n,e){ao(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ke.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var Ku=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Yu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Yu){this.g=void 0!==e?e:n.g,Yo(this,n.j),this.s=n.s,yd(this,n.i),vd(this,n.m),this.l=n.l,e=n.h;var t=new Qu;t.i=e.i,e.g&&(t.g=new Wa(e.g),t.h=e.h),ug(this,t),this.o=n.o}else n&&(t=String(n).match(Ku))?(this.g=!!e,Yo(this,t[1]||"",!0),this.s=qa(t[2]||""),yd(this,t[3]||"",!0),vd(this,t[4]),this.l=qa(t[5]||"",!0),ug(this,t[6]||"",!0),this.o=qa(t[7]||"")):(this.g=!!e,this.h=new Qu(null,this.g))}function Ko(n){return new Yu(n)}function Yo(n,e,t){n.j=t?qa(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function yd(n,e,t){n.i=t?qa(e,!0):e}function vd(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ug(n,e,t){e instanceof Qu?(n.h=e,function nc(n,e){e&&!n.j&&(Fs(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(wd(this,r),cy(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=uo(e,lg)),n.h=new Qu(e,n.g))}function vn(n,e,t){n.h.set(e,t)}function tc(n){return vn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function qa(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function uo(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Qn),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Qn(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Yu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(uo(e,tf,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(uo(e,tf,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(uo(t,"/"==t.charAt(0)?nf:uy,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",uo(t,ly)),n.join("")};var tf=/[#\/\?@]/g,uy=/[#\?:]/g,nf=/[#\?]/g,lg=/[#\?@]/g,ly=/#/g;function Qu(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Fs(n){n.g||(n.g=new Wa,n.h=0,n.i&&function ec(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function wd(n,e){Fs(n),e=Za(n,e),ao(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,ao((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&ag(n)))}function rf(n,e){return Fs(n),e=Za(n,e),ao(n.g.h,e)}function cy(n,e,t){wd(n,e),0<t.length&&(n.i=null,n.g.set(Za(n,e),dd(t)),n.h+=t.length)}function Za(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Ju(n){this.l=n||Ed,n=pt.PerformanceNavigationTiming?0<(n=pt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(pt.g&&pt.g.Ea&&pt.g.Ea()&&pt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ke=Qu.prototype).add=function(n,e){Fs(this),this.i=null,n=Za(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ke.forEach=function(n,e){Fs(this),this.g.forEach(function(t,r){Hl(t,function(o){n.call(e,o,r,this)},this)},this)},Ke.T=function(){Fs(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Ke.R=function(n){Fs(this);var e=[];if("string"==typeof n)rf(this,n)&&(e=$h(e,this.g.get(Za(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=$h(e,n[t])}return e},Ke.set=function(n,e){return Fs(this),this.i=null,rf(this,n=Za(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ke.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var Ed=10;function Xu(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Id(n){return n.h?1:n.g?n.g.size:0}function rc(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function sf(n,e){n.g?n.g.add(e):n.h=e}function Dd(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function cg(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return dd(n.i)}function Ls(){}function dg(){this.g=new Ls}function dy(n,e,t){const r=t||"";try{ef(n,function(o,u){let d=o;Ji(o)&&(d=ja(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function bd(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function el(n){this.l=n.$b||null,this.j=n.ib||!1}function wr(n,e){cn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=tl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ju.prototype.cancel=function(){if(this.i=cg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Ls.prototype.stringify=function(n){return pt.JSON.stringify(n,void 0)},Ls.prototype.parse=function(n){return pt.JSON.parse(n,void 0)},_r(el,Ql),el.prototype.g=function(){return new wr(this.l,this.j)},el.prototype.i=function(n){return function(){return n}}({}),_r(wr,cn);var tl=0;function Cd(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ic(n){n.readyState=4,n.l=null,n.j=null,n.A=null,hn(n)}function hn(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ke=wr.prototype).open=function(n,e){if(this.readyState!=tl)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,hn(this)},Ke.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||pt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ic(this)),this.readyState=tl},Ke.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,hn(this)),this.g&&(this.readyState=3,hn(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof pt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Cd(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ke.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ic(this):hn(this),3==this.readyState&&Cd(this)}},Ke.Ua=function(n){this.g&&(this.response=this.responseText=n,ic(this))},Ke.Ta=function(n){this.g&&(this.response=n,ic(this))},Ke.ha=function(){this.g&&ic(this)},Ke.setRequestHeader=function(n,e){this.v.append(n,e)},Ke.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ke.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(wr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Ka=pt.JSON.parse;function On(n){cn.call(this),this.headers=new Wa,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=sc,this.K=this.L=!1}_r(On,cn);var sc="",Ur=/^https?$/i,Ya=["POST","PUT"];function hy(n){return"content-type"==n.toLowerCase()}function hg(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,uf(n),h(n)}function uf(n){n.D||(n.D=!0,dn(n,"complete"),dn(n,"error"))}function y(n){if(n.h&&typeof Fa<"u"&&(!n.C[1]||4!=_(n)||2!=n.ba()))if(n.v&&4==_(n))Wh(n.Fa,0,n);else if(dn(n,"readystatechange"),4==_(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(Ku)[1]||null;if(!o&&pt.self&&pt.self.location){var u=pt.self.location.protocol;o=u.substr(0,u.length-1)}r=!Ur.test(o?o.toLowerCase():"")}t=r}if(t)dn(n,"complete"),dn(n,"success");else{n.m=6;try{var d=2<_(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.ba()+"]",uf(n)}}finally{h(n)}}}function h(n,e){if(n.g){g(n);const t=n.g,r=n.C[0]?xs:null;n.g=null,n.C=null,e||dn(n,"ready");try{t.onreadystatechange=r}catch{}}}function g(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(pt.clearTimeout(n.A),n.A=null)}function _(n){return n.g?n.g.readyState:0}function A(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case sc:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function G(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function R(n){let e="";return Va(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):vn(n,e,t))}function se(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ke(n){this.za=0,this.l=[],this.h=new Wl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=se("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=se("baseRetryDelayMs",5e3,n),this.$a=se("retryDelaySeedMs",1e4,n),this.Ya=se("forwardChannelMaxRetries",2,n),this.ra=se("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Ju(n&&n.concurrentRequestLimit),this.Ca=new dg,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Xe(n){if(tt(n),3==n.G){var e=n.V++,t=Ko(n.F);vn(t,"SID",n.J),vn(t,"RID",e),vn(t,"TYPE","terminate"),nl(n,t),(e=new Ps(n,n.h,e,void 0)).K=2,e.v=tc(Ko(t)),t=!1,pt.navigator&&pt.navigator.sendBeacon&&(t=pt.navigator.sendBeacon(e.v.toString(),"")),!t&&pt.Image&&((new Image).src=e.v,t=!0),t||(e.g=FI(e.l,null),e.g.ea(e.v)),e.F=Date.now(),qo(e)}Md(n)}function it(n){n.g&&(Ad(n),n.g.cancel(),n.g=null)}function tt(n){it(n),n.u&&(pt.clearTimeout(n.u),n.u=null),Vs(n),n.i.cancel(),n.m&&("number"==typeof n.m&&pt.clearTimeout(n.m),n.m=null)}function Gn(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Ii(n)}function Ii(n){Xu(n.i)||n.m||(n.m=!0,Gh(n.Ha,n),n.C=0)}function Td(n,e){var t;t=e?e.m:n.V++;const r=Ko(n.F);vn(r,"SID",n.J),vn(r,"RID",t),vn(r,"AID",n.U),nl(n,r),n.o&&n.s&&G(r,n.o,n.s),t=new Ps(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Li(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),sf(n.i,t),Jl(t,r,e)}function nl(n,e){n.j&&ef({},function(t,r){vn(e,r,t)})}function Li(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Tn(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let E=0;E<t;E++){let b=o[E].h;const S=o[E].g;if(b-=u,0>b)u=Math.max(0,o[E].h-100),m=!1;else try{dy(S,d,"req"+b+"_")}catch{r&&r(S)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function oc(n){n.g||n.u||(n.Y=1,Gh(n.Ga,n),n.A=0)}function Qa(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=qu(Tn(n.Ga,n),cf(n,n.A)),n.A++,0))}function Ad(n){null!=n.B&&(pt.clearTimeout(n.B),n.B=null)}function Sd(n){n.g=new Ps(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ko(n.oa);vn(e,"RID","rpc"),vn(e,"SID",n.J),vn(e,"CI",n.N?"0":"1"),vn(e,"AID",n.U),nl(n,e),vn(e,"TYPE","xmlhttp"),n.o&&n.s&&G(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=tc(Ko(e)),t.s=null,t.U=!0,ig(t,n)}function Vs(n){null!=n.v&&(pt.clearTimeout(n.v),n.v=null)}function xd(n,e){var t=null;if(n.g==e){Vs(n),Ad(n),n.g=null;var r=2}else{if(!rc(n.i,e))return;t=e.D,Dd(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;dn(r=Yh(),new Kl(r,t,e,o)),Ii(n)}else oc(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function lf(n,e){return!(Id(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=qu(Tn(n.Ha,n,e),cf(n,n.C)),n.C++,0)))}(n,e)||2==r&&Qa(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:is(n,5);break;case 4:is(n,10);break;case 3:is(n,6);break;default:is(n,2)}}function cf(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function is(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Tn(n.jb,n);t||(t=new Yu("//www.google.com/images/cleardot.gif"),pt.location&&"http"==pt.location.protocol||Yo(t,"https"),tc(t)),function of(n,e){const t=new Wl;if(pt.Image){const r=new Image;r.onload=Oi(bd,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Oi(bd,t,r,"TestLoadImage: error",!1,e),r.onabort=Oi(bd,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Oi(bd,t,r,"TestLoadImage: timeout",!1,e),pt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Vr(2);n.G=0,n.j&&n.j.va(e),Md(n),tt(n)}function Md(n){n.G=0,n.I=-1,n.j&&((0!=cg(n.i).length||0!=n.l.length)&&(n.i.i.length=0,dd(n.l),n.l.length=0),n.j.ua())}function fy(n,e,t){let r=function _d(n){return n instanceof Yu?Ko(n):new Yu(n,void 0)}(t);if(""!=r.i)e&&yd(r,e+"."+r.i),vd(r,r.m);else{const o=pt.location;r=function ay(n,e,t,r){var o=new Yu(null,void 0);return n&&Yo(o,n),e&&yd(o,e),t&&vd(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Va(n.aa,function(o,u){vn(r,u,o)}),t=n.sa,(e=n.D)&&t&&vn(r,e,t),vn(r,"VER",n.ma),nl(n,r),r}function FI(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new On(t&&n.Ba&&!n.qa?new el({ib:!0}):n.qa)).L=n.H,e}function ac(){}function Rd(){if(es&&!(10<=Number(Hu)))throw Error("Environmental error: no available transport.")}function Vi(n,e){cn.call(this),this.g=new ke(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!La(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!La(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Nd(this)}function w0(n){za.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function fg(){Jh.call(this),this.status=1}function Nd(n){this.g=n}(Ke=On.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ng.g(),this.C=function tg(n){return n.h||(n.h=n.i())}(this.u?this.u:ng),this.g.onreadystatechange=Tn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void hg(this,u)}n=t||"";const o=new Wa(this.headers);r&&ef(r,function(u,d){o.set(d,u)}),r=function $p(n){e:{var e=hy;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=pt.FormData&&n instanceof pt.FormData,!(0<=cd(Ya,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{g(this),0<this.B&&((this.K=function af(n){return es&&function ns(){return function si(n){var e=pd;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Ho(String(pr)).split("."),t=Ho("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Hh(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Hh(0==o[2].length,0==u[2].length)||Hh(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Tn(this.pa,this)):this.A=Wh(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){hg(this,u)}},Ke.pa=function(){typeof Fa<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dn(this,"timeout"),this.abort(8))},Ke.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,dn(this,"complete"),dn(this,"abort"),h(this))},Ke.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),h(this,!0)),On.Z.M.call(this)},Ke.Fa=function(){this.s||(this.F||this.v||this.l?y(this):this.cb())},Ke.cb=function(){y(this)},Ke.ba=function(){try{return 2<_(this)?this.g.status:-1}catch{return-1}},Ke.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ke.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Ka(e)}},Ke.Da=function(){return this.m},Ke.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ke=ke.prototype).ma=8,Ke.G=1,Ke.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},Ke.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Ps(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Bu(u),Fr(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Li(this,o,e),vn(t=Ko(this.F),"RID",n),vn(t,"CVER",22),this.D&&vn(t,"X-HTTP-Session-Id",this.D),nl(this,t),this.o&&u&&G(t,this.o,u),sf(this.i,o),this.Ra&&vn(t,"TYPE","init"),this.ja?(vn(t,"$req",e),vn(t,"SID","null"),o.$=!0,Jl(o,t,null)):Jl(o,t,e),this.G=2}}else 3==this.G&&(n?Td(this,n):0==this.l.length||Xu(this.i)||Td(this))},Ke.Ga=function(){if(this.u=null,Sd(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=qu(Tn(this.bb,this),n)}},Ke.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Vr(10),it(this),Sd(this))},Ke.ab=function(){null!=this.v&&(this.v=null,it(this),Qa(this),Vr(19))},Ke.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Vr(2)):(this.h.info("Failed to ping google.com"),Vr(1))},(Ke=ac.prototype).xa=function(){},Ke.wa=function(){},Ke.va=function(){},Ke.ua=function(){},Ke.Oa=function(){},Rd.prototype.g=function(n,e){return new Vi(n,e)},_r(Vi,cn),Vi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Gh(Tn(n.hb,n,e))),Vr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=fy(n,null,n.W),Ii(n)},Vi.prototype.close=function(){Xe(this.g)},Vi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Gn(this.g,e)}else this.v?((e={}).__data__=ja(n),Gn(this.g,e)):Gn(this.g,n)},Vi.prototype.M=function(){this.g.j=null,delete this.j,Xe(this.g),delete this.g,Vi.Z.M.call(this)},_r(w0,za),_r(fg,Jh),_r(Nd,ac),Nd.prototype.xa=function(){dn(this.g,"a")},Nd.prototype.wa=function(n){dn(this.g,new w0(n))},Nd.prototype.va=function(n){dn(this.g,new fg(n))},Nd.prototype.ua=function(){dn(this.g,"b")},Rd.prototype.createWebChannel=Rd.prototype.g,Vi.prototype.send=Vi.prototype.u,Vi.prototype.open=Vi.prototype.m,Vi.prototype.close=Vi.prototype.close,Yl.NO_ERROR=0,Yl.TIMEOUT=8,Yl.HTTP_ERROR=6,eg.COMPLETE="complete",Qh.EventType=wi,wi.OPEN="a",wi.CLOSE="b",wi.ERROR="c",wi.MESSAGE="d",cn.prototype.listen=cn.prototype.N,On.prototype.listenOnce=On.prototype.O,On.prototype.getLastError=On.prototype.La,On.prototype.getLastErrorCode=On.prototype.Da,On.prototype.getStatus=On.prototype.ba,On.prototype.getResponseJson=On.prototype.Qa,On.prototype.getResponseText=On.prototype.ga,On.prototype.send=On.prototype.ea;var LI=ii.createWebChannelTransport=function(){return new Rd},VI=ii.getStatEventTarget=function(){return Yh()},py=ii.ErrorCode=Yl,UI=ii.EventType=eg,BI=ii.Event=Wo,gy=ii.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},my=ii.FetchXmlHttpFactory=el,df=ii.WebChannel=Qh,yy=ii.XhrIo=On;const E0="@firebase/firestore";class Br{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Br.UNAUTHENTICATED=new Br(null),Br.GOOGLE_CREDENTIALS=new Br("google-credentials-uid"),Br.FIRST_PARTY=new Br("first-party-uid"),Br.MOCK_USER=new Br("mock-user");let uc="9.8.4";const Ja=new ri.Yd("@firebase/firestore");function Xa(){return Ja.logLevel}function Re(n,...e){if(Ja.logLevel<=ri.in.DEBUG){const t=e.map(kd);Ja.debug(`Firestore (${uc}): ${n}`,...t)}}function gr(n,...e){if(Ja.logLevel<=ri.in.ERROR){const t=e.map(kd);Ja.error(`Firestore (${uc}): ${n}`,...t)}}function Od(n,...e){if(Ja.logLevel<=ri.in.WARN){const t=e.map(kd);Ja.warn(`Firestore (${uc}): ${n}`,...t)}}function kd(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${uc}) INTERNAL ASSERTION FAILED: `+n;throw gr(e),new Error(e)}function vt(n,e){n||nt()}function Ze(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends xt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class hf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Br.UNAUTHENTICATED))}shutdown(){}}class vy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class C0{constructor(e){this.t=e,this.currentUser=Br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let d=new or;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new or,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=d;e.enqueueRetryable((0,pe.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},E=b=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>E(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?E(b):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new or)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt("string"==typeof r.accessToken),new hf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vt(null===e||"string"==typeof e),new Br(e)}}class _y{constructor(e,t,r){this.type="FirstParty",this.user=Br.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class ff{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new _y(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class T0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A0{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(vt("string"==typeof t.token),this.p=t.token,new T0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function jI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class wy{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=jI(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Tt(n,e){return n<e?-1:n>e?1:0}function lc(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function $I(n){return n+"\0"}class An{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return An.fromMillis(Date.now())}static fromDate(e){return An.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new An(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new An(0,0))}static max(){return new _t(new An(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Pd{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Pd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Pd{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const HI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Pd{construct(e,t,r){return new on(e,t,r)}static isValidIdentifier(e){return HI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new on(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Me(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Me(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new Me(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new Me(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(t)}static emptyPath(){return new on([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Jt.fromString(e))}static fromName(e){return new Ge(Jt.fromString(e).popFirst(5))}static empty(){return new Ge(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Jt(e.slice()))}}class pf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Ey(n){return n.fields.find(e=>2===e.kind)}function cc(n){return n.fields.filter(e=>2!==e.kind)}pf.UNKNOWN_ID=-1;class pg{constructor(e,t){this.fieldPath=e,this.kind=t}}class gf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new gf(0,ss.min())}}function Iy(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=_t.fromTimestamp(1e9===r?new An(t+1,0):new An(t,r));return new ss(o,Ge.empty(),e)}function S0(n){return new ss(n.readTime,n.key,-1)}class ss{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ss(_t.min(),Ge.empty(),-1)}static max(){return new ss(_t.max(),Ge.empty(),-1)}}function Dy(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Tt(n.largestBatchId,e.largestBatchId))}const Ct="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class by{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function eu(n){return gg.apply(this,arguments)}function gg(){return gg=(0,pe.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==Ct)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),gg.apply(this,arguments)}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},E=>r(E))}),d=!0,u===o&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(o=>o?ie.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,o)=>{const u=e.length,d=new Array(u);let m=0;for(let E=0;E<u;E++){const b=E;t(e[b]).next(S=>{d[b]=S,++m,m===u&&r(d)},S=>o(S))}})}static doWhile(e,t){return new ie((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class mg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new or,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Fd(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const o=yg(r.target.error);this.T.reject(new Fd(e,o))}}static open(e,t,r,o){try{return new mg(t,e.transaction(o,r))}catch(u){throw new Fd(t,u)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new zI(t)}}class Us{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===Us.v((0,xt.z$)())&&gr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),Ld(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,xt.hl)())return!1;if(Us.S())return!0;const e=(0,xt.z$)(),t=Us.v(e),r=0<t&&t<10,o=Us.D(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,pe.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Fd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Me(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Me(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Fd(e,m))},u.onupgradeneeded=d=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.P.O(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,pe.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.k(e);const E=mg.open(u.db,e,d?"readonly":"readwrite",r),b=o(E).next(S=>(E.R(),S)).catch(S=>(E.abort(S),ie.reject(S))).toPromise();return b.catch(()=>{}),yield E.A,b}catch(E){const b=E,S="FirebaseError"!==b.name&&m<3;if(Re("SimpleDb","Transaction failed with error:",b.message,"Retrying:",S),u.close(),!S)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class GI{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Ld(this.$.delete())}}class Fd extends Me{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function rl(n){return"IndexedDbTransactionError"===n.name}class zI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ld(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),Ld(this.store.add(e))}get(e){return Ld(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),Ld(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),Ld(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.G(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ie((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ie((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}W(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const o=this.cursor(r);return this.G(o,(u,d,m)=>m.delete())}J(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.G(o,t)}Y(e){const t=this.cursor({});return new ie((r,o)=>{t.onerror=u=>{const d=yg(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}G(e,t){const r=[];return new ie((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const E=new GI(m),b=t(m.primaryKey,m.value,E);if(b instanceof ie){const S=b.catch(N=>(E.done(),ie.reject(N)));r.push(S)}E.isDone?o():null===E.U?m.continue():m.continue(E.U)}}).next(()=>ie.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ld(n){return new ie((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=yg(r.target.error);t(o)}})}let Cy=!1;function yg(n){const e=Us.v((0,xt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Cy||(Cy=!0,setTimeout(()=>{throw r},0)),r}}return n}class WI{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Re("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,pe.Z)(function*(){t.task=null;try{Re("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){rl(r)?Re("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield eu(r)}yield t.Z(1)}))}}class x0{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,pe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let o=t,u=!0;return ie.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Re("IndexBackiller",`Processing collection: ${d}`),this.nt(e,d,o).next(m=>{o-=m,r.add(d)});u=!1})).next(()=>t-o)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.st(o,u)).next(m=>(Re("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>d.size)}))}st(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=S0(u);Dy(d,r)>0&&(r=d)}),new ss(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Di{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function vg(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Vd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function M0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Di.ot=-1;class kn{constructor(e,t){this.comparator=e,this.root=t||jr.EMPTY}insert(e,t){return new kn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(e){return new kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mf(this.root,e,this.comparator,!1)}getReverseIterator(){return new mf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mf(this.root,e,this.comparator,!0)}}class mf{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??jr.RED,this.left=o??jr.EMPTY,this.right=u??jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new jr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return jr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1,jr.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new jr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xt{constructor(e){this.comparator=e,this.data=new kn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new R0(this.data.getIterator())}getIteratorFrom(e){return new R0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xt(this.comparator);return t.data=e,t}}class R0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function il(n){return n.hasNext()?n.getNext():void 0}class Ui{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Ui([])}unionWith(e){let t=new Xt(on.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ui(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Jn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Jn(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Jn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jn.EMPTY_BYTE_STRING=new Jn("");const qI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qo(n){if(vt(!!n),"string"==typeof n){let e=0;const t=qI.exec(n);if(vt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pn(n.seconds),nanos:Pn(n.nanos)}}function Pn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Bs(n){return"string"==typeof n?Jn.fromBase64String(n):Jn.fromUint8Array(n)}function _g(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function wg(n){const e=n.mapValue.fields.__previous_value__;return _g(e)?wg(e):e}function yf(n){const e=Qo(n.mapValue.fields.__local_write_time__.timestampValue);return new An(e.seconds,e.nanos)}class ZI{constructor(e,t,r,o,u,d,m,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=E}}class Jo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Jo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Jo&&e.projectId===this.projectId&&e.database===this.database}}function Xo(n){return null==n}function vf(n){return 0===n&&1/n==-1/0}function N0(n){return"number"==typeof n&&Number.isInteger(n)&&!vf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const sl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Eg={nullValue:"NULL_VALUE"};function tu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_g(n)?4:F0(n)?9007199254740991:10:nt()}function lo(n,e){if(n===e)return!0;const t=tu(n);if(t!==tu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yf(n).isEqual(yf(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Qo(r.timestampValue),d=Qo(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Bs(n.bytesValue).isEqual(Bs(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Pn(r.geoPointValue.latitude)===Pn(o.geoPointValue.latitude)&&Pn(r.geoPointValue.longitude)===Pn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Pn(r.integerValue)===Pn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Pn(r.doubleValue),d=Pn(o.doubleValue);return u===d?vf(u)===vf(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return lc(n.arrayValue.values||[],e.arrayValue.values||[],lo);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(vg(u)!==vg(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!lo(u[m],d[m])))return!1;return!0}(n,e);default:return nt()}var o}function Ud(n,e){return void 0!==(n.values||[]).find(t=>lo(t,e))}function Gr(n,e){if(n===e)return 0;const t=tu(n),r=tu(e);if(t!==r)return Tt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Pn(o.integerValue||o.doubleValue),m=Pn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return O0(n.timestampValue,e.timestampValue);case 4:return O0(yf(n),yf(e));case 5:return Tt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Bs(o),m=Bs(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let E=0;E<d.length&&E<m.length;E++){const b=Tt(d[E],m[E]);if(0!==b)return b}return Tt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Tt(Pn(o.latitude),Pn(u.latitude));return 0!==d?d:Tt(Pn(o.longitude),Pn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let E=0;E<d.length&&E<m.length;++E){const b=Gr(d[E],m[E]);if(b)return b}return Tt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===sl.mapValue&&u===sl.mapValue)return 0;if(o===sl.mapValue)return 1;if(u===sl.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),E=u.fields||{},b=Object.keys(E);m.sort(),b.sort();for(let S=0;S<m.length&&S<b.length;++S){const N=Tt(m[S],b[S]);if(0!==N)return N;const H=Gr(d[m[S]],E[b[S]]);if(0!==H)return H}return Tt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw nt()}}function O0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Tt(n,e);const t=Qo(n),r=Qo(e),o=Tt(t.seconds,r.seconds);return 0!==o?o:Tt(t.nanos,r.nanos)}function ol(n){return _f(n)}function _f(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Qo(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Bs(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=_f(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${_f(r.fields[m])}`;return u+"}"}(n.mapValue):nt();var e}function dc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function k0(n){return!!n&&"integerValue"in n}function Ig(n){return!!n&&"arrayValue"in n}function KI(n){return!!n&&"nullValue"in n}function P0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wf(n){return!!n&&"mapValue"in n}function Dg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Vd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Dg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function F0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Bd(n){return"nullValue"in n?Eg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?dc(Jo.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function YI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?dc(Jo.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?sl:nt()}function Ay(n,e){const t=Gr(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Ef(n,e){const t=Gr(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class zr{constructor(e){this.value=e}static empty(){return new zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dg(t)}setAll(e){let t=on.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Dg(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());wf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];wf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Vd(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new zr(Dg(this.value))}}function Sy(n){const e=[];return Vd(n.fields,(t,r)=>{const o=new on([t]);if(wf(r)){const u=Sy(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Ui(e)}class Dn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Dn(e,0,_t.min(),_t.min(),zr.empty(),0)}static newFoundDocument(e,t,r){return new Dn(e,1,t,_t.min(),r,0)}static newNoDocument(e,t){return new Dn(e,2,t,_t.min(),zr.empty(),0)}static newUnknownDocument(e,t){return new Dn(e,3,t,_t.min(),zr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class QI{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.ut=null}}function L0(n,e=null,t=[],r=[],o=null,u=null,d=null){return new QI(n,e,t,r,o,u,d)}function hc(n){const e=Ze(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+ol(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Xo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ol(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ol(r)).join(",")),e.ut=t}return e.ut}function jd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!Ny(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!lo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!rD(n.startAt,e.startAt)&&rD(n.endAt,e.endAt)}function bg(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function If(n,e){return n.filters.filter(t=>t instanceof ai&&t.field.isEqual(e))}function xy(n,e,t){let r=Eg,o=!0;for(const u of If(n,e)){let d=Eg,m=!0;switch(u.op){case"<":case"<=":d=Bd(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=Eg}Ay({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Ay({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function Cg(n,e,t){let r=sl,o=!0;for(const u of If(n,e)){let d=sl,m=!0;switch(u.op){case">=":case">":d=YI(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=sl}Ef({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Ef({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class ai extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new My(e,t,r):"array-contains"===t?new V0(e,r):"in"===t?new eD(e,r):"not-in"===t?new tD(e,r):"array-contains-any"===t?new Ry(e,r):new ai(e,t,r)}static ct(e,t,r){return"in"===t?new XI(e,r):new UT(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Gr(t,this.value)):null!==t&&tu(this.value)===tu(t)&&this.at(Gr(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class My extends ai{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.at(t)}}class XI extends ai{constructor(e,t){super(e,"in",t),this.keys=fc(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class UT extends ai{constructor(e,t){super(e,"not-in",t),this.keys=fc(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fc(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class V0 extends ai{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ig(t)&&Ud(t.arrayValue,this.value)}}class eD extends ai{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ud(this.value.arrayValue,t)}}class tD extends ai{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ud(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ud(this.value.arrayValue,t)}}class Ry extends ai{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ig(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ud(this.value.arrayValue,r))}}class pc{constructor(e,t){this.position=e,this.inclusive=t}}class Df{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ny(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function nD(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(d.referenceValue),t.key):Gr(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function rD(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!lo(n.position[t],e.position[t]))return!1;return!0}class al{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=E,this.lt=null,this.ft=null}}function iD(n,e,t,r,o,u,d,m){return new al(n,e,t,r,o,u,d,m)}function bf(n){return new al(n)}function Cf(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Tg(n){for(const e of n.filters)if(e.ht())return e.field;return null}function Oy(n){return null!==n.collectionGroup}function gc(n){const e=Ze(n);if(null===e.lt){e.lt=[];const t=Tg(e),r=Cf(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new Df(t)),e.lt.push(new Df(on.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.lt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Df(on.keyField(),u))}}}return e.lt}function os(n){const e=Ze(n);if(!e.ft)if("F"===e.limitType)e.ft=L0(e.path,e.collectionGroup,gc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of gc(e))t.push(new Df(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new pc(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new pc(e.startAt.position,e.startAt.inclusive):null;e.ft=L0(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.ft}function Tf(n,e,t){return new al(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bi(n,e){return jd(os(n),os(e))&&n.limitType===e.limitType}function ky(n){return`${hc(os(n))}|lt:${n.limitType}`}function Py(n){return`Query(target=${function JI(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ol(r.value)}`;var r}).join(", ")}]`),Xo(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ol(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ol(t)).join(",")),`Target(${e})`}(os(n))}; limitType=${n.limitType})`}function Af(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ge.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=nD(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,gc(t),r)||t.endAt&&!function(o,u,d){const m=nD(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,gc(t),r)));var t,r}function ea(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ag(n){return(e,t)=>{let r=!1;for(const o of gc(n)){const u=B0(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function B0(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),E=d.data.field(o);return null!==m&&null!==E?Gr(m,E):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function Sg(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vf(e)?"-0":e}}function sD(n){return{integerValue:""+n}}function Fy(n,e){return N0(e)?sD(e):Sg(n,e)}class Ly{constructor(){this._=void 0}}function xg(n,e,t){return n instanceof ul?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof nu?oD(n,e):n instanceof mc?j0(n,e):function(r,o){const u=Rg(r,o),d=$0(u)+$0(r._t);return k0(u)&&k0(r._t)?sD(d):Sg(r.wt,d)}(n,e)}function Mg(n,e,t){return n instanceof nu?oD(n,e):n instanceof mc?j0(n,e):t}function Rg(n,e){return n instanceof $d?k0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ul extends Ly{}class nu extends Ly{constructor(e){super(),this.elements=e}}function oD(n,e){const t=Vy(e);for(const r of n.elements)t.some(o=>lo(o,r))||t.push(r);return{arrayValue:{values:t}}}class mc extends Ly{constructor(e){super(),this.elements=e}}function j0(n,e){let t=Vy(e);for(const r of n.elements)t=t.filter(o=>!lo(o,r));return{arrayValue:{values:t}}}class $d extends Ly{constructor(e,t){super(),this.wt=e,this._t=t}}function $0(n){return Pn(n.integerValue||n.doubleValue)}function Vy(n){return Ig(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ng{constructor(e,t){this.field=e,this.transform=t}}class BT{constructor(e,t){this.version=e,this.transformResults=t}}class Fn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fn}static exists(e){return new Fn(void 0,e)}static updateTime(e){return new Fn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Og{}function kg(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Mf(n.key,Fn.none()):new xf(n.key,n.data,Fn.none());{const t=n.data,r=zr.empty();let o=new Xt(on.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new ll(n.key,r,new Ui(o.toArray()),Fn.none())}}function jT(n,e,t){n instanceof xf?function(r,o,u){const d=r.value.clone(),m=cD(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof ll?function(r,o,u){if(!Sf(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=cD(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(lD(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Pg(n,e,t,r){return n instanceof xf?function(o,u,d,m){if(!Sf(o.precondition,u))return d;const E=o.value.clone(),b=dD(o.fieldTransforms,m,u);return E.setAll(b),u.convertToFoundDocument(u.version,E).setHasLocalMutations(),null}(n,e,t,r):n instanceof ll?function(o,u,d,m){if(!Sf(o.precondition,u))return d;const E=dD(o.fieldTransforms,m,u),b=u.data;return b.setAll(lD(o)),b.setAll(E),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(S=>S.field))}(n,e,t,r):(d=t,Sf(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function $T(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Rg(r.transform,o||null);null!=u&&(null===t&&(t=zr.empty()),t.set(r.field,u))}return t||null}function uD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&lc(t,r,(o,u)=>function aD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof nu&&r instanceof nu||t instanceof mc&&r instanceof mc?lc(t.elements,r.elements,lo):t instanceof $d&&r instanceof $d?lo(t._t,r._t):t instanceof ul&&r instanceof ul);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class xf extends Og{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ll extends Og{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function lD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function cD(n,e,t){const r=new Map;vt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,Mg(d,m,t[o]))}return r}function dD(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,xg(u,d,e))}return r}class Mf extends Og{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ta extends Og{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Uy{constructor(e){this.count=e}}var mr,Wt;function Fg(n){switch(n){default:return nt();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function By(n){if(void 0===n)return gr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case mr.OK:return ce.OK;case mr.CANCELLED:return ce.CANCELLED;case mr.UNKNOWN:return ce.UNKNOWN;case mr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case mr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case mr.INTERNAL:return ce.INTERNAL;case mr.UNAVAILABLE:return ce.UNAVAILABLE;case mr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case mr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case mr.NOT_FOUND:return ce.NOT_FOUND;case mr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case mr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case mr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case mr.ABORTED:return ce.ABORTED;case mr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case mr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case mr.DATA_LOSS:return ce.DATA_LOSS;default:return nt()}}(Wt=mr||(mr={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS";class na{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Vd(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return M0(this.inner)}size(){return this.innerSize}}const hD=new kn(Ge.comparator);function ar(){return hD}const jy=new kn(Ge.comparator);function Rf(...n){let e=jy;for(const t of n)e=e.insert(t.key,t);return e}function Lg(n){let e=jy;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ra(){return Nf()}function $y(){return Nf()}function Nf(){return new na(n=>n.toString(),(n,e)=>n.isEqual(e))}const fD=new kn(Ge.comparator),Of=new Xt(Ge.comparator);function bt(...n){let e=Of;for(const t of n)e=e.add(t);return e}const Hy=new Xt(Tt);function ru(){return Hy}class iu{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,ia.createSynthesizedTargetChangeForCurrentChange(e,t)),new iu(_t.min(),r,ru(),ar(),bt())}}class ia{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ia(Jn.EMPTY_BYTE_STRING,t,bt(),bt(),bt())}}class Vg{constructor(e,t,r,o){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=o}}class Gy{constructor(e,t){this.targetId=e,this.It=t}}class zy{constructor(e,t,r=Jn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Ug{constructor(){this.Tt=0,this.Et=kf(),this.At=Jn.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=bt(),t=bt(),r=bt();return this.Et.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:nt()}}),new ia(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=kf()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class Wy{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=ar(),this.Bt=qy(),this.Lt=new Xt(Tt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,o)=>{this.jt(o)&&t(o)})}zt(e){const t=e.targetId,r=e.It.count,o=this.Ht(t);if(o){const u=o.target;if(bg(u))if(0===r){const d=new Ge(u.path);this.Kt(t,d,Dn.newNoDocument(d,_t.min()))}else vt(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((u,d)=>{const m=this.Ht(d);if(m){if(u.current&&bg(m.target)){const E=new Ge(m.target.path);null!==this.$t.get(E)||this.Xt(d,E)||this.Kt(d,E,Dn.newNoDocument(E,e))}u.vt&&(t.set(d,u.St()),u.Dt())}});let r=bt();this.Bt.forEach((u,d)=>{let m=!0;d.forEachWhile(E=>{const b=this.Ht(E);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.$t.forEach((u,d)=>d.setReadTime(e));const o=new iu(e,t,this.Lt,this.$t,r);return this.$t=ar(),this.Bt=qy(),this.Lt=new Xt(Tt),o}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const o=this.Qt(e);this.Xt(e,t)?o.Ct(t,1):o.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new Ug,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Xt(Tt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new Ug),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function qy(){return new kn(Ge.comparator)}function kf(){return new kn(Ge.comparator)}const pD={asc:"ASCENDING",desc:"DESCENDING"},H0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class HT{constructor(e,t){this.databaseId=e,this.dt=t}}function Hd(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zy(n,e){return n.dt?e.toBase64():e.toUint8Array()}function gD(n,e){return Hd(n,e.toTimestamp())}function Er(n){return vt(!!n),_t.fromTimestamp(function(e){const t=Qo(e);return new An(t.seconds,t.nanos)}(n))}function Ky(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function G0(n){const e=Jt.fromString(n);return vt(J0(e)),e}function Wr(n,e){return Ky(n.databaseId,e.path)}function sa(n,e){const t=G0(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(Bg(t))}function Yy(n,e){return Ky(n.databaseId,e)}function mD(n){const e=G0(n);return 4===e.length?Jt.emptyPath():Bg(e)}function Pf(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Bg(n){return vt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Qy(n,e,t){return{name:Wr(n,e),fields:t.value.mapValue.fields}}function z0(n,e,t){const r=sa(n,e.name),o=Er(e.updateTime),u=new zr({mapValue:{fields:e.fields}}),d=Dn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Gd(n,e){let t;if(e instanceof xf)t={update:Qy(n,e.key,e.value)};else if(e instanceof Mf)t={delete:Wr(n,e.key)};else if(e instanceof ll)t={update:Qy(n,e.key,e.data),updateMask:_D(e.fieldMask)};else{if(!(e instanceof ta))return nt();t={verify:Wr(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof ul)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof nu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof mc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof $d)return{fieldPath:u.field.canonicalString(),increment:d._t};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:gD(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:nt()),t;var o}function Jy(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Fn.updateTime(Er(o.updateTime)):void 0!==o.exists?Fn.exists(o.exists):Fn.none():Fn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(vt("REQUEST_TIME"===d.setToServerValue),m=new ul):"appendMissingElements"in d?m=new nu(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new mc(d.removeAllFromArray.values||[]):"increment"in d?m=new $d(u,d.increment):nt();const E=on.fromServerFormat(d.fieldPath);return new Ng(E,m)}(n,o)):[];var o;if(e.update){const o=sa(n,e.update.name),u=new zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Ui((e.updateMask.fieldPaths||[]).map(b=>on.fromServerFormat(b)));return new ll(o,u,d,t,r)}return new xf(o,u,t,r)}if(e.delete){const o=sa(n,e.delete);return new Mf(o,t)}if(e.verify){const o=sa(n,e.verify);return new ta(o,t)}return nt()}function q0(n,e){return{documents:[Yy(n,e.path)]}}function Z0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Yy(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Yy(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0===E.length)return;const b=E.map(S=>function(N){if("=="===N.op){if(P0(N.value))return{unaryFilter:{field:zd(N.field),op:"IS_NAN"}};if(KI(N.value))return{unaryFilter:{field:zd(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(P0(N.value))return{unaryFilter:{field:zd(N.field),op:"IS_NOT_NAN"}};if(KI(N.value))return{unaryFilter:{field:zd(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zd(N.field),op:ev(N.op),value:N.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(E){if(0!==E.length)return E.map(b=>{return{field:zd((S=b).field),direction:oa(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(b=e.limit,n.dt||Xo(b)?b:{value:b});var b,m,E;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function Xy(n){let e=mD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){vt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=Y0(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(S=>{return new Df(Wd((N=S).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(S){let N;return N="object"==typeof S?S.value:S,Xo(N)?null:N}(t.limit));let E=null;var S;t.startAt&&(E=new pc((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new pc(S.values||[],!S.before)}(t.endAt)),iD(e,o,d,u,m,"F",E,b)}function Y0(n){return n?void 0!==n.unaryFilter?[Q0(n)]:void 0!==n.fieldFilter?[GT(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Y0(e)).reduce((e,t)=>e.concat(t)):nt():[]}function oa(n){return pD[n]}function ev(n){return H0[n]}function zd(n){return{fieldPath:n.canonicalString()}}function Wd(n){return on.fromServerFormat(n.fieldPath)}function GT(n){return ai.create(Wd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Q0(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Wd(n.unaryFilter.field);return ai.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Wd(n.unaryFilter.field);return ai.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Wd(n.unaryFilter.field);return ai.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wd(n.unaryFilter.field);return ai.create(o,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function _D(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function J0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ci(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=X0(e)),e=tv(n.get(t),e);return X0(e)}function tv(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function X0(n){return n+"\x01\x01"}function aa(n){const e=n.length;if(vt(e>=2),2===e)return vt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&nt(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let E;0===o.length?E=m:(o+=m,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:nt()}u=d+2}return new Jt(r)}const Ff=["userId","batchId"];function qd(n,e){return[n,Ci(e)]}function ew(n,e,t){return[n,Ci(e),t]}const nv={},rv=["prefixPath","collectionGroup","readTime","documentId"],tw=["prefixPath","collectionGroup","documentId"],zT=["collectionGroup","readTime","prefixPath","documentId"],WT=["canonicalId","targetId"],iv=["targetId","path"],qT=["path","targetId"],wD=["collectionId","parent"],nw=["indexId","uid"],rw=["uid","sequenceNumber"],iw=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sw=["indexId","uid","orderedDocumentKey"],ow=["userId","collectionPath","documentId"],su=["userId","collectionPath","largestBatchId"],jg=["userId","collectionGroup","largestBatchId"],aw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ED=[...aw,"documentOverlays"],ID=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$g=ID,uw=[...$g,"indexConfiguration","indexState","indexEntries"];class Hg extends by{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Ir(n,e){const t=Ze(n);return Us.N(t.ee,e)}class Gg{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&jT(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Pg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Pg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=$y();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(o.key)?null:m;const E=kg(d,m);null!==E&&r.set(o.key,E),d.isValidDocument()||d.convertToNoDocument(_t.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),bt())}isEqual(e){return this.batchId===e.batchId&&lc(this.mutations,e.mutations,(t,r)=>uD(t,r))&&lc(this.baseMutations,e.baseMutations,(t,r)=>uD(t,r))}}class sv{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){vt(e.mutations.length===r.length);let o=fD;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new sv(e,t,r,o)}}class ov{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class cl{constructor(e,t,r,o,u=_t.min(),d=_t.min(),m=Jn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new cl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new cl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new cl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class lw{constructor(e){this.ne=e}}function DD(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Lf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Wr(o=n.ne,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Hd(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:yc(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:yc(e.version)}}var o,u;return r}function Lf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function yc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vc(n){const e=new An(n.seconds,n.nanoseconds);return _t.fromTimestamp(e)}function Zd(n,e){const t=(e.baseMutations||[]).map(u=>Jy(n.ne,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Jy(n.ne,u)),o=An.fromMillis(e.localWriteTimeMs);return new Gg(e.batchId,o,t,r)}function zg(n){const e=vc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?vc(n.lastLimboFreeSnapshotVersion):_t.min();let r;var o;return void 0!==n.query.documents?(vt(1===(o=n.query).documents.length),r=os(bf(mD(o.documents[0])))):r=os(Xy(n.query)),new cl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Jn.fromBase64String(n.resumeToken))}function dw(n,e){const t=yc(e.snapshotVersion),r=yc(e.lastLimboFreeSnapshotVersion);let o;o=bg(e.target)?q0(n.ne,e.target):Z0(n.ne,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:hc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function av(n){const e=Xy({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Tf(e,e.limit,"L"):e}function Wg(n,e){return new ov(e.largestBatchId,Jy(n.ne,e.overlayMutation))}function uv(n,e){const t=e.path.lastSegment();return[n,Ci(e.path.popLast()),t]}function bD(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:yc(r.readTime),documentKey:Ci(r.documentKey.path),largestBatchId:r.largestBatchId}}class co{getBundleMetadata(e,t){return CD(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:vc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return CD(e).put({bundleId:(r=t).id,createTime:yc(Er(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return TD(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:av(o.bundledQuery),readTime:vc(o.readTime)};var o})}saveNamedQuery(e,t){return TD(e).put({name:(r=t).name,readTime:yc(Er(r.readTime)),bundledQuery:r.bundledQuery});var r}}function CD(n){return Ir(n,"bundles")}function TD(n){return Ir(n,"namedQueries")}class Vf{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new Vf(e,t.uid||"")}getOverlay(e,t){return Kd(e).get(uv(this.userId,t)).next(r=>r?Wg(this.wt,r):null)}getOverlays(e,t){const r=ra();return ie.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new ov(t,d);o.push(this.ie(e,m))}),ie.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Ci(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(Kd(e).W("collectionPathOverlayIndex",m))}),ie.waitFor(u)}getOverlaysForCollection(e,t,r){const o=ra(),u=Ci(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Kd(e).K("collectionPathOverlayIndex",d).next(m=>{for(const E of m){const b=Wg(this.wt,E);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=ra();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Kd(e).J({index:"collectionGroupOverlayIndex",range:m},(E,b,S)=>{const N=Wg(this.wt,b);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):S.done()}).next(()=>u)}ie(e,t){return Kd(e).put(function(r,o,u){const[d,m,E]=uv(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:E,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Gd(r.ne,u.mutation)}}(this.wt,this.userId,t))}}function Kd(n){return Ir(n,"documentOverlays")}class dl{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Pn(e.integerValue));else if("doubleValue"in e){const r=Pn(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),vf(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Bs(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?F0(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):nt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const o of Object.keys(r))this.le(o,t),this.oe(r[o],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const o of r)this.oe(o,t)}_e(e,t){this.ce(t,37),Ge.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function AD(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function SD(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=AD(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}dl.ye=new dl;class hw{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const o=t.codePointAt(0);this.Ie(240|o>>>18),this.Ie(128|63&o>>>12),this.Ie(128|63&o>>>6),this.Ie(128|63&o)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}ve(e){const t=this.Ve(e),r=SD(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}De(e){const t=this.Ve(e),r=SD(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class lv{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class xD{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class _c{constructor(){this.Me=new hw,this.Fe=new lv(this.Me),this.$e=new xD(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class wc{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new wc(this.indexId,this.documentKey,this.arrayValue,r)}}function Ec(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=fw(n.arrayValue,e.arrayValue),0!==t?t:(t=fw(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function fw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class MD{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=Ey(e);if(void 0!==t&&!this.Qe(t))return!1;const r=cc(e);let o=0,u=0;for(;o<r.length&&this.Qe(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Ke){const d=r[o];if(!this.je(this.Ke,d)||!this.We(this.Ue[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Ue.length||!this.We(this.Ue[u++],d))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class RD{constructor(){this.ze=new cv}addToCollectionParentIndex(e,t){return this.ze.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(ss.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class cv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Xt(Jt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Xt(Jt.comparator)).toArray()}}const Ic=new Uint8Array(0);class Dc{constructor(e,t){this.user=e,this.databaseId=t,this.He=new cv,this.Je=new na(r=>hc(r),(r,o)=>jd(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const u={collectionId:r,parent:Ci(o)};return ND(e).put(u)}return ie.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[$I(t),""],!1,!0);return ND(e).K(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(aa(d.parent))}return r})}addFieldIndex(e,t){const r=qg(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=Uf(e);return u.next(m=>{d.put(bD(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=qg(e),o=Uf(e),u=ou(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ou(e);let o=!0;const u=new Map;return ie.forEach(this.Ye(t),d=>this.Xe(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=bt();const m=[];return ie.forEach(u,(E,b)=>{var S;Re("IndexedDbIndexManager",`Using index ${S=E,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Zt=>`${Zt.fieldPath}:${Zt.kind}`).join(",")}`} to execute ${hc(t)}`);const N=function(Zt,Mt){const Gt=Ey(Mt);if(void 0===Gt)return null;for(const fn of If(Zt,Gt.fieldPath))switch(fn.op){case"array-contains-any":return fn.value.arrayValue.values||[];case"array-contains":return[fn.value]}return null}(b,E),H=function(Zt,Mt){const Gt=new Map;for(const fn of cc(Mt))for(const $i of If(Zt,fn.fieldPath))switch($i.op){case"==":case"in":Gt.set(fn.fieldPath.canonicalString(),$i.value);break;case"not-in":case"!=":return Gt.set(fn.fieldPath.canonicalString(),$i.value),Array.from(Gt.values())}return null}(b,E),Z=function(Zt,Mt){const Gt=[];let fn=!0;for(const $i of cc(Mt)){const y0=0===$i.kind?xy(Zt,$i.fieldPath,Zt.startAt):Cg(Zt,$i.fieldPath,Zt.startAt);Gt.push(y0.value),fn&&(fn=y0.inclusive)}return new pc(Gt,fn)}(b,E),fe=function(Zt,Mt){const Gt=[];let fn=!0;for(const $i of cc(Mt)){const y0=0===$i.kind?Cg(Zt,$i.fieldPath,Zt.endAt):xy(Zt,$i.fieldPath,Zt.endAt);Gt.push(y0.value),fn&&(fn=y0.inclusive)}return new pc(Gt,fn)}(b,E),Fe=this.Ze(E,b,Z),Ye=this.Ze(E,b,fe),At=this.tn(E,b,H),Pt=this.en(E.indexId,N,Fe,Z.inclusive,Ye,fe.inclusive,At);return ie.forEach(Pt,Zt=>r.j(Zt,t.limit).next(Mt=>{Mt.forEach(Gt=>{const fn=Ge.fromSegments(Gt.documentKey);d.has(fn)||(d=d.add(fn),m.push(fn))})}))}).next(()=>m)}return ie.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,o,u,d,m){const E=(null!=t?t.length:1)*Math.max(r.length,u.length),b=E/(null!=t?t.length:1),S=[];for(let N=0;N<E;++N){const H=t?this.nn(t[N/b]):Ic,Z=this.sn(e,H,r[N%b],o),fe=this.rn(e,H,u[N%b],d),Fe=m.map(Ye=>this.sn(e,H,Ye,!0));S.push(...this.createRange(Z,fe,Fe))}return S}sn(e,t,r,o){const u=new wc(e,Ge.empty(),t,r);return o?u:u.Le()}rn(e,t,r,o){const u=new wc(e,Ge.empty(),t,r);return o?u.Le():u}Xe(e,t){const r=new MD(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.Ge(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return ie.forEach(this.Ye(t),o=>this.Xe(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new Xt(on.comparator),E=!1;for(const b of d.filters){const S=b;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?E=!0:m=m.add(S.field))}for(const b of d.orderBy)b.field.isKeyField()||(m=m.add(b.field));return m.size+(E?1:0)}(o)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new _c;for(const o of cc(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Be(o.kind);dl.ye.re(u,d)}return r.Oe()}nn(e){const t=new _c;return dl.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new _c;return dl.ye.re(dc(this.databaseId,t),r.Be(function(o){const u=cc(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let o=[];o.push(new _c);let u=0;for(const d of cc(e)){const m=r[u++];for(const E of o)if(this.cn(t,d.fieldPath)&&Ig(m))o=this.an(o,d,m);else{const b=E.Be(d.kind);dl.ye.re(m,b)}}return this.hn(o)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const E=new _c;E.seed(m.Oe()),dl.ye.re(d,E.Be(t.kind)),u.push(E)}return u}cn(e,t){return!!e.filters.find(r=>r instanceof ai&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=qg(e),o=Uf(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(u=>{const d=[];return ie.forEach(u,m=>o.get([m.indexId,this.uid]).next(E=>{d.push(function(b,S){const N=S?new gf(S.sequenceNumber,new ss(vc(S.readTime),new Ge(aa(S.documentKey)),S.largestBatchId)):gf.empty(),H=b.fields.map(([Z,fe])=>new pg(on.fromServerFormat(Z),fe));return new pf(b.indexId,b.collectionGroup,H,N)}(m,E))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Tt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=qg(e),u=Uf(e);return this.ln(e).next(d=>o.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ie.forEach(m,E=>u.put(bD(E.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return ie.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?ie.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),ie.forEach(m,E=>this.fn(e,o,E).next(b=>{const S=this.dn(u,E);return b.isEqual(S)?ie.resolve():this._n(e,u,E,b,S)}))))})}wn(e,t,r,o){return ou(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,o){return ou(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const o=ou(e);let u=new Xt(Ec);return o.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(d,m)=>{u=u.add(new wc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}dn(e,t){let r=new Xt(Ec);const o=this.on(t,e);if(null==o)return r;const u=Ey(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Ig(d))for(const m of d.arrayValue.values||[])r=r.add(new wc(t.indexId,e.key,this.nn(m),o))}else r=r.add(new wc(t.indexId,e.key,Ic,o));return r}_n(e,t,r,o,u){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,E,b,S,N){const H=m.getIterator(),Z=E.getIterator();let fe=il(H),Fe=il(Z);for(;fe||Fe;){let Ye=!1,At=!1;if(fe&&Fe){const Pt=b(fe,Fe);Pt<0?At=!0:Pt>0&&(Ye=!0)}else null!=fe?At=!0:Ye=!0;Ye?(S(Fe),Fe=il(Z)):At?(N(fe),fe=il(H)):(fe=il(H),Fe=il(Z))}}(o,u,Ec,m=>{d.push(this.wn(e,t,r,m))},m=>{d.push(this.mn(e,t,r,m))}),ie.waitFor(d)}ln(e){let t=1;return Uf(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>Ec(d,m)).filter((d,m,E)=>!m||0!==Ec(d,E[m-1]));const o=[];o.push(e);for(const d of r){const m=Ec(d,e),E=Ec(d,t);if(0===m)o[0]=e.Le();else if(m>0&&E<0)o.push(d),o.push(d.Le());else if(E>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Ic,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Ic,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Zg)}getMinOffset(e,t){return ie.mapArray(this.Ye(t),r=>this.Xe(e,r).next(o=>o||nt())).next(Zg)}}function ND(n){return Ir(n,"collectionParents")}function ou(n){return Ir(n,"indexEntries")}function qg(n){return Ir(n,"indexConfiguration")}function Uf(n){return Ir(n,"indexState")}function Zg(n){vt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;Dy(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new ss(e.readTime,e.documentKey,t)}const pw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Yd(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const E=r.J({range:d},(S,N,H)=>(m++,H.delete()));u.push(E.next(()=>{vt(1===m)}));const b=[];for(const S of t.mutations){const N=ew(e,S.key.path,t.batchId);u.push(o.delete(N)),b.push(S.key)}return ie.waitFor(u).next(()=>b)}function Dr(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(41943040,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);class ua{constructor(e,t,r,o){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=o,this.gn={}}static se(e,t,r,o){vt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new ua(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return br(e).J({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=hl(e),d=br(e);return d.add({}).next(m=>{vt("number"==typeof m);const E=new Gg(m,t,r,o),b=function(H,Z,fe){const Fe=fe.baseMutations.map(At=>Gd(H.ne,At)),Ye=fe.mutations.map(At=>Gd(H.ne,At));return{userId:Z,batchId:fe.batchId,localWriteTimeMs:fe.localWriteTime.toMillis(),baseMutations:Fe,mutations:Ye}}(this.wt,this.userId,E),S=[];let N=new Xt((H,Z)=>Tt(H.canonicalString(),Z.canonicalString()));for(const H of o){const Z=ew(this.userId,H.key.path,m);N=N.add(H.key.path.popLast()),S.push(d.put(b)),S.push(u.put(Z,nv))}return N.forEach(H=>{S.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.gn[m]=E.keys()}),ie.waitFor(S).next(()=>E)})}lookupMutationBatch(e,t){return br(e).get(t).next(r=>r?(vt(r.userId===this.userId),Zd(this.wt,r)):null)}yn(e,t){return this.gn[t]?ie.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.gn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return br(e).J({index:"userMutationsIndex",range:o},(d,m,E)=>{m.userId===this.userId&&(vt(m.batchId>=r),u=Zd(this.wt,m)),E.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return br(e).J({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return br(e).K("userMutationsIndex",t).next(r=>r.map(o=>Zd(this.wt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=qd(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return hl(e).J({range:o},(d,m,E)=>{const[b,S,N]=d,H=aa(S);if(b===this.userId&&t.path.isEqual(H))return br(e).get(N).next(Z=>{if(!Z)throw nt();vt(Z.userId===this.userId),u.push(Zd(this.wt,Z))});E.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xt(Tt);const o=[];return t.forEach(u=>{const d=qd(this.userId,u.path),m=IDBKeyRange.lowerBound(d),E=hl(e).J({range:m},(b,S,N)=>{const[H,Z,fe]=b,Fe=aa(Z);H===this.userId&&u.path.isEqual(Fe)?r=r.add(fe):N.done()});o.push(E)}),ie.waitFor(o).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=qd(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new Xt(Tt);return hl(e).J({range:d},(E,b,S)=>{const[N,H,Z]=E,fe=aa(H);N===this.userId&&r.isPrefixOf(fe)?fe.length===o&&(m=m.add(Z)):S.done()}).next(()=>this.pn(e,m))}pn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(br(e).get(u).next(d=>{if(null===d)throw nt();vt(d.userId===this.userId),r.push(Zd(this.wt,d))}))}),ie.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Yd(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),ie.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ie.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return hl(e).J({range:r},(u,d,m)=>{if(u[0]===this.userId){const E=aa(u[1]);o.push(E)}else m.done()}).next(()=>{vt(0===o.length)})})}containsKey(e,t){return Bf(e,this.userId,t)}Tn(e){return bc(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Bf(n,e,t){const r=qd(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return hl(n).J({range:u,H:!0},(m,E,b)=>{const[S,N,H]=m;S===e&&N===o&&(d=!0),b.done()}).next(()=>d)}function br(n){return Ir(n,"mutations")}function hl(n){return Ir(n,"documentMutations")}function bc(n){return Ir(n,"mutationQueues")}class js{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new js(0)}static Rn(){return new js(-1)}}class Qd{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new js(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>_t.fromTimestamp(new An(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Pn(e,o)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ho(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(vt(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return ho(e).J((d,m)=>{const E=zg(m);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,u.push(this.removeTargetData(e,E)))}).next(()=>ie.waitFor(u)).next(()=>o)}forEachTarget(e,t){return ho(e).J((r,o)=>{const u=zg(o);t(u)})}bn(e){return Cc(e).get("targetGlobalKey").next(t=>(vt(null!==t),t))}Pn(e,t){return Cc(e).put("targetGlobalKey",t)}vn(e,t){return ho(e).put(dw(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=hc(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ho(e).J({range:o,index:"queryTargetsIndex"},(d,m,E)=>{const b=zg(m);jd(t,b.target)&&(u=b,E.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=as(e);return t.forEach(d=>{const m=Ci(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),ie.waitFor(o)}removeMatchingKeys(e,t,r){const o=as(e);return ie.forEach(t,u=>{const d=Ci(u.path);return ie.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=as(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=as(e);let u=bt();return o.J({range:r,H:!0},(d,m,E)=>{const b=aa(d[1]),S=new Ge(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Ci(t.path),o=IDBKeyRange.bound([r],[$I(r)],!1,!0);let u=0;return as(e).J({index:"documentTargetsIndex",H:!0,range:o},([d,m],E,b)=>{0!==d&&(u++,b.done())}).next(()=>u>0)}te(e,t){return ho(e).get(t).next(r=>r?zg(r):null)}}function ho(n){return Ir(n,"targets")}function Cc(n){return Ir(n,"targetGlobal")}function as(n){return Ir(n,"targetDocuments")}function Tc([n,e],[t,r]){const o=Tt(n,t);return 0===o?Tt(e,r):o}class Jd{constructor(e){this.Sn=e,this.buffer=new Xt(Tc),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Tc(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Xd{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,pe.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){rl(r)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield eu(r)}yield t.kn(3e5)}))}}class gw{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ie.resolve(Di.ot);const r=new Jd(t);return this.On.forEachTarget(e,o=>r.xn(o.sequenceNumber)).next(()=>this.On.Fn(e,o=>r.xn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(pw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pw):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,o,u,d,m,E,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),Xa()<=ri.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-S}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(E-m)+`ms\n\tRemoved ${N} documents in `+(b-E)+`ms\nTotal Duration: ${b-S}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class mw{constructor(e,t){this.db=e,this.garbageCollector=new gw(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,o)=>t(o))}addReference(e,t,r){return jf(e,r)}removeReference(e,t,r){return jf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return jf(e,t)}Un(e,t){return function(r,o){let u=!1;return bc(r).Y(d=>Bf(r,d,o).next(m=>(m&&(u=!0),ie.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Ln(e,(d,m)=>{if(m<=t){const E=this.Un(e,d).next(b=>{if(!b)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,_t.min()),as(e).delete([0,Ci(d.path)])))});o.push(E)}}).next(()=>ie.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return jf(e,t)}Ln(e,t){const r=as(e);let o,u=Di.ot;return r.J({index:"documentTargetsIndex"},([d,m],{path:E,sequenceNumber:b})=>{0===d?(u!==Di.ot&&t(new Ge(aa(o)),u),u=b,o=E):u=Di.ot}).next(()=>{u!==Di.ot&&t(new Ge(aa(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function jf(n,e){return as(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ci(e.path),sequenceNumber:r}));var r}class dv{constructor(){this.changes=new na(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yw{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return fl(e).put(r)}removeEntry(e,t,r){return fl(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Lf(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=Dn.newInvalidDocument(t);return fl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($f(t))},(o,u)=>{r=this.Kn(t,u)}).next(()=>r)}Gn(e,t){let r={size:0,document:Dn.newInvalidDocument(t)};return fl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($f(t))},(o,u)=>{r={document:this.Kn(t,u),size:Dr(u)}}).next(()=>r)}getEntries(e,t){let r=ar();return this.Qn(e,t,(o,u)=>{const d=this.Kn(o,u);r=r.insert(o,d)}).next(()=>r)}jn(e,t){let r=ar(),o=new kn(Ge.comparator);return this.Qn(e,t,(u,d)=>{const m=this.Kn(u,d);r=r.insert(u,m),o=o.insert(u,Dr(d))}).next(()=>({documents:r,Wn:o}))}Qn(e,t,r){if(t.isEmpty())return ie.resolve();let o=new Xt(_w);t.forEach(E=>o=o.add(E));const u=IDBKeyRange.bound($f(o.first()),$f(o.last())),d=o.getIterator();let m=d.getNext();return fl(e).J({index:"documentKeyIndex",range:u},(E,b,S)=>{const N=Ge.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&_w(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,b),m=d.hasNext()?d.getNext():null),m?S.q($f(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Lf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fl(e).K(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=ar();for(const E of d){const b=this.Kn(Ge.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);m=m.insert(b.key,b)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=ar();const d=pv(t,r),m=pv(t,ss.max());return fl(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(E,b,S)=>{const N=this.Kn(Ge.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(N.key,N),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new vw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return fv(e).get("remoteDocumentGlobalKey").next(t=>(vt(!!t),t))}qn(e,t){return fv(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function cw(n,e){let t;if(e.document)t=z0(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),o=vc(e.noDocument.readTime);t=Dn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=Ge.fromSegments(e.unknownDocument.path),o=vc(e.unknownDocument.version);t=Dn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new An(r[0],r[1]);return _t.fromTimestamp(o)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(_t.min()))return r}return Dn.newInvalidDocument(e)}}function hv(n){return new yw(n)}class vw extends dv{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new na(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Xt((u,d)=>Tt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Hn.get(u);if(t.push(this.zn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const E=DD(this.zn.wt,d);o=o.add(u.path.popLast()),r+=Dr(E)-m.size,t.push(this.zn.addEntry(e,u,E))}else if(r-=m.size,this.trackRemovals){const E=DD(this.zn.wt,d.convertToNoDocument(_t.min()));t.push(this.zn.addEntry(e,u,E))}}),o.forEach(u=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.zn.updateMetadata(e,r)),ie.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:o})=>(o.forEach((u,d)=>{this.Hn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function fv(n){return Ir(n,"remoteDocumentGlobal")}function fl(n){return Ir(n,"remoteDocumentsV14")}function $f(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function pv(n,e){const t=e.documentKey.path.toArray();return[n,Lf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function _w(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Tt(t[u],r[u]),o)return o;return o=Tt(t.length,r.length),o||(o=Tt(t[t.length-2],r[r.length-2]),o||Tt(t[t.length-1],r[r.length-1]))}class OD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Kg{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&Pg(r.mutation,o,Ui.empty(),An.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,bt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=bt()){const o=ra();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=Rf();return u.forEach((m,E)=>{d=d.insert(m,E.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=ra();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,bt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,o){let u=ar();const d=Nf(),m=Nf();return t.forEach((E,b)=>{const S=r.get(b.key);o.has(b.key)&&(void 0===S||S.mutation instanceof ll)?u=u.insert(b.key,b):void 0!==S&&(d.set(b.key,S.mutation.getFieldMask()),Pg(S.mutation,b,S.mutation.getFieldMask(),An.now()))}),this.recalculateAndSaveOverlays(e,u).next(E=>(E.forEach((b,S)=>d.set(b,S)),t.forEach((b,S)=>{var N;return m.set(b,new OD(S,null!==(N=d.get(b))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Nf();let o=new kn((d,m)=>d-m),u=bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(E=>{const b=t.get(E);if(null===b)return;let S=r.get(E)||Ui.empty();S=m.applyToLocalView(b,S),r.set(E,S);const N=(o.get(m.batchId)||bt()).add(E);o=o.insert(m.batchId,N)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const E=m.getNext(),b=E.key,S=E.value,N=$y();S.forEach(H=>{if(!u.has(H)){const Z=kg(t.get(H),r.get(H));null!==Z&&N.set(H,Z),u=u.add(H)}}),d.push(this.documentOverlayCache.saveOverlays(e,b,N))}return ie.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Oy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):ie.resolve(ra());let m=-1,E=u;return d.next(b=>ie.forEach(b,(S,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(S)?ie.resolve():this.getBaseDocument(e,S,N).next(H=>{E=E.insert(S,H)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,E,b,bt())).next(S=>({batchId:m,changes:Lg(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let o=Rf();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Rf();return this.indexManager.getCollectionParents(e,o).next(d=>ie.forEach(d,m=>{const E=(b=t,S=m.child(o),new al(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.getDocumentsMatchingCollectionQuery(e,E,r).next(b=>{b.forEach((S,N)=>{u=u.insert(S,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,E)=>{const b=E.getKey();null===o.get(b)&&(o=o.insert(b,Dn.newInvalidDocument(b)))});let d=Rf();return o.forEach((m,E)=>{const b=u.get(m);void 0!==b&&Pg(b.mutation,E,Ui.empty(),An.now()),Af(t,E)&&(d=d.insert(m,E))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ie.resolve(Dn.newInvalidDocument(t))}}class gv{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return ie.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Er(r.createTime)}),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:av(r.bundledQuery),readTime:Er(r.readTime)}),ie.resolve();var r}}class kD{constructor(){this.overlays=new kn(Ge.comparator),this.Xn=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ra();return ie.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ie(e,t,u)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Xn.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Xn.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const o=ra(),u=t.length+1,d=new Ge(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const E=m.getNext().value,b=E.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&E.largestBatchId>r&&o.set(E.getKey(),E)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new kn((b,S)=>b-S);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=ra(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const m=ra(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((b,S)=>m.set(b,S)),!(m.size()>=o)););return ie.resolve(m)}ie(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.Xn.get(o.largestBatchId).delete(r.key);this.Xn.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new ov(t,r));let u=this.Xn.get(t);void 0===u&&(u=bt(),this.Xn.set(t,u)),this.Xn.set(t,u.add(r.key))}}class eh{constructor(){this.Zn=new Xt(ur.ts),this.es=new Xt(ur.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new ur(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new ur(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Ge(new Jt([])),r=new ur(t,e),o=new ur(t,e+1),u=[];return this.es.forEachInRange([r,o],d=>{this.rs(d),u.push(d.key)}),u}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Ge(new Jt([])),r=new ur(t,e),o=new ur(t,e+1);let u=bt();return this.es.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new ur(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ur{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Ge.comparator(e.key,t.key)||Tt(e.ls,t.ls)}static ns(e,t){return Tt(e.ls,t.ls)||Ge.comparator(e.key,t.key)}}class mv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Xt(ur.ts)}checkEmpty(e){return ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.fs;this.fs++;const d=new Gg(u,t,r,o);this.mutationQueue.push(d);for(const m of o)this.ds=this.ds.add(new ur(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ie.resolve(d)}lookupMutationBatch(e,t){return ie.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ws(t+1),u=o<0?0:o;return ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ur(t,0),o=new ur(t,Number.POSITIVE_INFINITY),u=[];return this.ds.forEachInRange([r,o],d=>{const m=this._s(d.ls);u.push(m)}),ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xt(Tt);return t.forEach(o=>{const u=new ur(o,0),d=new ur(o,Number.POSITIVE_INFINITY);this.ds.forEachInRange([u,d],m=>{r=r.add(m.ls)})}),ie.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const d=new ur(new Ge(u),0);let m=new Xt(Tt);return this.ds.forEachWhile(E=>{const b=E.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(m=m.add(E.ls)),!0)},d),ie.resolve(this.gs(m))}gs(e){const t=[];return e.forEach(r=>{const o=this._s(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){vt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return ie.forEach(t.mutations,o=>{const u=new ur(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new ur(t,0),o=this.ds.firstAfterOrEqual(r);return ie.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ie.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class PD{constructor(e){this.ps=e,this.docs=new kn(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():Dn.newInvalidDocument(t))}getEntries(e,t){let r=ar();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Dn.newInvalidDocument(o))}),ie.resolve(r)}getAllFromCollection(e,t,r){let o=ar();const u=new Ge(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:E}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Dy(S0(E),r)<=0||(o=o.insert(E.key,E.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,t,r,o){nt()}Is(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yv(this)}getSize(e){return ie.resolve(this.size)}}class yv extends dv{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.zn.addEntry(e,o)):this.zn.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class vv{constructor(e){this.persistence=e,this.Ts=new na(t=>hc(t),jd),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.Es=0,this.As=new eh,this.targetCount=0,this.Rs=js.An()}forEachTarget(e,t){return this.Ts.forEach((r,o)=>t(o)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),ie.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new js(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.vn(t),ie.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Ts.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Ts.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ie.waitFor(u).next(()=>o)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),ie.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.As.containsKey(t))}}class _v{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Di(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new vv(this),this.indexManager=new RD,this.remoteDocumentCache=new PD(r=>this.referenceDelegate.Ss(r)),this.wt=new lw(t),this.Ds=new gv(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new mv(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const o=new ww(this.Ps.next());return this.referenceDelegate.Cs(),r(o).next(u=>this.referenceDelegate.xs(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ns(e,t){return ie.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class ww extends by{constructor(e){super(),this.currentSequenceNumber=e}}class th{constructor(e){this.persistence=e,this.ks=new eh,this.Os=null}static Ms(e){return new th(e)}get Fs(){if(this.Os)return this.Os;throw nt()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),ie.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(o=>this.Fs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Fs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Fs,r=>{const o=Ge.fromPath(r);return this.$s(e,o).next(u=>{u||t.removeEntry(o,_t.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return ie.or([()=>ie.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class Ew{constructor(e){this.wt=e}O(e,t,r,o){const u=new mg("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ff,{unique:!0}),m.createObjectStore("documentMutations"),wv(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=ie.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),wv(e)),d=d.next(()=>function(m){const E=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,E){return E.store("mutations").K().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ff,{unique:!0});const S=E.store("mutations"),N=b.map(H=>S.put(H));return ie.waitFor(N)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Bs(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(u)))),r<7&&o>=7&&(d=d.next(()=>this.Us(u))),r<8&&o>=8&&(d=d.next(()=>this.qs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Ks(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const E=m.createObjectStore("documentOverlays",{keyPath:ow});E.createIndex("collectionPathOverlayIndex",su,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",jg,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const E=m.createObjectStore("remoteDocumentsV14",{keyPath:rv});E.createIndex("documentKeyIndex",tw),E.createIndex("collectionGroupIndex",zT)}(e)).next(()=>this.Gs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.Qs(e,u))),r<15&&o>=15&&(d=d.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:nw}).createIndex("sequenceNumberIndex",rw,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:iw}).createIndex("documentKeyIndex",sw,{unique:!1})}(e))),d}Ls(e){let t=0;return e.store("remoteDocuments").J((r,o)=>{t+=Dr(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(o=>ie.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",d).next(m=>ie.forEach(m,E=>{vt(E.userId===u.userId);const b=Zd(this.wt,E);return Yd(e,u.userId,b).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.J((d,m)=>{const E=new Jt(d),b=[0,Ci(E)];u.push(t.get(b).next(S=>S?ie.resolve():t.put({targetId:0,path:Ci(E),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ie.waitFor(u))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:wD});const r=t.store("collectionParents"),o=new cv,u=d=>{if(o.add(d)){const m=d.lastSegment(),E=d.popLast();return r.put({collectionId:m,parent:Ci(E)})}};return t.store("remoteDocuments").J({H:!0},(d,m)=>{const E=new Jt(d);return u(E.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([d,m,E],b)=>{const S=aa(m);return u(S.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,o)=>{const u=zg(o),d=dw(this.wt,u);return t.put(d)})}Gs(e,t){const r=t.store("remoteDocuments"),o=[];return r.J((u,d)=>{const m=t.store("remoteDocumentsV14"),E=(b=d,b.document?new Ge(Jt.fromString(b.document.name).popFirst(5)):b.noDocument?Ge.fromSegments(b.noDocument.path):b.unknownDocument?Ge.fromSegments(b.unknownDocument.path):nt()).path.toArray();var b;const S={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(S))}).next(()=>ie.waitFor(o))}Qs(e,t){const r=t.store("mutations"),o=hv(this.wt),u=new _v(th.Ms,this.wt.ne);return r.K().next(d=>{const m=new Map;return d.forEach(E=>{var b;let S=null!==(b=m.get(E.userId))&&void 0!==b?b:bt();Zd(this.wt,E).keys().forEach(N=>S=S.add(N)),m.set(E.userId,S)}),ie.forEach(m,(E,b)=>{const S=new Br(b),N=Vf.se(this.wt,S),H=u.getIndexManager(S),Z=ua.se(S,this.wt,H,u.referenceDelegate);return new Kg(o,Z,N,H).recalculateAndSaveOverlaysForDocumentKeys(new Hg(t,Di.ot),E).next()})})}}function wv(n){n.createObjectStore("targetDocuments",{keyPath:iv}).createIndex("documentTargetsIndex",qT,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",WT,{unique:!0}),n.createObjectStore("targetGlobal")}const Hf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Yg{constructor(e,t,r,o,u,d,m,E,b,S,N=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=u,this.window=d,this.document=m,this.Ws=b,this.zs=S,this.Hs=N,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=H=>Promise.resolve(),!Yg.V())throw new Me(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mw(this,o),this.ei=t+"main",this.wt=new lw(E),this.ni=new Us(this.ei,this.Hs,new Ew(this.wt)),this.Vs=new Qd(this.referenceDelegate,this.wt),this.remoteDocumentCache=hv(this.wt),this.Ds=new co,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===S&&gr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(ce.FAILED_PRECONDITION,Hf);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Di(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,pe.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(rl(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Gf(e).get("owner").next(t=>ie.resolve(this.di(t)))}_i(e){return zf(e).delete(this.clientId)}wi(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Ir(r,"clientMetadata");return o.K().next(u=>{const d=e.gi(u,18e5),m=u.filter(E=>-1===d.indexOf(E));return ie.forEach(m,E=>o.delete(E.clientId)).next(()=>m)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?ie.resolve(!0):Gf(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Me(ce.FAILED_PRECONDITION,Hf);return!1}}return!(!this.networkEnabled||!this.inForeground)||zf(e).K().next(r=>void 0===this.gi(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Hg(t,Di.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>zf(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return ua.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Dc(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Vf.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.Hs)?uw:14===d?$g:13===d?ID:12===d?ED:11===d?aw:void nt();var d;let m;return this.ni.runTransaction(e,o,u,E=>(m=new Hg(E,this.Ps?this.Ps.next():Di.ot),"readwrite-primary"===t?this.ai(m).next(b=>!!b||this.hi(m)).next(b=>{if(!b)throw gr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Me(ce.FAILED_PRECONDITION,Ct);return r(m)}).next(b=>this.fi(m).next(()=>b)):this.bi(m).next(()=>r(m)))).then(E=>(m.raiseOnCommittedEvent(),E))}bi(e){return Gf(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(ce.FAILED_PRECONDITION,Hf)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gf(e).put("owner",t)}static V(){return Us.V()}li(e){const t=Gf(e);return t.get("owner").next(r=>this.di(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ie.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(gr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,xt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){gr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gf(n){return Ir(n,"owner")}function zf(n){return Ir(n,"clientMetadata")}function Qg(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Wf{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=o}static Vi(e,t){let r=bt(),o=bt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Wf(e,t.fromCache,r,o)}}class Ev{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ci(e,t).next(u=>u||this.xi(e,t,o,r)).next(u=>u||this.Ni(e,t))}Ci(e,t){return ie.resolve(null)}xi(e,t,r,o){return function U0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(_t.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(u=>{const d=this.ki(t,u);return this.Oi(t,d,r,o)?this.Ni(e,t):(Xa()<=ri.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Py(t)),this.Mi(e,d,t,Iy(o,-1)))})}ki(e,t){let r=new Xt(Ag(e));return t.forEach((o,u)=>{Af(e,u)&&(r=r.add(u))}),r}Oi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ni(e,t){return Xa()<=ri.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Py(t)),this.Di.getDocumentsMatchingQuery(e,t,ss.min())}Mi(e,t,r,o){return this.Di.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class FD{constructor(e,t,r,o){this.persistence=e,this.Fi=t,this.wt=o,this.$i=new kn(Tt),this.Bi=new na(u=>hc(u),jd),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Kg(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function Iw(n,e,t,r){return new FD(n,e,t,r)}function Dw(n,e){return qf.apply(this,arguments)}function qf(){return qf=(0,pe.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let E=bt();for(const b of o){d.push(b.batchId);for(const S of b.mutations)E=E.add(S.key)}for(const b of u){m.push(b.batchId);for(const S of b.mutations)E=E.add(S.key)}return t.localDocuments.getDocuments(r,E).next(b=>({Ki:b,removedBatchIds:d,addedBatchIds:m}))})})}),qf.apply(this,arguments)}function Jg(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Ui.newChangeBuffer({trackRemovals:!0});return function(d,m,E,b){const S=E.batch,N=S.keys();let H=ie.resolve();return N.forEach(Z=>{H=H.next(()=>b.getEntry(m,Z)).next(fe=>{const Fe=E.docVersions.get(Z);vt(null!==Fe),fe.version.compareTo(Fe)<0&&(S.applyToRemoteDocument(fe,E),fe.isValidDocument()&&(fe.setReadTime(E.commitVersion),b.addEntry(fe)))})}),H.next(()=>d.mutationQueue.removeMutationBatch(m,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=bt();for(let E=0;E<d.mutationResults.length;++E)d.mutationResults[E].transformResults.length>0&&(m=m.add(d.batch.mutations[E].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function Iv(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function bw(n,e){const t=Ze(n),r=e.snapshotVersion;let o=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Ui.newChangeBuffer({trackRemovals:!0});o=t.$i;const m=[];e.targetChanges.forEach((S,N)=>{const H=o.get(N);if(!H)return;m.push(t.Vs.removeMatchingKeys(u,S.removedDocuments,N).next(()=>t.Vs.addMatchingKeys(u,S.addedDocuments,N)));let Z=H.withSequenceNumber(u.currentSequenceNumber);var fe,Fe,Ye;e.targetMismatches.has(N)?Z=Z.withResumeToken(Jn.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):S.resumeToken.approximateByteSize()>0&&(Z=Z.withResumeToken(S.resumeToken,r)),o=o.insert(N,Z),Fe=Z,Ye=S,(0===(fe=H).resumeToken.approximateByteSize()||Fe.snapshotVersion.toMicroseconds()-fe.snapshotVersion.toMicroseconds()>=3e8||Ye.addedDocuments.size+Ye.modifiedDocuments.size+Ye.removedDocuments.size>0)&&m.push(t.Vs.updateTargetData(u,Z))});let E=ar(),b=bt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),m.push(Dv(u,d,e.documentUpdates).next(S=>{E=S.Gi,b=S.Qi})),!r.isEqual(_t.min())){const S=t.Vs.getLastRemoteSnapshotVersion(u).next(N=>t.Vs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(S)}return ie.waitFor(m).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,E,b)).next(()=>E)}).then(u=>(t.$i=o,u))}function Dv(n,e,t){let r=bt(),o=bt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=ar();return t.forEach((m,E)=>{const b=u.get(m);E.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),E.isNoDocument()&&E.version.isEqual(_t.min())?(e.removeEntry(m,E.readTime),d=d.insert(m,E)):!b.isValidDocument()||E.version.compareTo(b.version)>0||0===E.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(E),d=d.insert(m,E)):Re("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",E.version)}),{Gi:d,Qi:o}})}function Cw(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ac(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Vs.getTargetData(r,e).next(u=>u?(o=u,ie.resolve(o)):t.Vs.allocateTargetId(r).next(d=>(o=new cl(e,d,0,r.currentSequenceNumber),t.Vs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.$i.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function Sc(n,e,t){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,pe.Z)(function*(n,e,t){const r=Ze(n),o=r.$i.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!rl(d))throw d;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.$i=r.$i.remove(e),r.Bi.delete(o.target)}),Xg.apply(this,arguments)}function Zf(n,e,t){const r=Ze(n);let o=_t.min(),u=bt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,E,b){const S=Ze(m),N=S.Bi.get(b);return void 0!==N?ie.resolve(S.$i.get(N)):S.Vs.getTargetData(E,b)}(r,d,os(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(d,m.targetId).next(E=>{u=E})}).next(()=>r.Fi.getDocumentsMatchingQuery(d,e,t?o:_t.min(),t?u:bt())).next(m=>(Aw(r,ea(e),m),{documents:m,ji:u})))}function LD(n,e){const t=Ze(n),r=Ze(t.Vs),o=t.$i.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.te(u,e).next(d=>d?d.target:null))}function Tw(n,e){const t=Ze(n),r=t.Li.get(e)||_t.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Ui.getAllFromCollectionGroup(o,e,Iy(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Aw(t,e,o),o))}function Aw(n,e,t){let r=_t.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Li.set(e,r)}function bv(){return bv=(0,pe.Z)(function*(n,e,t,r){const o=Ze(n);let u=bt(),d=ar();for(const b of t){const S=e.Wi(b.metadata.name);b.document&&(u=u.add(S));const N=e.zi(b);N.setReadTime(e.Hi(b.metadata.readTime)),d=d.insert(S,N)}const m=o.Ui.newChangeBuffer({trackRemovals:!0}),E=yield Ac(o,(b=r,os(bf(Jt.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>Dv(b,m,d).next(S=>(m.apply(b),S)).next(S=>o.Vs.removeMatchingKeysForTargetId(b,E.targetId).next(()=>o.Vs.addMatchingKeys(b,u,E.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,S.Gi,S.Qi)).next(()=>S.Gi)))}),bv.apply(this,arguments)}function Cr(n,e){return em.apply(this,arguments)}function em(){return em=(0,pe.Z)(function*(n,e,t=bt()){const r=yield Ac(n,os(av(e.bundledQuery))),o=Ze(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=Er(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ds.saveNamedQuery(u,e);const m=r.withResumeToken(Jn.EMPTY_BYTE_STRING,d);return o.$i=o.$i.insert(m.targetId,m),o.Vs.updateTargetData(u,m).next(()=>o.Vs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Vs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ds.saveNamedQuery(u,e))})}),em.apply(this,arguments)}function xw(n,e){return`firestore_clients_${n}_${e}`}function Mw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function tm(n,e){return`firestore_targets_${n}_${e}`}class nm{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Me(o.error.code,o.error.message))),d?new nm(e,t,o.state,u):(gr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Me(r.error.code,r.error.message))),u?new nh(e,r.state,o):(gr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=ru();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=N0(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new Kf(e,u):(gr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class pl{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new pl(t.clientId,t.onlineState):(gr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Cv{constructor(){this.activeTargetIds=ru()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tv{constructor(e,t,r,o,u){this.window=e,this.js=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new kn(Tt),this.started=!1,this.ir=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=xw(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Cv),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.Ri();for(const o of t){if(o===e.tr)continue;const u=e.getItem(xw(e.persistenceKey,o));if(u){const d=Kf.Ji(o,u);d&&(e.sr=e.sr.insert(d.clientId,d))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(tm(this.persistenceKey,e));if(r){const o=nh.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tm(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void gr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(u){let d=Di.ot;if(null!=u)try{const m=JSON.parse(u);vt("number"==typeof m),d=m}catch(m){gr("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==Di.ot&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new nm(this.currentUser,e,t,r),u=Mw(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Yi())}pr(e){const t=Mw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=tm(this.persistenceKey,e),u=new nh(e,t,r);this.setItem(o,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Kf.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),o=Number(r[1]);return nm.Ji(new Br(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return nh.Ji(o,t)}wr(e){return pl.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),u=this.gr(r),d=[],m=[];return u.forEach(E=>{o.has(E)||d.push(E)}),o.forEach(E=>{u.has(E)||m.push(E)}),this.syncEngine.Mr(d,m).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=ru();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Av{constructor(){this.Fr=new Cv,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Cv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class VD{Br(e){}shutdown(){}}class Sv{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ZT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Rw{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class xv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,u){const d=this.oo(e,t);Re("RestConnection","Sending: ",d,r);const m={};return this.uo(m,o,u),this.co(e,d,m,r).then(E=>(Re("RestConnection","Received: ",E),E),E=>{throw Od("RestConnection",`${e} failed with error: `,E,"url: ",d,"request:",r),E})}ao(e,t,r,o,u,d){return this.ro(e,t,r,o,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+uc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}oo(e,t){return`${this.so}/v1/${t}:${ZT[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((u,d)=>{const m=new yy;m.listenOnce(UI.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case py.NO_ERROR:const b=m.getResponseJson();Re("Connection","XHR received:",JSON.stringify(b)),u(b);break;case py.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),d(new Me(ce.DEADLINE_EXCEEDED,"Request time out"));break;case py.HTTP_ERROR:const S=m.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',S,"response text:",m.getResponseText()),S>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const H=function(Z){const fe=Z.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(fe)>=0?fe:ce.UNKNOWN}(N.status);d(new Me(H,N.message))}else d(new Me(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Me(ce.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);m.send(t,"POST",E,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=LI(),d=VI(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new my({})),this.uo(m.initMessageHeaders,t,r),(0,xt.uI)()||(0,xt.b$)()||(0,xt.d)()||(0,xt.w1)()||(0,xt.Mn)()||(0,xt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");Re("Connection","Creating WebChannel: "+E,m);const b=u.createWebChannel(E,m);let S=!1,N=!1;const H=new Rw({jr:fe=>{N?Re("Connection","Not sending because WebChannel is closed:",fe):(S||(Re("Connection","Opening WebChannel transport."),b.open(),S=!0),Re("Connection","WebChannel sending:",fe),b.send(fe))},Wr:()=>b.close()}),Z=(fe,Fe,Ye)=>{fe.listen(Fe,At=>{try{Ye(At)}catch(Pt){setTimeout(()=>{throw Pt},0)}})};return Z(b,df.EventType.OPEN,()=>{N||Re("Connection","WebChannel transport opened.")}),Z(b,df.EventType.CLOSE,()=>{N||(N=!0,Re("Connection","WebChannel transport closed"),H.eo())}),Z(b,df.EventType.ERROR,fe=>{N||(N=!0,Od("Connection","WebChannel transport errored:",fe),H.eo(new Me(ce.UNAVAILABLE,"The operation could not be completed")))}),Z(b,df.EventType.MESSAGE,fe=>{var Fe;if(!N){const Ye=fe.data[0];vt(!!Ye);const At=Ye,Pt=At.error||(null===(Fe=At[0])||void 0===Fe?void 0:Fe.error);if(Pt){Re("Connection","WebChannel received error:",Pt);const Zt=Pt.status;let Mt=function(fn){const $i=mr[fn];if(void 0!==$i)return By($i)}(Zt),Gt=Pt.message;void 0===Mt&&(Mt=ce.INTERNAL,Gt="Unknown error status: "+Zt+" with message "+Pt.message),N=!0,H.eo(new Me(Mt,Gt)),b.close()}else Re("Connection","WebChannel received:",Ye),H.no(Ye)}}),Z(d,BI.STAT_EVENT,fe=>{fe.stat===gy.PROXY?Re("Connection","Detected buffering proxy"):fe.stat===gy.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.Zr()},0),H}}function fo(){return typeof window<"u"?window:null}function rm(){return typeof document<"u"?document:null}function Yf(n){return new HT(n,!0)}class $s{constructor(e,t,r=1e3,o=1.5,u=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=o,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Hs{constructor(e,t,r,o,u,d,m,E){this.js=e,this.Ao=r,this.Ro=o,this.bo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=E,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new $s(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,pe.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,pe.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(gr(t.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new Me(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,pe.Z)(function*(){e.state=0,e.start()}))}qo(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class po extends Hs{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.wt=u}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function vD(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:nt(),o=e.targetChange.targetIds||[],u=function(E,b){return E.dt?(vt(void 0===b||"string"==typeof b),Jn.fromBase64String(b||"")):(vt(void 0===b||b instanceof Uint8Array),Jn.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(E){const b=void 0===E.code?ce.UNKNOWN:By(E.code);return new Me(b,E.message||"")}(d);t=new zy(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=sa(n,r.document.name),u=Er(r.document.updateTime),d=new zr({mapValue:{fields:r.document.fields}}),m=Dn.newFoundDocument(o,u,d);t=new Vg(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=sa(n,r.document),u=r.readTime?Er(r.readTime):_t.min(),d=Dn.newNoDocument(o,u);t=new Vg([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=sa(n,r.document);t=new Vg([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return nt();{const r=e.filter,u=new Uy(r.count||0);t=new Gy(r.targetId,u)}}var E;return t}(this.wt,e),r=function(o){if(!("targetChange"in o))return _t.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?_t.min():u.readTime?Er(u.readTime):_t.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=Pf(this.wt),t.addTarget=function(o,u){let d;const m=u.target;return d=bg(m)?{documents:q0(o,m)}:{query:Z0(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=Zy(o,u.resumeToken):u.snapshotVersion.compareTo(_t.min())>0&&(d.readTime=Hd(o,u.snapshotVersion.toTimestamp())),d}(this.wt,e);const r=function K0(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=Pf(this.wt),t.removeTarget=e,this.Mo(t)}}class Nw extends Hs{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.wt=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(vt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function W0(n,e){return n&&n.length>0?(vt(void 0!==e),n.map(t=>function(r,o){let u=Er(r.updateTime?r.updateTime:o);return u.isEqual(_t.min())&&(u=Er(o)),new BT(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Er(e.commitTime);return this.listener.Jo(r,t)}return vt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Pf(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Gd(this.wt,r))};this.Mo(t)}}class Ow extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=o,this.Zo=!1}tu(){if(this.Zo)throw new Me(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ro(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(ce.UNKNOWN,o.toString())})}ao(e,t,r,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.ao(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Me(ce.UNKNOWN,u.toString())})}terminate(){this.Zo=!0}}class UD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(gr(t),this.su=!1):Re("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class BD{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(m=>{r.enqueueAndForget((0,pe.Z)(function*(){var E;ml(d)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,pe.Z)(function*(b){const S=Ze(b);S.lu.add(4),yield gl(S),S._u.set("Unknown"),S.lu.delete(4),yield Qf(S)}),function(b){return E.apply(this,arguments)})(d))}))}),this._u=new UD(r,o)}}function Qf(n){return Mv.apply(this,arguments)}function Mv(){return Mv=(0,pe.Z)(function*(n){if(ml(n))for(const e of n.fu)yield e(!0)}),Mv.apply(this,arguments)}function gl(n){return xc.apply(this,arguments)}function xc(){return xc=(0,pe.Z)(function*(n){for(const e of n.fu)yield e(!1)}),xc.apply(this,arguments)}function im(n,e){const t=Ze(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),ih(t)?sm(t):sh(t).Co()&&Rv(t,e))}function rh(n,e){const t=Ze(n),r=sh(t);t.hu.delete(e),r.Co()&&Nv(t,e),0===t.hu.size&&(r.Co()?r.ko():ml(t)&&t._u.set("Unknown"))}function Rv(n,e){n.wu.Nt(e.targetId),sh(n).Qo(e)}function Nv(n,e){n.wu.Nt(e),sh(n).jo(e)}function sm(n){n.wu=new Wy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),sh(n).start(),n._u.iu()}function ih(n){return ml(n)&&!sh(n).Do()&&n.hu.size>0}function ml(n){return 0===Ze(n).lu.size}function Ov(n){n.wu=void 0}function kw(n){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,pe.Z)(function*(n){n.hu.forEach((e,t)=>{Rv(n,e)})}),Jf.apply(this,arguments)}function om(n,e){return am.apply(this,arguments)}function am(){return am=(0,pe.Z)(function*(n,e){Ov(n),ih(n)?(n._u.uu(e),sm(n)):n._u.set("Unknown")}),am.apply(this,arguments)}function Pw(n,e,t){return um.apply(this,arguments)}function um(){return um=(0,pe.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof zy&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o.hu.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.hu.delete(m),o.wu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Xf(n,r)}else if(e instanceof Vg?n.wu.Ut(e):e instanceof Gy?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(_t.min()))try{const r=yield Iv(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.wu.Yt(u);return d.targetChanges.forEach((m,E)=>{if(m.resumeToken.approximateByteSize()>0){const b=o.hu.get(E);b&&o.hu.set(E,b.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const E=o.hu.get(m);if(!E)return;o.hu.set(m,E.withResumeToken(Jn.EMPTY_BYTE_STRING,E.snapshotVersion)),Nv(o,m);const b=new cl(E.target,m,1,E.sequenceNumber);Rv(o,b)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield Xf(n,r)}var r}),um.apply(this,arguments)}function Xf(n,e,t){return lm.apply(this,arguments)}function lm(){return lm=(0,pe.Z)(function*(n,e,t){if(!rl(e))throw e;n.lu.add(1),yield gl(n),n._u.set("Offline"),t||(t=()=>Iv(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Qf(n)}))}),lm.apply(this,arguments)}function kv(n,e){return e().catch(t=>Xf(n,t,e))}function Mc(n){return cm.apply(this,arguments)}function cm(){return cm=(0,pe.Z)(function*(n){const e=Ze(n),t=yl(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;jD(e);)try{const o=yield Cw(e.localStore,r);if(null===o){0===e.au.length&&t.ko();break}r=o.batchId,$D(e,o)}catch(o){yield Xf(e,o)}Fw(e)&&Lw(e)}),cm.apply(this,arguments)}function jD(n){return ml(n)&&n.au.length<10}function $D(n,e){n.au.push(e);const t=yl(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function Fw(n){return ml(n)&&!yl(n).Do()&&n.au.length>0}function Lw(n){yl(n).start()}function HD(n){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,pe.Z)(function*(n){yl(n).Xo()}),Pv.apply(this,arguments)}function GD(n){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,pe.Z)(function*(n){const e=yl(n);for(const t of n.au)e.Ho(t.mutations)}),Fv.apply(this,arguments)}function zD(n,e,t){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,pe.Z)(function*(n,e,t){const r=n.au.shift(),o=sv.from(r,e,t);yield kv(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Mc(n)}),Lv.apply(this,arguments)}function WD(n,e){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,pe.Z)(function*(n,e){var t;e&&yl(n).zo&&(yield(t=(0,pe.Z)(function*(r,o){if(Fg(u=o.code)&&u!==ce.ABORTED){const d=r.au.shift();yl(r).No(),yield kv(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Mc(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),Fw(n)&&Lw(n)}),Vv.apply(this,arguments)}function Vw(n,e){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,pe.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=ml(t);t.lu.add(3),yield gl(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Qf(t)}),Uv.apply(this,arguments)}function Bv(n,e){return jv.apply(this,arguments)}function jv(){return jv=(0,pe.Z)(function*(n,e){const t=Ze(n);e?(t.lu.delete(2),yield Qf(t)):e||(t.lu.add(2),yield gl(t),t._u.set("Unknown"))}),jv.apply(this,arguments)}function sh(n){return n.mu||(n.mu=function(e,t,r){const o=Ze(e);return o.tu(),new po(t,o.bo,o.authCredentials,o.appCheckCredentials,o.wt,r)}(n.datastore,n.asyncQueue,{zr:kw.bind(null,n),Jr:om.bind(null,n),Go:Pw.bind(null,n)}),n.fu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.mu.No(),ih(n)?sm(n):n._u.set("Unknown")):(yield n.mu.stop(),Ov(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function yl(n){return n.gu||(n.gu=function(e,t,r){const o=Ze(e);return o.tu(),new Nw(t,o.bo,o.authCredentials,o.appCheckCredentials,o.wt,r)}(n.datastore,n.asyncQueue,{zr:HD.bind(null,n),Jr:WD.bind(null,n),Yo:GD.bind(null,n),Jo:zD.bind(null,n)}),n.fu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.gu.No(),yield Mc(n)):(yield n.gu.stop(),n.au.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class dm{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new dm(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rc(n,e){if(gr("AsyncQueue",`${e}: ${n}`),rl(n))return new Me(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Nc{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Rf(),this.sortedSet=new kn(this.comparator)}static emptySet(e){return new Nc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Nc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Nc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class $v{constructor(){this.yu=new kn(Ge.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):nt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Oc{constructor(e,t,r,o,u,d,m,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Oc(e,t,Nc.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class Uw{constructor(){this.Iu=void 0,this.listeners=[]}}class Bw{constructor(){this.queries=new na(e=>ky(e),bi),this.onlineState="Unknown",this.Tu=new Set}}function hm(n,e){return fm.apply(this,arguments)}function fm(){return fm=(0,pe.Z)(function*(n,e){const t=Ze(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new Uw),o)try{u.Iu=yield t.onListen(r)}catch(d){const m=Rc(d,`Initialization of query '${Py(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&Hv(t)}),fm.apply(this,arguments)}function pm(n,e){return gm.apply(this,arguments)}function gm(){return gm=(0,pe.Z)(function*(n,e){const t=Ze(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),gm.apply(this,arguments)}function kc(n,e){const t=Ze(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Au(o)&&(r=!0);d.Iu=o}}r&&Hv(t)}function qD(n,e,t){const r=Ze(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function Hv(n){n.Tu.forEach(e=>{e.next()})}class vl{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Oc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Oc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class KT{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class mm{constructor(e){this.wt=e}Wi(e){return sa(this.wt,e)}zi(e){return e.metadata.exists?z0(this.wt,e.document,!1):Dn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Er(e)}}class YT{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Gv(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Jt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new mm(this.wt);for(const o of e)if(o.metadata.queries){const u=r.Wi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||bt()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function Sw(n,e,t,r){return bv.apply(this,arguments)}(e.localStore,new mm(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield Cr(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function Gv(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class zv{constructor(e){this.key=e}}class ZD{constructor(e){this.key=e}}class ht{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=bt(),this.mutatedKeys=bt(),this.Lu=Ag(e),this.Uu=new Nc(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new $v,o=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const E="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,N)=>{const H=o.get(S),Z=Af(this.query,N)?N:null,fe=!!H&&this.mutatedKeys.has(H.key),Fe=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Ye=!1;H&&Z?H.data.isEqual(Z.data)?fe!==Fe&&(r.track({type:3,doc:Z}),Ye=!0):this.Qu(H,Z)||(r.track({type:2,doc:Z}),Ye=!0,(E&&this.Lu(Z,E)>0||b&&this.Lu(Z,b)<0)&&(m=!0)):!H&&Z?(r.track({type:0,doc:Z}),Ye=!0):H&&!Z&&(r.track({type:1,doc:H}),Ye=!0,(E||b)&&(m=!0)),Ye&&(Z?(d=d.add(Z),u=Fe?u.add(S):u.delete(S)):(d=d.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const S="F"===this.query.limitType?d.last():d.first();d=d.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Uu:d,Gu:r,Oi:m,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Gu.pu();u.sort((b,S)=>function(N,H){const Z=fe=>{switch(fe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return Z(N)-Z(H)}(b.type,S.type)||this.Lu(b.doc,S.doc)),this.ju(r);const d=t?this.Wu():[],m=0===this.Bu.size&&this.current?1:0,E=m!==this.$u;return this.$u=m,0!==u.length||E?{snapshot:new Oc(this.query,e.Uu,o,u,e.mutatedKeys,0===m,E,!1),zu:d}:{zu:d}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new $v,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=bt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new ZD(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new zv(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=bt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Oc.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class KD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class YD{constructor(e){this.key=e,this.Xu=!1}}class QD{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Zu={},this.tc=new na(m=>ky(m),bi),this.ec=new Map,this.nc=new Set,this.sc=new kn(Ge.comparator),this.ic=new Map,this.rc=new eh,this.oc={},this.uc=new Map,this.cc=js.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function oh(n,e){return Wv.apply(this,arguments)}function Wv(){return Wv=(0,pe.Z)(function*(n,e){const t=r_(n);let r,o;const u=t.tc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Yu();else{const d=yield Ac(t.localStore,os(e));t.isPrimaryClient&&im(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield ah(t,e,r,"current"===m)}return o}),Wv.apply(this,arguments)}function ah(n,e,t,r){return uh.apply(this,arguments)}function uh(){return uh=(0,pe.Z)(function*(n,e,t,r){n.hc=(S,N,H)=>{return(Z=(0,pe.Z)(function*(fe,Fe,Ye,At){let Pt=Fe.view.Ku(Ye);Pt.Oi&&(Pt=yield Zf(fe.localStore,Fe.query,!1).then(({documents:Gt})=>Fe.view.Ku(Gt,Pt)));const Zt=At&&At.targetChanges.get(Fe.targetId),Mt=Fe.view.applyChanges(Pt,fe.isPrimaryClient,Zt);return wm(fe,Fe.targetId,Mt.zu),Mt.snapshot}),function(fe,Fe,Ye,At){return Z.apply(this,arguments)})(n,S,N,H);var Z};const o=yield Zf(n.localStore,e,!0),u=new ht(e,o.ji),d=u.Ku(o.documents),m=ia.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=u.applyChanges(d,n.isPrimaryClient,m);wm(n,t,E.zu);const b=new KD(e,t,u);return n.tc.set(e,b),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),E.snapshot}),uh.apply(this,arguments)}function Xn(n,e){return jw.apply(this,arguments)}function jw(){return jw=(0,pe.Z)(function*(n,e){const t=Ze(n),r=t.tc.get(e),o=t.ec.get(r.targetId);if(o.length>1)return t.ec.set(r.targetId,o.filter(u=>!bi(u,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Sc(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),rh(t.remoteStore,r.targetId),Fc(t,r.targetId)}).catch(eu))):(Fc(t,r.targetId),yield Sc(t.localStore,r.targetId,!0))}),jw.apply(this,arguments)}function ym(){return ym=(0,pe.Z)(function*(n,e,t){const r=i_(n);try{const o=yield function(u,d){const m=Ze(u),E=An.now(),b=d.reduce((H,Z)=>H.add(Z.key),bt());let S,N;return m.persistence.runTransaction("Locally write mutations","readwrite",H=>{let Z=ar(),fe=bt();return m.Ui.getEntries(H,b).next(Fe=>{Z=Fe,Z.forEach((Ye,At)=>{At.isValidDocument()||(fe=fe.add(Ye))})}).next(()=>m.localDocuments.getOverlayedDocuments(H,Z)).next(Fe=>{S=Fe;const Ye=[];for(const At of d){const Pt=$T(At,S.get(At.key).overlayedDocument);null!=Pt&&Ye.push(new ll(At.key,Pt,Sy(Pt.value.mapValue),Fn.exists(!0)))}return m.mutationQueue.addMutationBatch(H,E,Ye,d)}).next(Fe=>{N=Fe;const Ye=Fe.applyToLocalDocumentSet(S,fe);return m.documentOverlayCache.saveOverlays(H,Fe.batchId,Ye)})}).then(()=>({batchId:N.batchId,changes:Lg(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let E=u.oc[u.currentUser.toKey()];E||(E=new kn(Tt)),E=E.insert(d,m),u.oc[u.currentUser.toKey()]=E}(r,o.batchId,t),yield us(r,o.changes),yield Mc(r.remoteStore)}catch(o){const u=Rc(o,"Failed to persist write");t.reject(u)}}),ym.apply(this,arguments)}function Hw(n,e){return vm.apply(this,arguments)}function vm(){return vm=(0,pe.Z)(function*(n,e){const t=Ze(n);try{const r=yield bw(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.ic.get(u);d&&(vt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Xu=!0:o.modifiedDocuments.size>0?vt(d.Xu):o.removedDocuments.size>0&&(vt(d.Xu),d.Xu=!1))}),yield us(t,r,e)}catch(r){yield eu(r)}}),vm.apply(this,arguments)}function qv(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.tc.forEach((u,d)=>{const m=d.view.Eu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=Ze(u);m.onlineState=d;let E=!1;m.queries.forEach((b,S)=>{for(const N of S.listeners)N.Eu(d)&&(E=!0)}),E&&Hv(m)}(r.eventManager,e),o.length&&r.Zu.Go(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Gw(n,e,t){return _m.apply(this,arguments)}function _m(){return _m=(0,pe.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ic.get(e),u=o&&o.key;if(u){let d=new kn(Ge.comparator);d=d.insert(u,Dn.newNoDocument(u,_t.min()));const m=bt().add(u),E=new iu(_t.min(),new Map,new Xt(Tt),d,m);yield Hw(r,E),r.sc=r.sc.remove(u),r.ic.delete(e),Lc(r)}else yield Sc(r.localStore,e,!1).then(()=>Fc(r,e,t)).catch(eu)}),_m.apply(this,arguments)}function JD(n,e){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,pe.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const o=yield Jg(t.localStore,e);lh(t,r,null),Yv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield us(t,o)}catch(o){yield eu(o)}}),Zv.apply(this,arguments)}function XD(n,e,t){return Pc.apply(this,arguments)}function Pc(){return Pc=(0,pe.Z)(function*(n,e,t){const r=Ze(n);try{const o=yield function(u,d){const m=Ze(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let b;return m.mutationQueue.lookupMutationBatch(E,d).next(S=>(vt(null!==S),b=S.keys(),m.mutationQueue.removeMutationBatch(E,S))).next(()=>m.mutationQueue.performConsistencyCheck(E)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(E,b,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,b)).next(()=>m.localDocuments.getDocuments(E,b))})}(r.localStore,e);lh(r,e,t),Yv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield us(r,o)}catch(o){yield eu(o)}}),Pc.apply(this,arguments)}function Kv(){return Kv=(0,pe.Z)(function*(n,e){const t=Ze(n);ml(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Ze(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.uc.get(r)||[];o.push(e),t.uc.set(r,o)}catch(r){const o=Rc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),Kv.apply(this,arguments)}function Yv(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function lh(n,e,t){const r=Ze(n);let o=r.oc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.oc[r.currentUser.toKey()]=o}}function Fc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||Qv(n,r)})}function Qv(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(rh(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),Lc(n))}function wm(n,e,t){for(const r of t)r instanceof zv?(n.rc.addReference(r.key,e),tb(n,r)):r instanceof ZD?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||Qv(n,r.key)):nt()}function tb(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.nc.add(r),Lc(n))}function Lc(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new Ge(Jt.fromString(e)),r=n.cc.next();n.ic.set(r,new YD(t)),n.sc=n.sc.insert(t,r),im(n.remoteStore,new cl(os(bf(t.path)),r,2,Di.ot))}}function us(n,e,t){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,pe.Z)(function*(n,e,t){const r=Ze(n),o=[],u=[],d=[];var m;r.tc.isEmpty()||(r.tc.forEach((m,E)=>{d.push(r.hc(E,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,b.fromCache?"not-current":"current"),o.push(b);const S=Wf.Vi(E.targetId,b);u.push(S)}}))}),yield Promise.all(d),r.Zu.Go(o),yield(m=(0,pe.Z)(function*(E,b){const S=Ze(E);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ie.forEach(b,H=>ie.forEach(H.Pi,Z=>S.persistence.referenceDelegate.addReference(N,H.targetId,Z)).next(()=>ie.forEach(H.vi,Z=>S.persistence.referenceDelegate.removeReference(N,H.targetId,Z)))))}catch(N){if(!rl(N))throw N;Re("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const H=N.targetId;if(!N.fromCache){const Z=S.$i.get(H),Fe=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);S.$i=S.$i.insert(H,Fe)}}}),function(E,b){return m.apply(this,arguments)})(r.localStore,u))}),Jv.apply(this,arguments)}function nb(n,e){return Xv.apply(this,arguments)}function Xv(){return Xv=(0,pe.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield Dw(t.localStore,e);t.currentUser=e,(o=t).uc.forEach(d=>{d.forEach(m=>{m.reject(new Me(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield us(t,r.Ki)}var o}),Xv.apply(this,arguments)}function zw(n,e){const t=Ze(n),r=t.ic.get(e);if(r&&r.Xu)return bt().add(r.key);{let o=bt();const u=t.ec.get(e);if(!u)return o;for(const d of u){const m=t.tc.get(d);o=o.unionWith(m.view.qu)}return o}}function Ww(n,e){return Em.apply(this,arguments)}function Em(){return Em=(0,pe.Z)(function*(n,e){const t=Ze(n),r=yield Zf(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&wm(t,e.targetId,o.zu),o}),Em.apply(this,arguments)}function rb(n,e){return Im.apply(this,arguments)}function Im(){return Im=(0,pe.Z)(function*(n,e){const t=Ze(n);return Tw(t.localStore,e).then(r=>us(t,r))}),Im.apply(this,arguments)}function ib(n,e,t,r){return e_.apply(this,arguments)}function e_(){return e_=(0,pe.Z)(function*(n,e,t,r){const o=Ze(n),u=yield function(d,m){const E=Ze(d),b=Ze(E.mutationQueue);return E.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.yn(S,m).next(N=>N?E.localDocuments.getDocuments(S,N):ie.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Mc(o.remoteStore):"acknowledged"===t||"rejected"===t?(lh(o,e,r||null),Yv(o,e),m=e,Ze(Ze(o.localStore).mutationQueue).In(m)):nt(),yield us(o,u)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),e_.apply(this,arguments)}function qw(){return qw=(0,pe.Z)(function*(n,e){const t=Ze(n);if(r_(t),i_(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield sb(t,r.toArray());t.ac=!0,yield Bv(t.remoteStore,!0);for(const u of o)im(t.remoteStore,u)}else if(!1===e&&!1!==t.ac){const r=[];let o=Promise.resolve();t.ec.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Fc(t,d),Sc(t.localStore,d,!0))),rh(t.remoteStore,d)}),yield o,yield sb(t,r),function(u){const d=Ze(u);d.ic.forEach((m,E)=>{rh(d.remoteStore,E)}),d.rc.cs(),d.ic=new Map,d.sc=new kn(Ge.comparator)}(t),t.ac=!1,yield Bv(t.remoteStore,!1)}}),qw.apply(this,arguments)}function sb(n,e,t){return Zw.apply(this,arguments)}function Zw(){return Zw=(0,pe.Z)(function*(n,e,t){const r=Ze(n),o=[],u=[];for(const d of e){let m;const E=r.ec.get(d);if(E&&0!==E.length){m=yield Ac(r.localStore,os(E[0]));for(const b of E){const S=r.tc.get(b),N=yield Ww(r,S);N.snapshot&&u.push(N.snapshot)}}else{const b=yield LD(r.localStore,d);m=yield Ac(r.localStore,b),yield ah(r,t_(b),d,!1)}o.push(m)}return r.Zu.Go(u),o}),Zw.apply(this,arguments)}function t_(n){return iD(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Dm(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Ri()}function ob(n,e,t,r){return n_.apply(this,arguments)}function n_(){return n_=(0,pe.Z)(function*(n,e,t,r){const o=Ze(n);if(o.ac)return void Re("SyncEngine","Ignoring unexpected query state notification.");const u=o.ec.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield Tw(o.localStore,ea(u[0])),m=iu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield us(o,d,m);break}case"rejected":yield Sc(o.localStore,e,!0),Fc(o,e,r);break;default:nt()}}),n_.apply(this,arguments)}function Kw(n,e,t){return Vc.apply(this,arguments)}function Vc(){return Vc=(0,pe.Z)(function*(n,e,t){const r=r_(n);if(r.ac){for(const o of e){if(r.ec.has(o)){Re("SyncEngine","Adding an already active target "+o);continue}const u=yield LD(r.localStore,o),d=yield Ac(r.localStore,u);yield ah(r,t_(u),d.targetId,!1),im(r.remoteStore,d)}for(const o of t)r.ec.has(o)&&(yield Sc(r.localStore,o,!1).then(()=>{rh(r.remoteStore,o),Fc(r,o)}).catch(eu))}}),Vc.apply(this,arguments)}function r_(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gw.bind(null,e),e.Zu.Go=kc.bind(null,e.eventManager),e.Zu.lc=qD.bind(null,e.eventManager),e}function i_(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XD.bind(null,e),e}class Yw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.wt=Yf(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return Iw(this.persistence,new Ev,e.initialUser,this.wt)}_c(e){return new _v(th.Ms,this.wt)}dc(e){return new Av}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Qw extends Yw{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield i_(r.yc.syncEngine),yield Mc(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return Iw(this.persistence,new Ev,e.initialUser,this.wt)}mc(e,t){return new Xd(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new x0(t,this.persistence);return new WI(e.asyncQueue,r)}_c(e){const t=Qg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new Yg(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,fo(),rm(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new Av}}class Jw extends Qw{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const o=r.yc.syncEngine;r.sharedClientState instanceof Tv&&(r.sharedClientState.syncEngine={kr:ib.bind(null,o),Or:ob.bind(null,o),Mr:Kw.bind(null,o),Ri:Dm.bind(null,o),Nr:rb.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var u=(0,pe.Z)(function*(d){yield function QT(n,e){return qw.apply(this,arguments)}(r.yc.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}dc(e){const t=fo();if(!Tv.V(t))throw new Me(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Qg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Tv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class s_{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>qv(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=nb.bind(null,r.syncEngine),yield Bv(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Bw}createDatastore(e){const t=Yf(e.databaseInfo.databaseId),r=new xv(e.databaseInfo);return new Ow(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>qv(this.syncEngine,m,0),d=Sv.V()?new Sv:new VD,new BD(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,E,b){const S=new QD(r,o,u,d,m,E);return b&&(S.ac=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,pe.Z)(function*(t){const r=Ze(t);Re("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield gl(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Xw(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class au{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ub{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new or,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,pe.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),o=Number(r);isNaN(o)&&e.Pc(`length string (${r}) is not valid number`);const u=yield e.vc(o);return new KT(JSON.parse(u),t.length+o)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,pe.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class eE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,pe.Z)(function*(u,d){const m=Ze(u),E=Pf(m.wt)+"/documents",b={documents:d.map(Z=>Wr(m.wt,Z))},S=yield m.ao("BatchGetDocuments",E,b,d.length),N=new Map;S.forEach(Z=>{const fe=function yD(n,e){return"found"in e?function(t,r){vt(!!r.found);const o=sa(t,r.found.name),u=Er(r.found.updateTime),d=new zr({mapValue:{fields:r.found.fields}});return Dn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){vt(!!r.missing),vt(!!r.readTime);const o=sa(t,r.missing),u=Er(r.readTime);return Dn.newNoDocument(o,u)}(n,e):nt()}(m.wt,Z);N.set(fe.key.toString(),fe)});const H=[];return d.forEach(Z=>{const fe=N.get(Z.toString());vt(!!fe),H.push(fe)}),H}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ge.fromPath(o);e.mutations.push(new ta(u,e.precondition(u)))}),yield(r=(0,pe.Z)(function*(o,u){const d=Ze(o),m=Pf(d.wt)+"/documents",E={writes:u.map(b=>Gd(d.wt,b))};yield d.ro("Commit",m,E)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=_t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Fn.updateTime(t):Fn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new Me(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fn.updateTime(t)}return Fn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class lb{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Dc=r.maxAttempts,this.So=new $s(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,pe.Z)(function*(){const t=new eE(e.datastore),r=e.xc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Nc(u)}))}).catch(o=>{e.Nc(o)})}))}xc(e){try{const t=this.updateFunction(e);return!Xo(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Fg(t)}return!1}}class tE{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Br.UNAUTHENTICATED,this.clientId=wy.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,pe.Z)(function*(m){Re("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Re("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Rc(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function nE(n,e){return bm.apply(this,arguments)}function bm(){return bm=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,pe.Z)(function*(u){r.isEqual(u)||(yield Dw(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),bm.apply(this,arguments)}function rE(n,e){return ep.apply(this,arguments)}function ep(){return ep=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield o_(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>Vw(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>Vw(e.remoteStore,u)),n.onlineComponents=e}),ep.apply(this,arguments)}function o_(n){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,pe.Z)(function*(n){return n.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),yield nE(n,new Yw)),n.offlineComponents}),Cm.apply(this,arguments)}function tp(n){return a_.apply(this,arguments)}function a_(){return a_=(0,pe.Z)(function*(n){return n.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),yield rE(n,new s_)),n.onlineComponents}),a_.apply(this,arguments)}function iE(n){return o_(n).then(e=>e.persistence)}function u_(n){return o_(n).then(e=>e.localStore)}function Tm(n){return tp(n).then(e=>e.remoteStore)}function l_(n){return tp(n).then(e=>e.syncEngine)}function Uc(n){return c_.apply(this,arguments)}function c_(){return c_=(0,pe.Z)(function*(n){const e=yield tp(n),t=e.eventManager;return t.onListen=oh.bind(null,e.syncEngine),t.onUnlisten=Xn.bind(null,e.syncEngine),t}),c_.apply(this,arguments)}function sE(n,e,t={}){const r=new or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(o,u,d,m,E){const b=new au({next:N=>{u.enqueueAndForget(()=>pm(o,S));const H=N.docs.has(d);!H&&N.fromCache?E.reject(new Me(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&N.fromCache&&m&&"server"===m.source?E.reject(new Me(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(N)},error:N=>E.reject(N)}),S=new vl(bf(d.path),b,{includeMetadataChanges:!0,Du:!0});return hm(o,S)}(yield Uc(n),n.asyncQueue,e,t,r)})),r.promise}function oE(n,e,t={}){const r=new or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(o,u,d,m,E){const b=new au({next:N=>{u.enqueueAndForget(()=>pm(o,S)),N.fromCache&&"server"===m.source?E.reject(new Me(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(N)},error:N=>E.reject(N)}),S=new vl(d,b,{includeMetadataChanges:!0,Du:!0});return hm(o,S)}(yield Uc(n),n.asyncQueue,e,t,r)})),r.promise}const lE=new Map;function Am(n,e,t){if(!t)throw new Me(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cE(n,e,t,r){if(!0===e&&!0===r)throw new Me(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dE(n){if(!Ge.isDocumentKey(n))throw new Me(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hE(n){if(Ge.isDocumentKey(n))throw new Me(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ch(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function Ut(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ch(n);throw new Me(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function d_(n,e){if(e<=0)throw new Me(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Sm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,cE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class np{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sm({}),this._settingsFrozen=!1,e instanceof Jo?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Me(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jo(o.options.projectId)}(e))}get app(){if(!this._app)throw new Me(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new b0;switch(t.type){case"gapi":const r=t.client;return vt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new ff(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=lE.get(e);t&&(Re("ComponentProvider","Removing Datastore"),lE.delete(e),t.terminate())}(this),Promise.resolve()}}class _n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _n(this.firestore,e,this._key)}}class ui{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ui(this.firestore,e,this._query)}}class go extends ui{constructor(e,t,r){super(e,t,bf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _n(this.firestore,null,new Ge(e))}withConverter(e){return new go(this.firestore,e,this._path)}}function fE(n,e,...t){if(n=(0,xt.m9)(n),Am("collection","path",e),n instanceof np){const r=Jt.fromString(e,...t);return hE(r),new go(n,null,r)}{if(!(n instanceof _n||n instanceof go))throw new Me(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return hE(r),new go(n.firestore,null,r)}}function h_(n,e,...t){if(n=(0,xt.m9)(n),1===arguments.length&&(e=wy.I()),Am("doc","path",e),n instanceof np){const r=Jt.fromString(e,...t);return dE(r),new _n(n,null,new Ge(r))}{if(!(n instanceof _n||n instanceof go))throw new Me(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return dE(r),new _n(n.firestore,n instanceof go?n.converter:null,new Ge(r))}}function gE(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),(n instanceof _n||n instanceof go)&&(e instanceof _n||e instanceof go)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function dh(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),n instanceof ui&&e instanceof ui&&n.firestore===e.firestore&&bi(n._query,e._query)&&n.converter===e.converter}class Bc{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new $s(this,"async_queue_retry"),this.Kc=()=>{const t=rm();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=rm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=rm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new or;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,pe.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!rl(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,gr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const o=dm.createAndSchedule(this,e,t,r,u=>this.Wc(u));return this.$c.push(o),o}Gc(){this.Bc&&nt()}verifyOperationInProgress(){}zc(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function xm(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class yb{constructor(){this._progressObserver={},this._taskCompletionResolver=new or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ln extends np{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Bc,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||vb(this),this._firestoreClient.terminate()}}function yr(n){return n._firestoreClient||vb(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function vb(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ZI(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new tE(n._authCredentials,n._appCheckCredentials,n._queue,r)}function vE(n,e,t){const r=new or;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield nE(n,t),yield rE(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===ce.FAILED_PRECONDITION||d.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function IE(n){if(n._initialized||n._terminated)throw new Me(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class mo{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class la{constructor(e){this._byteString=e}static fromBase64String(e){try{return new la(Jn.fromBase64String(e))}catch(t){throw new Me(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new la(Jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class jc{constructor(e){this._methodName=e}}class hh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}}const Db=/^__.*__$/;class JT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ll(e,this.data,this.fieldMask,t,this.fieldTransforms):new xf(e,this.data,t,this.fieldTransforms)}}class DE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ll(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class sp{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Xc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new sp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ta({path:r,na:!1});return o.sa(e),o}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ta({path:r,na:!1});return o.Xc(),o}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return up(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(bE(this.Zc)&&Db.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class f_{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||Yf(e)}aa(e,t,r,o=!1){return new sp({Zc:e,methodName:t,ca:r,path:on.emptyPath(),na:!1,ua:o},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function $c(n){const e=n._freezeSettings(),t=Yf(n._databaseId);return new f_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fh(n,e,t,r,o,u={}){const d=n.aa(u.merge||u.mergeFields?2:0,e,t,o);y_("Data must be an object, but it was:",d,r);const m=AE(r,d);let E,b;if(u.merge)E=new Ui(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const S=[];for(const N of u.mergeFields){const H=Gc(e,N,t);if(!d.contains(H))throw new Me(ce.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);v_(S,H)||S.push(H)}E=new Ui(S),b=d.fieldTransforms.filter(N=>E.covers(N.field))}else E=null,b=d.fieldTransforms;return new JT(new zr(m),E,b)}class op extends jc{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof op}}function CE(n,e,t){return new sp({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class p_ extends jc{_toFieldTransform(e){return new Ng(e.path,new ul)}isEqual(e){return e instanceof p_}}class bb extends jc{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=CE(this,e,!0),r=this.ha.map(u=>Hc(u,t)),o=new nu(r);return new Ng(e.path,o)}isEqual(e){return this===e}}class Cb extends jc{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=CE(this,e,!0),r=this.ha.map(u=>Hc(u,t)),o=new mc(r);return new Ng(e.path,o)}isEqual(e){return this===e}}class Tb extends jc{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new $d(e.wt,Fy(e.wt,this.la));return new Ng(e.path,t)}isEqual(e){return this===e}}function g_(n,e,t,r){const o=n.aa(1,e,t);y_("Data must be an object, but it was:",o,r);const u=[],d=zr.empty();Vd(r,(E,b)=>{const S=ap(e,E,t);b=(0,xt.m9)(b);const N=o.ia(S);if(b instanceof op)u.push(S);else{const H=Hc(b,N);null!=H&&(u.push(S),d.set(S,H))}});const m=new Ui(u);return new DE(d,m,o.fieldTransforms)}function m_(n,e,t,r,o,u){const d=n.aa(1,e,t),m=[Gc(e,r,t)],E=[o];if(u.length%2!=0)throw new Me(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)m.push(Gc(e,u[H])),E.push(u[H+1]);const b=[],S=zr.empty();for(let H=m.length-1;H>=0;--H)if(!v_(b,m[H])){const Z=m[H];let fe=E[H];fe=(0,xt.m9)(fe);const Fe=d.ia(Z);if(fe instanceof op)b.push(Z);else{const Ye=Hc(fe,Fe);null!=Ye&&(b.push(Z),S.set(Z,Ye))}}const N=new Ui(b);return new DE(S,N,d.fieldTransforms)}function TE(n,e,t,r=!1){return Hc(t,n.aa(r?4:3,e))}function Hc(n,e){if(SE(n=(0,xt.m9)(n)))return y_("Unsupported field value:",e,n),AE(n,e);if(n instanceof jc)return function(t,r){if(!bE(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=Hc(d,r.ra(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,xt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Fy(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=An.fromDate(t);return{timestampValue:Hd(r.wt,o)}}if(t instanceof An){const o=new An(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Hd(r.wt,o)}}if(t instanceof hh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof la)return{bytesValue:Zy(r.wt,t._byteString)};if(t instanceof _n){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.oa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ky(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${ch(t)}`)}(n,e)}function AE(n,e){const t={};return M0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vd(n,(r,o)=>{const u=Hc(o,e.ea(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function SE(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof An||n instanceof hh||n instanceof la||n instanceof _n||n instanceof jc)}function y_(n,e,t){if(!SE(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ch(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function Gc(n,e,t){if((e=(0,xt.m9)(e))instanceof mo)return e._internalPath;if("string"==typeof e)return ap(n,e);throw up("Field path arguments must be of type string or ",n,!1,void 0,t)}const xE=new RegExp("[~\\*/\\[\\]]");function ap(n,e,t){if(e.search(xE)>=0)throw up(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mo(...e.split("."))._internalPath}catch{throw up(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function up(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let E="";return(u||d)&&(E+=" (found",u&&(E+=` in field ${r}`),d&&(E+=` in document ${o}`),E+=")"),new Me(ce.INVALID_ARGUMENT,m+n+E)}function v_(n,e){return n.some(t=>t.isEqual(e))}class ph{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new _n(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ab(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Nm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ab extends ph{data(){return super.data()}}function Nm(n,e){return"string"==typeof e?ap(n,e):e instanceof mo?e._internalPath:e._delegate._internalPath}class gh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uu extends ph{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Nm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class lp extends uu{data(e={}){return super.data(e)}}class _l{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new gh(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new lp(this._firestore,this._userDataWriter,r.key,r,new gh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new lp(r._firestore,r._userDataWriter,d.doc.key,d.doc,new gh(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new lp(r._firestore,r._userDataWriter,d.doc.key,d.doc,new gh(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,b=-1;return 0!==d.type&&(E=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),b=u.indexOf(d.doc.key)),{type:Sb(d.type),doc:m,oldIndex:E,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Sb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function ME(n,e){return n instanceof uu&&e instanceof uu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof _l&&e instanceof _l&&n._firestore===e._firestore&&dh(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function mh(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cp{}function ca(n,...e){for(const t of e)n=t._apply(n);return n}class da extends cp{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=$c(e.firestore),r=function(o,u,d,m,E,b,S){let N;if(E.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){PE(S,b);const Z=[];for(const fe of S)Z.push(w_(m,o,fe));N={arrayValue:{values:Z}}}else N=w_(m,o,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||PE(S,b),N=TE(d,"where",S,"in"===b||"not-in"===b);const H=ai.create(E,b,N);return function(Z,fe){if(fe.ht()){const Ye=Tg(Z);if(null!==Ye&&!Ye.isEqual(fe.field))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ye.toString()}' and '${fe.field.toString()}'`);const At=Cf(Z);null!==At&&FE(0,fe.field,At)}const Fe=function(Ye,At){for(const Pt of Ye.filters)if(At.indexOf(Pt.op)>=0)return Pt.op;return null}(Z,function(Ye){switch(Ye){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(fe.op));if(null!==Fe)throw new Me(ce.INVALID_ARGUMENT,Fe===fe.op?`Invalid query. You cannot use more than one '${fe.op.toString()}' filter.`:`Invalid query. You cannot use '${fe.op.toString()}' filters with '${Fe.toString()}' filters.`)}(o,H),H}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new ui(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new al(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class __ extends cp{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Df(o,u);return function(m,E){if(null===Cf(m)){const b=Tg(m);null!==b&&FE(0,b,E.field)}}(r,d),d}(e._query,this.fa,this.wa);return new ui(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new al(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class RE extends cp{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new ui(e.firestore,e.converter,Tf(e._query,this.ma,this.ga))}}class hp extends cp{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=km(e,this.type,this.ya,this.pa);return new ui(e.firestore,e.converter,(o=t,new al((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class NE extends cp{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=km(e,this.type,this.ya,this.pa);return new ui(e.firestore,e.converter,(o=t,new al((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function km(n,e,t,r){if(t[0]=(0,xt.m9)(t[0]),t[0]instanceof ph)return function(o,u,d,m,E){if(!m)throw new Me(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const S of gc(o))if(S.field.isKeyField())b.push(dc(u,m.key));else{const N=m.data.field(S.field);if(_g(N))throw new Me(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const H=S.field.canonicalString();throw new Me(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}b.push(N)}return new pc(b,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=$c(n.firestore);return function(u,d,m,E,b,S){const N=u.explicitOrderBy;if(b.length>N.length)throw new Me(ce.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let Z=0;Z<b.length;Z++){const fe=b[Z];if(N[Z].field.isKeyField()){if("string"!=typeof fe)throw new Me(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof fe}`);if(!Oy(u)&&-1!==fe.indexOf("/"))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${fe}' contains a slash.`);const Fe=u.path.child(Jt.fromString(fe));if(!Ge.isDocumentKey(Fe))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const Ye=new Ge(Fe);H.push(dc(d,Ye))}else{const Fe=TE(m,E,fe);H.push(Fe)}}return new pc(H,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function w_(n,e,t){if("string"==typeof(t=(0,xt.m9)(t))){if(""===t)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Oy(e)&&-1!==t.indexOf("/"))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!Ge.isDocumentKey(r))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dc(n,new Ge(r))}if(t instanceof _n)return dc(n,t._key);throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ch(t)}.`)}function PE(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function FE(n,e,t){if(!t.isEqual(e))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const XT={maxAttempts:5};class fp{convertValue(e,t="none"){switch(tu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return Vd(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new hh(Pn(e.latitude),Pn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=wg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(yf(e));default:return null}}convertTimestamp(e){const t=Qo(e);return new An(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);vt(J0(r));const o=new Jo(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return o.isEqual(t)||gr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function yh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class LE extends fp{constructor(e){super(),this.firestore=e}convertBytes(e){return new la(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _n(this.firestore,null,t)}}class Pm{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$c(e)}set(e,t,r){this._verifyNotCommitted();const o=ha(e,this._firestore),u=yh(o.converter,t,r),d=fh(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Fn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=ha(e,this._firestore);let d;return d="string"==typeof(t=(0,xt.m9)(t))||t instanceof mo?m_(this._dataReader,"WriteBatch.update",u._key,t,r,o):g_(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Fn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ha(e,this._firestore);return this._mutations=this._mutations.concat(new Mf(t._key,Fn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ha(n,e){if((n=(0,xt.m9)(n)).firestore!==e)throw new Me(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class zc extends fp{constructor(e){super(),this.firestore=e}convertBytes(e){return new la(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _n(this.firestore,null,t)}}function BE(n,e,t){n=Ut(n,_n);const r=Ut(n.firestore,Ln),o=yh(n.converter,e,t);return vh(r,[fh($c(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Fn.none())])}function I_(n,e,t,...r){n=Ut(n,_n);const o=Ut(n.firestore,Ln),u=$c(o);let d;return d="string"==typeof(e=(0,xt.m9)(e))||e instanceof mo?m_(u,"updateDoc",n._key,e,t,r):g_(u,"updateDoc",n._key,e),vh(o,[d.toMutation(n._key,Fn.exists(!0))])}function D_(n,...e){var t,r,o;n=(0,xt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||xm(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(xm(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let E,b,S;if(n instanceof _n)b=Ut(n.firestore,Ln),S=bf(n._key.path),E={next:N=>{e[d]&&e[d](Fm(b,n,N))},error:e[d+1],complete:e[d+2]};else{const N=Ut(n,ui);b=Ut(N.firestore,Ln),S=N._query;const H=new zc(b);E={next:Z=>{e[d]&&e[d](new _l(b,H,N,Z))},error:e[d+1],complete:e[d+2]},mh(n._query)}return function(N,H,Z,fe){const Fe=new au(fe),Ye=new vl(H,Fe,Z);return N.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return hm(yield Uc(N),Ye)})),()=>{Fe.Tc(),N.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return pm(yield Uc(N),Ye)}))}}(yr(b),S,m,E)}function vh(n,e){return function(t,r){const o=new or;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function $w(n,e,t){return ym.apply(this,arguments)}(yield l_(t),r,o)})),o.promise}(yr(n),e)}function Fm(n,e,t){const r=t.docs.get(e._key),o=new zc(n);return new uu(n,o,e._key,r,new gh(t.hasPendingWrites,t.fromCache),e.converter)}class Lb extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=$c(e)}get(e){const t=ha(e,this._firestore),r=new LE(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return nt();const u=o[0];if(u.isFoundDocument())return new ph(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new ph(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const o=ha(e,this._firestore),u=yh(o.converter,t,r),d=fh(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=ha(e,this._firestore);let d;return d="string"==typeof(t=(0,xt.m9)(t))||t instanceof mo?m_(this._dataReader,"Transaction.update",u._key,t,r,o):g_(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=ha(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ha(e,this._firestore),r=new zc(this._firestore);return super.get(e).then(o=>new uu(this._firestore,r,t._key,o._document,new gh(!1,!1),t.converter))}}!function(n,e=!0){uc=Ri.SDK_VERSION,(0,Ri._registerComponent)(new jo.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Ln(o,new C0(t.getProvider("auth-internal")),new A0(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Ri.registerVersion)(E0,"3.4.11",n),(0,Ri.registerVersion)(E0,"3.4.11","esm2017")}();class b_{constructor(e){return e}}const Lm="firestore",C_=new p.OlP("angularfire2.firestore-instances"),zb={provide:class $b{constructor(){return(0,Cn.vb)(Lm)}},deps:[[new p.FiY,C_]]},T_={provide:b_,useFactory:function Gb(n,e){const t=(0,Cn.JM)(Lm,n,e);return t&&new b_(t)},deps:[[new p.FiY,C_],class Qi{constructor(e){return e}}]};let A_=(()=>{class n{constructor(){(0,un.KN)("angularfire",Cn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[T_,zb]}),n})();var Wn=P(8996),gp=P(7669);function It(...n){const e=(0,gp.yG)(n);return(0,Wn.D)(n,e)}var wl=P(7579);class yo extends wl.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var lu=P(8306);const{isArray:dC}=Array,{getPrototypeOf:yA,prototype:hC,keys:N_}=Object;var mp=P(4671),Ot=P(4004);const{isArray:fC}=Array;var Ai=P(5403),gC=P(9672);function k_(...n){const e=(0,gp.yG)(n),t=(0,gp.jO)(n),{args:r,keys:o}=function WE(n){if(1===n.length){const e=n[0];if(dC(e))return{args:e,keys:null};if(function ls(n){return n&&"object"==typeof n&&yA(n)===hC}(e)){const t=N_(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Wn.D)([],e);const u=new lu.y(function qE(n,e,t=mp.y){return r=>{ZE(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let E=0;E<o;E++)ZE(e,()=>{const b=(0,Wn.D)(n[E],e);let S=!1;b.subscribe((0,Ai.x)(r,N=>{u[E]=N,S||(S=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>function O_(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,d):mp.y));return t?u.pipe(function Vm(n){return(0,Ot.U)(e=>function pC(n,e){return fC(e)?n(...e):n(e)}(n,e))}(t)):u}function ZE(n,e,t){n?(0,gC.f)(t,n,e):e()}var Um=P(576);function yp(n,e){const t=(0,Um.m)(n)?n:()=>n,r=o=>o.error(t());return new lu.y(e?o=>e.schedule(r,0,o):r)}const Gs=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ih=P(8189);function zs(...n){return function KE(){return(0,Ih.J)(1)}()((0,Wn.D)(n,(0,gp.yG)(n)))}var Bm=P(8421);function mC(n){return new lu.y(e=>{(0,Bm.Xf)(n()).subscribe(e)})}var Dh=P(515),YE=P(727),cs=P(4482);function F_(){return(0,cs.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Ai.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class L_ extends lu.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,cs.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new YE.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Ai.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=YE.w0.EMPTY)}return e}refCount(){return F_()(this)}}function Bi(n,e){return(0,cs.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,Ai.x)(r,E=>{o?.unsubscribe();let b=0;const S=u++;(0,Bm.Xf)(n(E,S)).subscribe(o=(0,Ai.x)(r,N=>r.next(e?e(E,N,S,b++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var vp=P(5698);function jm(...n){const e=(0,gp.yG)(n);return(0,cs.e)((t,r)=>{(e?zs(n,t,e):zs(n,t)).subscribe(r)})}function QE(n,e,t,r,o){return(u,d)=>{let m=t,E=e,b=0;u.subscribe((0,Ai.x)(d,S=>{const N=b++;E=m?n(E,S,N):(m=!0,S),r&&d.next(E)},o&&(()=>{m&&d.next(E),d.complete()})))}}function $m(n,e){return(0,cs.e)(QE(n,e,arguments.length>=2,!0))}function vo(n,e){return(0,cs.e)((t,r)=>{let o=0;t.subscribe((0,Ai.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function cu(n){return(0,cs.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Ai.x)(t,void 0,void 0,d=>{u=(0,Bm.Xf)(n(d,cu(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var li=P(5577);function _p(n,e){return(0,Um.m)(e)?(0,li.z)(n,e,1):(0,li.z)(n,1)}function Hm(n){return n<=0?()=>Dh.E:(0,cs.e)((e,t)=>{let r=[];e.subscribe((0,Ai.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function V_(n=Gm){return(0,cs.e)((e,t)=>{let r=!1;e.subscribe((0,Ai.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Gm(){return new Gs}function bh(n){return(0,cs.e)((e,t)=>{let r=!1;e.subscribe((0,Ai.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function El(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vo((o,u)=>n(o,u,r)):mp.y,(0,vp.q)(1),t?bh(e):V_(()=>new Gs))}var qr=P(8505);function U_(n){return(0,cs.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class du{constructor(e,t){this.id=e,this.url=t}}class eI extends du{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zm extends du{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class B_ extends du{constructor(e,t,r){super(e,t),this.reason=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yC extends du{constructor(e,t,r){super(e,t),this.error=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class vC extends du{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _C extends du{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vA extends du{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _A extends du{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wA extends du{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EA{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class IA{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wC{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wm{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class EC{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class IC{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class j_{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const kt="primary";class $_{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Il(n){return new $_(n)}const tI="ngNavigationCancelingError";function wp(n){const e=Error("NavigationCancelingError: "+n);return e[tI]=!0,e}function qm(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function hu(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!DC(n[o],e[o]))return!1;return!0}function DC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function bC(n){return Array.prototype.concat.apply([],n)}function G_(n){return n.length>0?n[n.length-1]:null}function Zr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function _o(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,Wn.D)(Promise.resolve(n)):It(n)}const nI={exact:function rI(n,e,t){if(!Th(n.segments,e.segments)||!Ep(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!rI(n.children[r],e.children[r],t))return!1;return!0},subset:Zm},z_={exact:function TC(n,e){return hu(n,e)},subset:function iI(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>DC(n[t],e[t]))},ignored:()=>!0};function W_(n,e,t){return nI[t.paths](n.root,e.root,t.matrixParams)&&z_[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Zm(n,e,t){return AC(n,e,e.segments,t)}function AC(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Th(o,t)||e.hasChildren()||!Ep(o,t,r))}if(n.segments.length===t.length){if(!Th(n.segments,t)||!Ep(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Zm(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Th(n.segments,o)&&Ep(n.segments,o,r)&&n.children[kt])&&AC(n.children[kt],e,u,r)}}function Ep(n,e,t){return e.every((r,o)=>z_[t](n[o].parameters,r.parameters))}class fu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Il(this.queryParams)),this._queryParamMap}toString(){return TA.serialize(this)}}class Ht{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Zr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return q_(this)}}class Ip{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Il(this.parameters)),this._parameterMap}toString(){return NC(this)}}function Th(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class sI{}class oI{parse(e){const t=new I(e);return new fu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Km(e.root,!0)}`,r=function s(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Z_(t)}=${Z_(o)}`).join("&"):`${Z_(t)}=${Z_(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function MC(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const TA=new oI;function q_(n){return n.segments.map(e=>NC(e)).join("/")}function Km(n,e){if(!n.hasChildren())return q_(n);if(e){const t=n.children[kt]?Km(n.children[kt],!1):"",r=[];return Zr(n.children,(o,u)=>{u!==kt&&r.push(`${u}:${Km(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function SC(n,e){let t=[];return Zr(n.children,(r,o)=>{o===kt&&(t=t.concat(e(r,o)))}),Zr(n.children,(r,o)=>{o!==kt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===kt?[Km(n.children[kt],!1)]:[`${o}:${Km(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[kt]?`${q_(n)}/${t[0]}`:`${q_(n)}/(${t.join("//")})`}}function xC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Z_(n){return xC(n).replace(/%3B/gi,";")}function aI(n){return xC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function K_(n){return decodeURIComponent(n)}function RC(n){return K_(n.replace(/\+/g,"%20"))}function NC(n){return`${aI(n.path)}${function i(n){return Object.keys(n).map(e=>`;${aI(e)}=${aI(n[e])}`).join("")}(n.parameters)}`}const a=/^[^\/()?;=#]+/;function l(n){const e=n.match(a);return e?e[0]:""}const c=/^[^=?&#]+/,v=/^[^&#]+/;class I{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ht([],{}):new Ht([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[kt]=new Ht(e,t)),r}parseSegment(){const e=l(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ip(K_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=l(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=l(this.remaining);o&&(r=o,this.capture(r))}e[K_(t)]=K_(r)}parseQueryParam(e){const t=function f(n){const e=n.match(c);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function w(n){const e=n.match(v);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=RC(t),u=RC(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=l(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=kt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[kt]:new Ht([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class T{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=M(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=M(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=k(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return k(e,this._root).map(t=>t.value)}}function M(n,e){if(n===e.value)return e;for(const t of e.children){const r=M(n,t);if(r)return r}return null}function k(n,e){if(n===e.value)return[e];for(const t of e.children){const r=k(n,t);if(r.length)return r.unshift(e),r}return[]}class U{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function J(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ie extends T{constructor(e,t){super(e),this.snapshot=t,wn(this,e)}toString(){return this.snapshot.toString()}}function Ne(n,e){const t=function qe(n,e){const d=new ot([],{},{},"",{},kt,e,null,n.root,-1,{});return new qt("",new U(d,[]))}(n,e),r=new yo([new Ip("",{})]),o=new yo({}),u=new yo({}),d=new yo({}),m=new yo(""),E=new Je(r,o,d,m,u,kt,e,t.root);return E.snapshot=t.root,new Ie(new U(E,[]),t)}class Je{constructor(e,t,r,o,u,d,m,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ot.U)(e=>Il(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ot.U)(e=>Il(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ft(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function xe(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ot{constructor(e,t,r,o,u,d,m,E,b,S,N,H){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=E,this._urlSegment=b,this._lastPathIndex=S,this._correctedLastPathIndex=H??S,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Il(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Il(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qt extends T{constructor(e,t){super(t),this.url=e,wn(this,t)}toString(){return Dl(this._root)}}function wn(n,e){e.value._routerState=n,e.children.forEach(t=>wn(n,t))}function Dl(n){const e=n.children.length>0?` { ${n.children.map(Dl).join(", ")} } `:"";return`${n.value}${e}`}function Dp(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,hu(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),hu(e.params,t.params)||n.params.next(t.params),function DA(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!hu(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),hu(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function bp(n,e){const t=hu(n.params,e.params)&&function CA(n,e){return Th(n,e)&&n.every((t,r)=>hu(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||bp(n.parent,e.parent))}function Wc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Q_(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Wc(n,r,o);return Wc(n,r)})}(n,e,t);return new U(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Wc(n,m)),d}}const r=function J_(n){return new Je(new yo(n.url),new yo(n.params),new yo(n.queryParams),new yo(n.fragment),new yo(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Wc(n,u));return new U(r,o)}}function Ah(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function qc(n){return"object"==typeof n&&null!=n&&n.outlets}function OC(n,e,t,r,o){let u={};if(r&&Zr(r,(m,E)=>{u[E]=Array.isArray(m)?m.map(b=>`${b}`):`${m}`}),n===e)return new fu(t,u,o);const d=AA(n,e,t);return new fu(d,u,o)}function AA(n,e,t){const r={};return Zr(n.children,(o,u)=>{r[u]=o===e?t:AA(o,e,t)}),new Ht(n.segments,r)}class SA{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ah(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(qc);if(o&&o!==G_(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class kC{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function xA(n,e,t){if(n||(n=new Ht([],{})),0===n.segments.length&&n.hasChildren())return uI(n,e,t);const r=function AM(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(qc(m))break;const E=`${m}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&b&&"object"==typeof b&&void 0===b.outlets){if(!RA(E,b,d))return u;r+=2}else{if(!RA(E,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Ht(n.segments.slice(0,r.pathIndex),{});return u.children[kt]=new Ht(n.segments.slice(r.pathIndex),n.children),uI(u,0,o)}return r.match&&0===o.length?new Ht(n.segments,{}):r.match&&!n.hasChildren()?PC(n,e,t):r.match?uI(n,0,o):PC(n,e,t)}function uI(n,e,t){if(0===t.length)return new Ht(n.segments,{});{const r=function TM(n){return qc(n[0])?n[0].outlets:{[kt]:n}}(t),o={};return Zr(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=xA(n.children[d],e,u))}),Zr(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Ht(n.segments,o)}}function PC(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(qc(u)){const E=SM(u.outlets);return new Ht(r,E)}if(0===o&&Ah(t[0])){r.push(new Ip(n.segments[e].path,MA(t[0]))),o++;continue}const d=qc(u)?u.outlets[kt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&Ah(m)?(r.push(new Ip(d,MA(m))),o+=2):(r.push(new Ip(d,{})),o++)}return new Ht(r,{})}function SM(n){const e={};return Zr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=PC(new Ht([],{}),0,t))}),e}function MA(n){const e={};return Zr(n,(t,r)=>e[r]=`${t}`),e}function RA(n,e,t){return n==t.path&&hu(e,t.parameters)}class xM{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new e0,this.attachRef=null}}class e0{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new xM,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let FC=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=o||kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=this.location,d=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,E=new MM(t,m,o.injector);if(r&&function RM(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(d);this.activated=o.createComponent(b,o.length,E)}else this.activated=o.createComponent(d,{index:o.length,injector:E,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(e0),p.Y36(p.s_b),p.$8M("name"),p.Y36(p.sBO),p.Y36(p.lqb))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class MM{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Je?this.route:e===e0?this.childContexts:this.parent.get(e,t)}}let NA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[FC],encapsulation:2}),n})();function OA(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function VC(n){const e=n.children&&n.children.map(VC),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==kt&&(t.component=NA),t}function fa(n){return n.outlet||kt}function kA(n,e){const t=n.filter(r=>fa(r)===e);return t.push(...n.filter(r=>fa(r)!==e)),t}function PA(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class FM{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Dp(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=J(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Zr(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=J(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=J(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=J(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new IC(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Wm(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Dp(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),Dp(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=PA(o.snapshot),E=m?.get(p._Vd)??null;d.attachRef=null,d.route=o,d.resolver=E,d.injector=m,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}function Sh(n){return"function"==typeof n}function Cp(n){return n instanceof fu}const t0=Symbol("INITIAL_VALUE");function n0(){return Bi(n=>k_(n.map(e=>e.pipe((0,vp.q)(1),jm(t0)))).pipe($m((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==t0?o:(u===t0&&(r=!0),r||!1!==u&&d!==t.length-1&&!Cp(u)?o:u),e)},t0),vo(e=>e!==t0),(0,Ot.U)(e=>Cp(e)?e:!0===e),(0,vp.q)(1)))}const FA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lI(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...FA}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||qm)(t,n,e);if(!o)return{...FA};const u={};Zr(o.posParams,(m,E)=>{u[E]=m.path});const d=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function cI(n,e,t,r,o="corrected"){if(t.length>0&&function GM(n,e,t){return t.some(r=>dI(n,e,r)&&fa(r)!==kt)}(n,t,r)){const d=new Ht(e,function HM(n,e,t,r){const o={};o[kt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&fa(u)!==kt){const d=new Ht([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[fa(u)]=d}return o}(n,e,r,new Ht(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function zM(n,e,t){return t.some(r=>dI(n,e,r))}(n,t,r)){const d=new Ht(n.segments,function $M(n,e,t,r,o,u){const d={};for(const m of r)if(dI(n,t,m)&&!o[fa(m)]){const E=new Ht([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[fa(m)]=E}return{...o,...d}}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Ht(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function dI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function LA(n,e,t,r){return!!(fa(n)===r||r!==kt&&dI(e,t,n))&&("**"===n.path||lI(e,n,t).matched)}function VA(n,e,t){return 0===e.length&&!n.children[t]}class hI{constructor(e){this.segmentGroup=e||null}}class UA{constructor(e){this.urlTree=e}}function r0(n){return yp(new hI(n))}function BA(n){return yp(new UA(n))}function WM(n){return yp(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class KM{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=cI(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ht(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,kt).pipe((0,Ot.U)(u=>this.createUrlTree(UC(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(cu(u=>{if(u instanceof UA)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof hI?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,kt).pipe((0,Ot.U)(o=>this.createUrlTree(UC(o),e.queryParams,e.fragment))).pipe(cu(o=>{throw o instanceof hI?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Ht([],{[kt]:e}):e;return new fu(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ot.U)(u=>new Ht([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Wn.D)(o).pipe(_p(u=>{const d=r.children[u],m=kA(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,Ot.U)(E=>({segment:E,outlet:u})))}),$m((u,d)=>(u[d.outlet]=d.segment,u),{}),function JE(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vo((o,u)=>n(o,u,r)):mp.y,Hm(1),t?bh(e):V_(()=>new Gs))}())}expandSegment(e,t,r,o,u,d){return(0,Wn.D)(r).pipe(_p(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(cu(b=>{if(b instanceof hI)return It(null);throw b}))),El(m=>!!m),cu((m,E)=>{if(m instanceof Gs||"EmptyError"===m.name)return VA(t,o,u)?It(new Ht([],{})):r0(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return LA(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):r0(t):r0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?BA(u):this.lineralizeSegments(r,u).pipe((0,li.z)(d=>{const m=new Ht(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:E,remainingSegments:b,positionalParamSegments:S}=lI(t,o,u);if(!m)return r0(t);const N=this.applyRedirectCommands(E,o.redirectTo,S);return o.redirectTo.startsWith("/")?BA(N):this.lineralizeSegments(o,N).pipe((0,li.z)(H=>this.expandSegment(e,t,r,H.concat(b),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return e=OA(r,e),r.loadChildren?(r._loadedRoutes?It({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Ot.U)(N=>(r._loadedRoutes=N.routes,r._loadedInjector=N.injector,new Ht(o,{})))):It(new Ht(o,{}));const{matched:d,consumedSegments:m,remainingSegments:E}=lI(t,r,o);return d?(e=OA(r,e),this.getChildConfig(e,r,o).pipe((0,li.z)(S=>{const N=S.injector??e,H=S.routes,{segmentGroup:Z,slicedSegments:fe}=cI(t,m,E,H),Fe=new Ht(Z.segments,Z.children);if(0===fe.length&&Fe.hasChildren())return this.expandChildren(N,H,Fe).pipe((0,Ot.U)(Zt=>new Ht(m,Zt)));if(0===H.length&&0===fe.length)return It(new Ht(m,{}));const Ye=fa(r)===u;return this.expandSegment(N,Fe,H,fe,Ye?kt:u,!0).pipe((0,Ot.U)(Pt=>new Ht(m.concat(Pt.segments),Pt.children)))}))):r0(t)}getChildConfig(e,t,r){return t.children?It({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?It({routes:t._loadedRoutes,injector:t._loadedInjector}):this.runCanLoadGuards(e,t,r).pipe((0,li.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,qr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function qM(n){return yp(wp(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):It({routes:[],injector:e})}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return It(!0);const u=o.map(d=>{const m=e.get(d);let E;if(function VM(n){return n&&Sh(n.canLoad)}(m))E=m.canLoad(t,r);else{if(!Sh(m))throw new Error("Invalid CanLoad guard");E=m(t,r)}return _o(E)});return It(u).pipe(n0(),(0,qr.b)(d=>{if(!Cp(d))return;const m=wp(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,Ot.U)(d=>!0===d))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return It(r);if(o.numberOfChildren>1||!o.children[kt])return WM(e.redirectTo);o=o.children[kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new fu(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Zr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Zr(t.children,(m,E)=>{d[E]=this.createSegmentGroup(e,m,r,o)}),new Ht(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function UC(n){const e={};for(const r of Object.keys(n.children)){const u=UC(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function YM(n){if(1===n.numberOfChildren&&n.children[kt]){const e=n.children[kt];return new Ht(n.segments.concat(e.segments),e.children)}return n}(new Ht(n.segments,e))}class jA{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class fI{constructor(e,t){this.component=e,this.route=t}}function JM(n,e,t){const r=n._root;return s0(r,e?e._root:null,t,[r.value])}function pI(n,e,t){return(PA(e)??t).get(n)}function s0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=J(e);return n.children.forEach(d=>{(function eR(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const E=function tR(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Th(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Th(n.url,e.url)||!hu(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bp(n,e)||!hu(n.queryParams,e.queryParams);default:return!bp(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new jA(r)):(u.data=d.data,u._resolvedData=d._resolvedData),s0(n,e,u.component?m?m.children:null:t,r,o),E&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new fI(m.outlet.component,d))}else d&&o0(e,m,o),o.canActivateChecks.push(new jA(r)),s0(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Zr(u,(d,m)=>o0(d,t.getContext(m),o)),o}function o0(n,e,t){const r=J(n),o=n.value;Zr(r,(u,d)=>{o0(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new fI(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class cR{}function HA(n){return new lu.y(e=>e.error(n))}class hR{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=cI(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,kt);if(null===t)return null;const r=new ot([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},kt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new U(r,t),u=new qt(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=ft(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=kA(e,u),E=this.processSegmentGroup(m,d,u);if(null===E)return null;r.push(...E)}const o=GA(r);return function fR(n){n.sort((e,t)=>e.value.outlet===kt?-1:t.value.outlet===kt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return VA(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!LA(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const Z=r.length>0?G_(r).parameters:{},fe=WA(t)+r.length;u=new ot(r,Z,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ZA(e),fa(e),e.component??e._loadedComponent??null,e,zA(t),fe,KA(e),fe)}else{const Z=lI(t,e,r);if(!Z.matched)return null;d=Z.consumedSegments,m=Z.remainingSegments;const fe=WA(t)+d.length;u=new ot(d,Z.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ZA(e),fa(e),e.component??e._loadedComponent??null,e,zA(t),fe,KA(e),fe)}const E=function pR(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:b,slicedSegments:S}=cI(t,d,m,E.filter(Z=>void 0===Z.redirectTo),this.relativeLinkResolution);if(0===S.length&&b.hasChildren()){const Z=this.processChildren(E,b);return null===Z?null:[new U(u,Z)]}if(0===E.length&&0===S.length)return[new U(u,[])];const N=fa(e)===o,H=this.processSegment(E,b,S,N?kt:o);return null===H?null:[new U(u,H)]}}function gR(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function GA(n){const e=[],t=new Set;for(const r of n){if(!gR(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=GA(r.children);e.push(new U(r.value,o))}return e.filter(r=>!t.has(r))}function zA(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function WA(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function ZA(n){return n.data||{}}function KA(n){return n.resolve||{}}const BC=Symbol("RouteTitle");function YA(n){return"string"==typeof n.title||null===n.title}function gI(n){return Bi(e=>{const t=n(e);return t?(0,Wn.D)(t).pipe((0,Ot.U)(()=>e)):It(e)})}class bR extends class DR{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const jC=new p.OlP("ROUTES");let $C=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return It(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=_o(t.loadComponent()).pipe((0,qr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),U_(()=>{this.componentLoaders.delete(t)})),o=new L_(r,()=>new wl.x).pipe(F_());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return It({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Ot.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let E,b,S=!1;Array.isArray(m)?b=m:(E=m.create(t).injector,b=bC(E.get(jC,[],p.XFs.Self|p.XFs.Optional)));return{routes:b.map(VC),injector:E}}),U_(()=>{this.childrenLoaders.delete(r)})),d=new L_(u,()=>new wl.x).pipe(F_());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return _o(t()).pipe((0,li.z)(r=>r instanceof p.YKP||Array.isArray(r)?It(r):(0,Wn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3),p.LFG(p.Sil))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class TR{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function SR(n){throw n}function xR(n,e,t){return e.parse("/")}function JA(n,e){return It(null)}const MR={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},RR={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wo=(()=>{class n{constructor(t,r,o,u,d,m,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new wl.x,this.errorHandler=SR,this.malformedUriErrorHandler=xR,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:JA,afterPreactivation:JA},this.urlHandlingStrategy=new TR,this.routeReuseStrategy=new bR,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get($C),this.configLoader.onLoadEndListener=H=>this.triggerEvent(new IA(H)),this.configLoader.onLoadStartListener=H=>this.triggerEvent(new EA(H)),this.ngModule=d.get(p.h0i),this.console=d.get(p.c2e);const N=d.get(p.R0b);this.isNgZoneEnabled=N instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=function CC(){return new fu(new Ht([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ne(this.currentUrlTree,this.rootComponentType),this.transitions=new yo({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(vo(o=>0!==o.id),(0,Ot.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Bi(o=>{let u=!1,d=!1;return It(o).pipe((0,qr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Bi(m=>{const E=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return XA(m.source)&&(this.browserUrlTree=m.extractedUrl),It(m).pipe(Bi(N=>{const H=this.transitions.getValue();return r.next(new eI(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),H!==this.transitions.getValue()?Dh.E:Promise.resolve(N)}),function QM(n,e,t,r){return Bi(o=>function ZM(n,e,t,r,o){return new KM(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Ot.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,qr.b)(N=>{this.currentNavigation={...this.currentNavigation,finalUrl:N.urlAfterRedirects}}),function mR(n,e,t,r,o){return(0,li.z)(u=>function dR(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new hR(n,e,t,r,o,u).recognize();return null===d?HA(new cR):It(d)}catch(d){return HA(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Ot.U)(d=>({...u,targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,qr.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Z=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Z,N)}this.browserUrlTree=N.urlAfterRedirects}const H=new vC(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(H)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:Z,source:fe,restoredState:Fe,extras:Ye}=m,At=new eI(H,this.serializeUrl(Z),fe,Fe);r.next(At);const Pt=Ne(Z,this.rootComponentType).snapshot;return It({...m,targetSnapshot:Pt,urlAfterRedirects:Z,extras:{...Ye,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),Dh.E}),gI(m=>{const{targetSnapshot:E,id:b,extractedUrl:S,rawUrl:N,extras:{skipLocationChange:H,replaceUrl:Z}}=m;return this.hooks.beforePreactivation(E,{navigationId:b,appliedUrlTree:S,rawUrlTree:N,skipLocationChange:!!H,replaceUrl:!!Z})}),(0,qr.b)(m=>{const E=new _C(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(E)}),(0,Ot.U)(m=>({...m,guards:JM(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function nR(n,e){return(0,li.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?It({...t,guardsResult:!0}):function rR(n,e,t,r){return(0,Wn.D)(n).pipe((0,li.z)(o=>function lR(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?It(u.map(m=>{const E=pI(m,e,o);let b;if(function jM(n){return n&&Sh(n.canDeactivate)}(E))b=_o(E.canDeactivate(n,e,t,r));else{if(!Sh(E))throw new Error("Invalid CanDeactivate guard");b=_o(E(n,e,t,r))}return b.pipe(El())})).pipe(n0()):It(!0)}(o.component,o.route,t,e,r)),El(o=>!0!==o,!0))}(d,r,o,n).pipe((0,li.z)(m=>m&&function LM(n){return"boolean"==typeof n}(m)?function iR(n,e,t,r){return(0,Wn.D)(e).pipe(_p(o=>zs(function oR(n,e){return null!==n&&e&&e(new wC(n)),It(!0)}(o.route.parent,r),function sR(n,e){return null!==n&&e&&e(new EC(n)),It(!0)}(o.route,r),function uR(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function XM(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>mC(()=>It(d.guards.map(E=>{const b=pI(E,d.node,t);let S;if(function BM(n){return n&&Sh(n.canActivateChild)}(b))S=_o(b.canActivateChild(r,n));else{if(!Sh(b))throw new Error("Invalid CanActivateChild guard");S=_o(b(r,n))}return S.pipe(El())})).pipe(n0())));return It(u).pipe(n0())}(n,o.path,t),function aR(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return It(!0);const o=r.map(u=>mC(()=>{const d=pI(u,e,t);let m;if(function UM(n){return n&&Sh(n.canActivate)}(d))m=_o(d.canActivate(e,n));else{if(!Sh(d))throw new Error("Invalid CanActivate guard");m=_o(d(e,n))}return m.pipe(El())}));return It(o).pipe(n0())}(n,o.route,t))),El(o=>!0!==o,!0))}(r,u,n,e):It(m)),(0,Ot.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,qr.b)(m=>{if(Cp(m.guardsResult)){const b=wp(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw b.url=m.guardsResult,b}const E=new vA(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(E)}),vo(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),gI(m=>{if(m.guards.canActivateChecks.length)return It(m).pipe((0,qr.b)(E=>{const b=new _A(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(b)}),Bi(E=>{let b=!1;return It(E).pipe(function yR(n,e){return(0,li.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return It(t);let u=0;return(0,Wn.D)(o).pipe(_p(d=>function vR(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!YA(o)&&(u[BC]=o.title),function _R(n,e,t,r){const o=function wR(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return It({});const u={};return(0,Wn.D)(o).pipe((0,li.z)(d=>function ER(n,e,t,r){const o=pI(n,e,r);return _o(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe(El(),(0,qr.b)(m=>{u[d]=m}))),Hm(1),function XE(n){return(0,Ot.U)(()=>n)}(u),cu(d=>d instanceof Gs?Dh.E:yp(d)))}(u,n,e,r).pipe((0,Ot.U)(d=>(n._resolvedData=d,n.data=ft(n,t).resolve,o&&YA(o)&&(n.data[BC]=o.title),null)))}(d.route,r,n,e)),(0,qr.b)(()=>u++),Hm(1),(0,li.z)(d=>u===o.length?It(t):Dh.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,qr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,qr.b)(E=>{const b=new wA(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(b)}))}),gI(m=>{const{targetSnapshot:E,id:b,extractedUrl:S,rawUrl:N,extras:{skipLocationChange:H,replaceUrl:Z}}=m;return this.hooks.afterPreactivation(E,{navigationId:b,appliedUrlTree:S,rawUrlTree:N,skipLocationChange:!!H,replaceUrl:!!Z})}),gI(m=>{const E=b=>{const S=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,qr.b)(N=>{b.component=N}),(0,Ot.U)(()=>{})));for(const N of b.children)S.push(...E(N));return S};return k_(E(m.targetSnapshot.root)).pipe(bh(),(0,vp.q)(1))}),(0,Ot.U)(m=>{const E=function Y_(n,e,t){const r=Wc(n,e._root,t?t._root:void 0);return new Ie(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return{...m,targetRouterState:E}}),(0,qr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Ot.U)(r=>(new FM(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,qr.b)({next(){u=!0},complete(){u=!0}}),U_(()=>{u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),cu(m=>{if(d=!0,function H_(n){return n&&n[tI]}(m)){const E=Cp(m.url);E||(this.navigated=!0,this.restoreHistory(o,!0));const b=new B_(o.id,this.serializeUrl(o.extractedUrl),m.message);if(r.next(b),E){const S=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||XA(o.source)};this.scheduleNavigation(S,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const E=new yC(o.id,this.serializeUrl(o.extractedUrl),m);r.next(E);try{o.resolve(this.errorHandler(m))}catch(b){o.reject(b)}}return Dh.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(VC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:E}=r,b=o||this.routerState.root,S=E?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N={...this.currentUrlTree.queryParams,...u};break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),function X_(n,e,t,r,o){if(0===t.length)return OC(e.root,e.root,e.root,r,o);const u=function DM(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new SA(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Zr(u.outlets,(E,b)=>{m[b]="string"==typeof E?E.split("/"):E}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,E)=>{0==E&&"."===m||(0==E&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new SA(t,e,r)}(t);return u.toRoot()?OC(e.root,e.root,new Ht([],{}),r,o):function d(E){const b=function bM(n,e,t,r){return n.isAbsolute?new kC(e.root,!0,0):-1===r?new kC(t,t===e.root,0):function CM(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new kC(r,!1,o-u)}(t,r+(Ah(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,E),S=b.processChildren?uI(b.segmentGroup,b.index,u.commands):xA(b.segmentGroup,b.index,u.commands);return OC(e.root,b.segmentGroup,S,r,o)}(n.snapshot?._lastPathIndex)}(b,this.currentUrlTree,t,N,S??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Cp(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function NR(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...MR}:!1===r?{...RR}:r,Cp(t))return W_(this.currentUrlTree,t,o);const u=this.parseUrl(t);return W_(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new zm(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){if(this.disposed)return Promise.resolve(!1);let m,E,b;d?(m=d.resolve,E=d.reject,b=d.promise):b=new Promise((H,Z)=>{m=H,E=Z});const S=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),N=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):N=0,this.setTransition({id:S,targetPageId:N,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:E,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(H=>Promise.reject(H))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new B_(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function XA(n){return"imperative"!==n}let a0=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new wl.x,this.subscription=t.events.subscribe(u=>{u instanceof zm&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){if(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:(0,p.D6c)(this.skipLocationChange),replaceUrl:(0,p.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,p.D6c)(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(wo),p.Y36(Je),p.Y36(he))},n.\u0275dir=p.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&p.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&p.uIk("target",r.target)("href",r.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),n})();class eS{buildTitle(e){let t,r=e.root;for(;void 0!==r;)t=this.getResolvedTitleForRoute(r)??t,r=r.children.find(o=>o.outlet===kt);return t}getResolvedTitleForRoute(e){return e.data[BC]}}let PR=(()=>{class n extends eS{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(id))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class tS{}class nS{preload(e,t){return It(null)}}let rS=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(vo(t=>t instanceof zm),_p(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,p.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,m=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,Wn.D)(o).pipe((0,Ih.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):It(null);const u=o.pipe((0,li.z)(d=>null===d?It(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,Wn.D)([u,d]).pipe((0,Ih.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(wo),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(tS),p.LFG($C))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),GC=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof eI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof zm&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof j_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new j_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Tp=new p.OlP("ROUTER_CONFIGURATION"),iS=new p.OlP("ROUTER_FORROOT_GUARD"),LR=[we,{provide:sI,useClass:oI},{provide:wo,useFactory:function $R(n,e,t,r,o,u,d={},m,E,b,S){const N=new wo(null,n,e,t,r,o,bC(u));return b&&(N.urlHandlingStrategy=b),S&&(N.routeReuseStrategy=S),N.titleStrategy=E??m,function HR(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,N),N},deps:[sI,e0,we,p.zs3,p.Sil,jC,Tp,PR,[eS,new p.FiY],[class CR{},new p.FiY],[class IR{},new p.FiY]]},e0,{provide:Je,useFactory:function GR(n){return n.routerState.root},deps:[wo]},rS,nS,class FR{preload(e,t){return t().pipe(cu(()=>It(null)))}},{provide:Tp,useValue:{enableTracing:!1}},$C];function VR(){return new p.PXZ("Router",wo)}let sS=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[LR,oS(t),{provide:iS,useFactory:jR,deps:[[wo,new p.FiY,new p.tp0]]},{provide:Tp,useValue:r||{}},{provide:he,useFactory:BR,deps:[le,[new p.tBr(ze),new p.FiY],Tp]},{provide:GC,useFactory:UR,deps:[wo,Qs,Tp]},{provide:tS,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:nS},{provide:p.PXZ,multi:!0,useFactory:VR},[zC,{provide:p.ip1,multi:!0,useFactory:zR,deps:[zC]},{provide:aS,useFactory:WR,deps:[zC]},{provide:p.tb,multi:!0,useExisting:aS}]]}}static forChild(t){return{ngModule:n,providers:[oS(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(iS,8),p.LFG(wo,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function UR(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new GC(n,e,t)}function BR(n,e,t={}){return t.useHash?new De(n,e):new Qe(n,e)}function jR(n){return"guarded"}function oS(n){return[{provide:p.deG,multi:!0,useValue:n},{provide:jC,multi:!0,useValue:n}]}let zC=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new wl.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(wo),d=this.injector.get(Tp);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?It(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Tp),o=this.injector.get(rS),u=this.injector.get(GC),d=this.injector.get(wo),m=this.injector.get(p.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function zR(n){return n.appInitializer.bind(n)}function WR(n){return n.bootstrapListener.bind(n)}const aS=new p.OlP("Router Initializer");var ZR=P(4986);function WC(){return(0,cs.e)((n,e)=>{let t,r=!1;n.subscribe((0,Ai.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function YR(n,e){return n===e}P(3677);var QR=P(3942);function qC(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function uS(){if(typeof Uint8Array>"u")throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function lS(){if(!function Ty(){return typeof atob<"u"}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}class u0{constructor(e){this._delegate=e}static fromBase64String(e){return lS(),new u0(la.fromBase64String(e))}static fromUint8Array(e){return uS(),new u0(la.fromUint8Array(e))}toBase64(){return lS(),this._delegate.toBase64()}toUint8Array(){return uS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ZC(n){return function eN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class tN{enableIndexedDbPersistence(e,t){return function yE(n,e){IE(n=Ut(n,Ln));const t=yr(n),r=n._freezeSettings(),o=new s_;return vE(t,o,new Qw(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function _b(n){IE(n=Ut(n,Ln));const e=yr(n),t=n._freezeSettings(),r=new s_;return vE(e,r,new Jw(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function wb(n){if(n._initialized&&!n._terminated)throw new Me(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(r){if(!Us.V())return Promise.resolve();const o=r+"main";yield Us.delete(o)}),function(r){return t.apply(this,arguments)})(Qg(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class cS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Jo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Od("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function mb(n,e,t,r={}){var o;const u=(n=Ut(n,np))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Od("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Br.MOCK_USER;else{d=(0,xt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Me(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Br(E)}n._authCredentials=new vy(new hf(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function _E(n){return function cb(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield iE(n),t=yield Tm(n);return e.setNetworkEnabled(!0),function(r){const o=Ze(r);return o.lu.delete(0),Qf(o)}(t)}))}(yr(n=Ut(n,Ln)))}(this._delegate)}disableNetwork(){return function wE(n){return function db(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield iE(n),t=yield Tm(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(o){const u=Ze(o);u.lu.add(0),yield gl(u),u._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(yr(n=Ut(n,Ln)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,cE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Eb(n){return function(e){const t=new or;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function eb(n,e){return Kv.apply(this,arguments)}(yield l_(e),t)})),t.promise}(yr(n=Ut(n,Ln)))}(this._delegate)}onSnapshotsInSync(e){return function $E(n,e){return function pb(n,e){const t=new au(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Uc(n),o=t,Ze(r).Tu.add(o),void o.next();var r,o})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Uc(n),o=t,void Ze(r).Tu.delete(o);var r,o}))}}(yr(n=Ut(n,Ln)),xm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ym(this,fE(this._delegate,e))}catch(t){throw ds(t,"collection()","Firestore.collection()")}}doc(e){try{return new pa(this,h_(this._delegate,e))}catch(t){throw ds(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new hs(this,function pE(n,e){if(n=Ut(n,np),Am("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ui(n,null,(t=e,new al(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ds(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Ti(n,e,t){n=Ut(n,Ln);const r=Object.assign(Object.assign({},XT),t);return function(o){if(o.maxAttempts<1)throw new Me(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function aE(n,e,t){const r=new or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const o=yield(u=n,tp(u).then(d=>d.datastore));var u;new lb(n.asyncQueue,o,t,e,r).run()})),r.promise}(yr(n),o=>e(new Lb(n,o)),r)}(this._delegate,t=>e(new dS(this,t)))}batch(){return yr(this._delegate),new hS(new Pm(this._delegate,e=>vh(this._delegate,e)))}loadBundle(e){return function Rm(n,e){const t=yr(n=Ut(n,Ln)),r=new yb;return function uE(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,E=function(E,b){if(E instanceof Uint8Array)return Xw(E,b);if(E instanceof ArrayBuffer)return Xw(new Uint8Array(E),b);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new ub(E,d);var E}(t,Yf(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function ab(n,e,t){const r=Ze(n);var o;(o=(0,pe.Z)(function*(u,d,m){try{const E=yield d.getMetadata();if(yield function(H,Z){const fe=Ze(H),Fe=Er(Z.createTime);return fe.persistence.runTransaction("hasNewerBundle","readonly",Ye=>fe.Ds.getBundleMetadata(Ye,Z.id)).then(Ye=>!!Ye&&Ye.createTime.compareTo(Fe)>=0)}(u.localStore,E))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=E).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(Gv(E));const b=new YT(E,u.localStore,d.wt);let S=yield d.fc();for(;S;){const H=yield b.Nu(S);H&&m._updateProgress(H),S=yield d.fc()}const N=yield b.complete();return yield us(u,N.Mu,void 0),yield function(H,Z){const fe=Ze(H);return fe.persistence.runTransaction("Save bundle","readwrite",Fe=>fe.Ds.saveBundleMetadata(Fe,Z))}(u.localStore,E),m._completeWith(N.progress),Promise.resolve(N.Ou)}catch(E){return Od("SyncEngine",`Loading bundle failed with ${E}`),m._failWith(E),Promise.resolve(new Set)}var H}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield l_(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function ip(n,e){return function gb(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(t,r){const o=Ze(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ds.getNamedQuery(u,r))}(yield u_(n),e)}))}(yr(n=Ut(n,Ln)),e).then(t=>t?new ui(n,null,t.query):null)}(this._delegate,e).then(t=>t?new hs(this,t):null)}}class mI extends fp{constructor(e){super(),this.firestore=e}convertBytes(e){return new u0(new la(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return pa.forKey(t,this.firestore,null)}}class dS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new mI(e)}get(e){const t=Sp(e);return this._delegate.get(t).then(r=>new l0(this._firestore,new uu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Sp(e);return r?(qC("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Sp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Sp(e);return this._delegate.delete(t),this}}class hS{constructor(e){this._delegate=e}set(e,t,r){const o=Sp(e);return r?(qC("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Sp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Sp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ap{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new lp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new c0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ap.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Ap(e,new mI(e),t),o.set(t,u)),u}}Ap.INSTANCES=new WeakMap;class pa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new pa(t,new _n(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new pa(t,new _n(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ym(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ym(this.firestore,fE(this._delegate,e))}catch(t){throw ds(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,xt.m9)(e))instanceof _n&&gE(this._delegate,e)}set(e,t){t=qC("DocumentReference.set",t);try{return t?BE(this._delegate,e,t):BE(this._delegate,e)}catch(r){throw ds(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?I_(this._delegate,e):I_(this._delegate,e,t,...r)}catch(o){throw ds(o,"updateDoc()","DocumentReference.update()")}}delete(){return function jE(n){return vh(Ut(n.firestore,Ln),[new Mf(n._key,Fn.none())])}(this._delegate)}onSnapshot(...e){const t=fS(e),r=pS(e,o=>new l0(this.firestore,new uu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return D_(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function kb(n){n=Ut(n,_n);const e=Ut(n.firestore,Ln),t=yr(e),r=new zc(e);return function hb(n,e){const t=new or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(o,u,d){try{const m=yield function(E,b){const S=Ze(E);return S.persistence.runTransaction("read document","readonly",N=>S.localDocuments.getDocument(N,b))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Me(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const E=Rc(m,`Failed to get document '${u} from cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield u_(n),e,t);var r})),t.promise}(t,n._key).then(o=>new uu(e,r,n._key,o,new gh(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Pb(n){n=Ut(n,_n);const e=Ut(n.firestore,Ln);return sE(yr(e),n._key,{source:"server"}).then(t=>Fm(e,n,t))}(this._delegate):function Ob(n){n=Ut(n,_n);const e=Ut(n.firestore,Ln);return sE(yr(e),n._key).then(t=>Fm(e,n,t))}(this._delegate),t.then(r=>new l0(this.firestore,new uu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new pa(this.firestore,this._delegate.withConverter(e?Ap.getInstance(this.firestore,e):null))}}function ds(n,e,t){return n.message=n.message.replace(e,t),n}function fS(n){for(const e of n)if("object"==typeof e&&!ZC(e))return e;return{}}function pS(n,e){var t,r;let o;return o=ZC(n[0])?n[0]:ZC(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class l0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new pa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ME(this._delegate,e._delegate)}}class c0 extends l0{data(e){const t=this._delegate.data(e);return function D0(n,e){n||nt()}(void 0!==t),t}}class hs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mI(e)}where(e,t,r){try{return new hs(this.firestore,ca(this._delegate,function xb(n,e,t){const r=e,o=Nm("where",n);return new da(o,r,t)}(e,t,r)))}catch(o){throw ds(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new hs(this.firestore,ca(this._delegate,function dp(n,e="asc"){const t=e,r=Nm("orderBy",n);return new __(r,t)}(e,t)))}catch(r){throw ds(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new hs(this.firestore,ca(this._delegate,function Mb(n){return d_("limit",n),new RE("limit",n,"F")}(e)))}catch(t){throw ds(t,"limit()","Query.limit()")}}limitToLast(e){try{return new hs(this.firestore,ca(this._delegate,function Rb(n){return d_("limitToLast",n),new RE("limitToLast",n,"L")}(e)))}catch(t){throw ds(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new hs(this.firestore,ca(this._delegate,function Om(...n){return new hp("startAt",n,!0)}(...e)))}catch(t){throw ds(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new hs(this.firestore,ca(this._delegate,function Nb(...n){return new hp("startAfter",n,!1)}(...e)))}catch(t){throw ds(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new hs(this.firestore,ca(this._delegate,function OE(...n){return new NE("endBefore",n,!1)}(...e)))}catch(t){throw ds(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new hs(this.firestore,ca(this._delegate,function kE(...n){return new NE("endAt",n,!0)}(...e)))}catch(t){throw ds(t,"endAt()","Query.endAt()")}}isEqual(e){return dh(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function E_(n){n=Ut(n,ui);const e=Ut(n.firestore,Ln),t=yr(e),r=new zc(e);return function fb(n,e){const t=new or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(o,u,d){try{const m=yield Zf(o,u,!0),E=new ht(u,m.ji),b=E.Ku(m.documents),S=E.applyChanges(b,!1);d.resolve(S.snapshot)}catch(m){const E=Rc(m,`Failed to execute query '${u} against cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield u_(n),e,t);var r})),t.promise}(t,n._query).then(o=>new _l(e,r,n,o))}(this._delegate):"server"===e?.source?function UE(n){n=Ut(n,ui);const e=Ut(n.firestore,Ln),t=yr(e),r=new zc(e);return oE(t,n._query,{source:"server"}).then(o=>new _l(e,r,n,o))}(this._delegate):function VE(n){n=Ut(n,ui);const e=Ut(n.firestore,Ln),t=yr(e),r=new zc(e);return mh(n._query),oE(t,n._query).then(o=>new _l(e,r,n,o))}(this._delegate),t.then(r=>new KC(this.firestore,new _l(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=fS(e),r=pS(e,o=>new KC(this.firestore,new _l(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return D_(this._delegate,t,r)}withConverter(e){return new hs(this.firestore,this._delegate.withConverter(e?Ap.getInstance(this.firestore,e):null))}}class rN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new c0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class KC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new hs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new c0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new rN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new c0(this._firestore,r))})}isEqual(e){return ME(this._delegate,e._delegate)}}class Ym extends hs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new pa(this.firestore,e):null}doc(e){try{return new pa(this.firestore,void 0===e?h_(this._delegate):h_(this._delegate,e))}catch(t){throw ds(t,"doc()","CollectionReference.doc()")}}add(e){return function Fb(n,e){const t=Ut(n.firestore,Ln),r=h_(n),o=yh(n.converter,e);return vh(t,[fh($c(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Fn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new pa(this.firestore,t))}isEqual(e){return gE(this._delegate,e._delegate)}withConverter(e){return new Ym(this.firestore,this._delegate.withConverter(e?Ap.getInstance(this.firestore,e):null))}}function Sp(n){return Ut(n,_n)}class YC{constructor(...e){this._delegate=new mo(...e)}static documentId(){return new YC(on.keyField().canonicalString())}isEqual(e){return(e=(0,xt.m9)(e))instanceof mo&&this._delegate._internalPath.isEqual(e._internalPath)}}class xp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Vb(){return new p_("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new xp(e)}static delete(){const e=function _h(){return new op("deleteField")}();return e._methodName="FieldValue.delete",new xp(e)}static arrayUnion(...e){const t=function Ub(...n){return new bb("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new xp(t)}static arrayRemove(...e){const t=function eA(...n){return new Cb("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new xp(t)}static increment(e){const t=function tA(n){return new Tb("increment",n)}(e);return t._methodName="FieldValue.increment",new xp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const iN={Firestore:cS,GeoPoint:hh,Timestamp:An,Blob:u0,Transaction:dS,WriteBatch:hS,DocumentReference:pa,DocumentSnapshot:l0,Query:hs,QueryDocumentSnapshot:c0,QuerySnapshot:KC,CollectionReference:Ym,FieldPath:YC,FieldValue:xp,setLogLevel:function nN(n){!function I0(n){Ja.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function oN(n){(function sN(n,e){n.INTERNAL.registerComponent(new jo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},iN)))})(n,(e,t)=>new cS(e,t,new tN)),n.registerVersion("@firebase/firestore-compat","0.1.20")}(QR.Z);var aN=P(6451),yI=P(5363),uN=P(6063);class lN extends wl.x{constructor(e=1/0,t=1/0,r=uN.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let E=1;E<r.length&&r[E]<=d;E+=2)m=E;m&&r.splice(0,m+1)}}}var cN=P(3099);function gS(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,cN.B)({connector:()=>new lN(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function mS(n,e){return(0,Um.m)(e)?Bi(()=>n,e):Bi(()=>n)}var QC=P(9468);const yS=new Map,dN={activated:!1,tokenObservers:[]},hN={initialized:!1,enabled:!1};function ci(n){return yS.get(n)||dN}function pu(n,e){yS.set(n,e)}function vI(){return hN}class yN{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,pe.Z)(function*(){t.stop();try{t.pending=new xt.BH,yield function vN(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new xt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const fs=new xt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function _S(n){if(!ci(n).activated)throw fs.create("use-before-activation",{appName:n.name})}function eT(n,e){return tT.apply(this,arguments)}function tT(){return tT=(0,pe.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const Z=yield d.getHeartbeatsHeader();Z&&(u["X-Firebase-Client"]=Z)}const m={method:"POST",body:JSON.stringify(e),headers:u};let E,b;try{E=yield fetch(n,m)}catch(Z){throw fs.create("fetch-network-error",{originalErrorMessage:null===(r=Z)||void 0===r?void 0:r.message})}if(200!==E.status)throw fs.create("fetch-status-error",{httpStatus:E.status});try{b=yield E.json()}catch(Z){throw fs.create("fetch-parse-error",{originalErrorMessage:null===(o=Z)||void 0===o?void 0:o.message})}const S=b.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw fs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const N=1e3*Number(S[1]),H=Date.now();return{token:b.token,expireTimeMillis:H+N,issuedAtTimeMillis:H}}),tT.apply(this,arguments)}function IN(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const d0="firebase-app-check-store";let EI=null;function ES(){return EI||(EI=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(fs.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(d0,{keyPath:"compositeKey"})}}catch(r){e(fs.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),EI)}function nT(){return nT=(0,pe.Z)(function*(n,e){const r=(yield ES()).transaction(d0,"readwrite"),u=r.objectStore(d0).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=E=>{d()},r.onerror=E=>{var b;m(fs.create("storage-set",{originalErrorMessage:null===(b=E.target.error)||void 0===b?void 0:b.message}))}})}),nT.apply(this,arguments)}const h0=new ri.Yd("@firebase/app-check");function CS(n,e){return(0,xt.hl)()?function TN(n,e){return function IS(n,e){return nT.apply(this,arguments)}(function bS(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{h0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function TS(){return vI().enabled}function AS(){return oT.apply(this,arguments)}function oT(){return oT=(0,pe.Z)(function*(){const n=vI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),oT.apply(this,arguments)}const NN={error:"UNKNOWN_ERROR"};function ON(n){return xt.US.encodeString(JSON.stringify(n),!1)}function II(n){return aT.apply(this,arguments)}function aT(){return aT=(0,pe.Z)(function*(n,e=!1){const t=n.app;_S(t);const r=ci(t);let u,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&DI(E)&&(o=E)}if(!e&&o&&DI(o))return{token:o.token};let m,d=!1;if(TS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=eT(IN(t,yield AS()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),d=!0);const E=yield r.exchangeTokenPromise;return yield CS(t,E),pu(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),d=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?h0.warn(E.message):h0.error(E),u=E}return o?(m={token:o.token},pu(t,Object.assign(Object.assign({},r),{token:o})),yield CS(t,o)):m=PN(u),d&&xS(t,m),m}),aT.apply(this,arguments)}function lT(n,e){const t=ci(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),pu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function SS(n){const{app:e}=n,t=ci(e);let r=t.tokenRefresher;r||(r=function kN(n){const{app:e}=n;return new yN((0,pe.Z)(function*(){let r;if(r=ci(e).token?yield II(n,!0):yield II(n),r.error)throw r.error}),()=>!0,()=>{const t=ci(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),pu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function xS(n,e){const t=ci(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function DI(n){return n.expireTimeMillis-Date.now()>0}function PN(n){return{token:ON(NN),error:n}}class FN{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ci(this.app);for(const t of e)lT(this.app,t.next);return Promise.resolve()}}const LS="app-check-internal";!function YN(){(0,Ri._registerComponent)(new jo.wA("app-check",n=>function LN(n,e){return new FN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(LS).initialize()})),(0,Ri._registerComponent)(new jo.wA(LS,n=>function VN(n){return{getToken:e=>II(n,e),addTokenListener:e=>function uT(n,e,t,r){const{app:o}=n,u=ci(o),d={next:t,error:r,type:e};if(pu(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&DI(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),SS(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>SS(n))}(n,"INTERNAL",e),removeTokenListener:e=>lT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ri.registerVersion)("@firebase/app-check","0.5.10")}();class fT{constructor(){return(0,Cn.vb)("app-check")}}typeof window<"u"&&window,P(127);const US=new p.OlP("angularfire2.auth.use-emulator"),BS=new p.OlP("angularfire2.auth.settings"),jS=new p.OlP("angularfire2.auth.tenant-id"),$S=new p.OlP("angularfire2.auth.langugage-code"),HS=new p.OlP("angularfire2.auth.use-device-language"),GS=new p.OlP("angularfire.auth.persistence"),zS=(n,e,t,r,o,u,d,m)=>(0,Nn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,u&&E.useDeviceLanguage(),d)for(const[b,S]of Object.entries(d))E.settings[b]=S;return m&&E.setPersistence(m),E},[t,r,o,u,d,m]);let WS=(()=>{class n{constructor(t,r,o,u,d,m,E,b,S,N,H,Z){const fe=new wl.x,Fe=It(void 0).pipe((0,yI.Q)(d.outsideAngular),Bi(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,3677)))),(0,Ot.U)(()=>(0,Nn.on)(t,u,r)),(0,Ot.U)(Ye=>zS(Ye,u,m,b,S,N,E,H)),gS({bufferSize:1,refCount:!1}));if(Nr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=It(null);else{Fe.pipe(El()).subscribe();const At=Fe.pipe(Bi(Mt=>Mt.getRedirectResult().then(Gt=>Gt,()=>null)),Cn.iC,gS({bufferSize:1,refCount:!1})),Pt=Fe.pipe(Bi(Mt=>new lu.y(Gt=>({unsubscribe:u.runOutsideAngular(()=>Mt.onAuthStateChanged(fn=>Gt.next(fn),fn=>Gt.error(fn),()=>Gt.complete()))})))),Zt=Fe.pipe(Bi(Mt=>new lu.y(Gt=>({unsubscribe:u.runOutsideAngular(()=>Mt.onIdTokenChanged(fn=>Gt.next(fn),fn=>Gt.error(fn),()=>Gt.complete()))}))));this.authState=At.pipe(mS(Pt),(0,QC.R)(d.outsideAngular),(0,yI.Q)(d.insideAngular)),this.user=At.pipe(mS(Zt),(0,QC.R)(d.outsideAngular),(0,yI.Q)(d.insideAngular)),this.idToken=this.user.pipe(Bi(Mt=>Mt?(0,Wn.D)(Mt.getIdToken()):It(null))),this.idTokenResult=this.user.pipe(Bi(Mt=>Mt?(0,Wn.D)(Mt.getIdTokenResult()):It(null))),this.credential=(0,aN.T)(At,fe,this.authState.pipe(vo(Mt=>!Mt))).pipe((0,Ot.U)(Mt=>Mt?.user?Mt:null),(0,QC.R)(d.outsideAngular),(0,yI.Q)(d.insideAngular))}return(0,Nn.pX)(this,Fe,u,{spy:{apply:(Ye,At,Pt)=>{(Ye.startsWith("signIn")||Ye.startsWith("createUser"))&&Pt.then(Zt=>fe.next(Zt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Nn.Dh),p.LFG(Nn.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Cn.HU),p.LFG(US,8),p.LFG(BS,8),p.LFG(jS,8),p.LFG($S,8),p.LFG(HS,8),p.LFG(GS,8),p.LFG(fT,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function qS(n,e){return function n1(n,e=ZR.z){return new lu.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function gT(n,e){return qS(n,e).pipe((0,Ot.U)(t=>({payload:t,type:"query"})))}function CI(n,e){return gT(n,e).pipe(jm(void 0),WC(),(0,Ot.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const E=o.find(S=>S.doc.ref.isEqual(d.ref)),b=t?.payload.docs.find(S=>S.ref.isEqual(d.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(d.metadata)||!E&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function ZS(n,e,t){return CI(n,t).pipe($m((r,o)=>function i1(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function s1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return mT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return mT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return mT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function KR(n,e=mp.y){return n=n??YR,(0,cs.e)((t,r)=>{let o,u=!0;t.subscribe((0,Ai.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,Ot.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function mT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function KS(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class YS{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=CI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ot.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(jm(void 0),WC(),vo(([r,o])=>o.length>0||!r),(0,Ot.U)(([r,o])=>o),Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe($m((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=KS(e);return ZS(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return gT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Cn.iC)}get(e){return(0,Wn.D)(this.query.get(e)).pipe(Cn.iC)}add(e){return this.ref.add(e)}doc(e){return new QS(this.ref.doc(e),this.afs)}}class QS{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=JS(r,t);return new YS(o,u,this.afs)}snapshotChanges(){return function r1(n,e){return qS(n,e).pipe(jm(void 0),WC(),(0,Ot.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ot.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Wn.D)(this.ref.get(e)).pipe(Cn.iC)}}class o1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?CI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),vo(t=>t.length>0),Cn.iC):CI(this.query,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe($m((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=KS(e);return ZS(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return gT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Cn.iC)}get(e){return(0,Wn.D)(this.query.get(e)).pipe(Cn.iC)}}const a1=new p.OlP("angularfire2.enableFirestorePersistence"),u1=new p.OlP("angularfire2.firestore.persistenceSettings"),l1=new p.OlP("angularfire2.firestore.settings"),c1=new p.OlP("angularfire2.firestore.use-emulator");function JS(n,e=(t=>t)){return{query:e(n),ref:n}}let TI=(()=>{class n{constructor(t,r,o,u,d,m,E,b,S,N,H,Z,fe,Fe,Ye,At,Pt){this.schedulers=E;const Zt=(0,Nn.on)(t,m,r),Mt=S;N&&zS(Zt,m,H,fe,Fe,Ye,Z,At),[this.firestore,this.persistenceEnabled$]=(0,Nn.cc)(`${Zt.name}.firestore`,"AngularFirestore",Zt.name,()=>{const Gt=m.runOutsideAngular(()=>Zt.firestore());if(u&&Gt.settings(u),Mt&&Gt.useEmulator(...Mt),o&&!Nr(d)){const fn=()=>{try{return(0,Wn.D)(Gt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch($i){return typeof console<"u"&&console.warn($i),It(!1)}};return[Gt,m.runOutsideAngular(fn)]}return[Gt,It(!1)]},[u,Mt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=JS(o,r),m=this.schedulers.ngZone.run(()=>u);return new YS(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new o1(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new QS(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Nn.Dh),p.LFG(Nn.xv,8),p.LFG(a1,8),p.LFG(l1,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Cn.HU),p.LFG(u1,8),p.LFG(c1,8),p.LFG(WS,8),p.LFG(US,8),p.LFG(BS,8),p.LFG(jS,8),p.LFG($S,8),p.LFG(HS,8),p.LFG(GS,8),p.LFG(fT,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),XS=(()=>{class n{constructor(t){this.firestore=t,this.abouts=this.firestore.collection("about").valueChanges()}getAbouts(){return this.abouts}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(TI))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function d1(n,e){if(1&n&&(p.TgZ(0,"div",6)(1,"p",7),p._uU(2),p.qZA()()),2&n){const t=e.$implicit;p.xp6(2),p.hij(" ",t.text," ")}}let h1=(()=>{class n{constructor(t){this.aboutService=t,this.aboutList=[]}ngOnInit(){this.aboutService.getAbouts().subscribe(t=>{this.aboutList=t})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(XS))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-about"]],decls:8,vars:1,consts:[[1,"container",2,"margin-top","10%"],[1,"row","h-100","g-0","justify-content-center"],[1,"col-md-6",2,"background","lightgrey"],[1,"bg-300","p-4","h-100","d-flex","flex-column","justify-content-center"],[1,"fw-semi-bold","lh-sm","fs-5","fs-lg-5","fs-xl-6",2,"font-weight","bolder"],["class","container",4,"ngFor","ngForOf"],[1,"container"],[1,"mb-5","fs-8",2,"font-size","4mm"]],template:function(t,r){1&t&&(p.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),p._uU(6," Om ITCON "),p.qZA(),p.YNc(7,d1,3,1,"div",5),p.qZA()()()()()),2&t&&(p.xp6(7),p.Q6J("ngForOf",r.aboutList))},dependencies:[ys]}),n})(),yT=(()=>{class n{constructor(t){this.firestore=t,this.produkter=this.firestore.collection("produkter").valueChanges()}getProdukter(){return this.produkter}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(TI))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function f1(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"a",13),p.NdJ("click",function(){p.CHM(t);const o=p.oxw(2).$implicit,u=p.oxw();return p.KtG(u.onNavigate(o.produktlink))}),p._uU(1,"Se Mere "),p.O4$(),p.TgZ(2,"svg",14),p._UZ(3,"path",15),p.qZA()()}}function p1(n,e){if(1&n&&(p.TgZ(0,"div",7),p._UZ(1,"img",8),p.TgZ(2,"div",9)(3,"h3",10),p._uU(4),p.qZA(),p.TgZ(5,"p",11),p._uU(6),p.qZA(),p.YNc(7,f1,4,0,"a",12),p.qZA()()),2&n){const t=p.oxw().$implicit;p.xp6(1),p.MGl("src","assets/Images//Produkter/",t.imagelink,"",p.LSH),p.xp6(3),p.Oqu(t.produktnavn),p.xp6(2),p.Oqu(t.produkttext),p.xp6(1),p.Q6J("ngIf",t.produktlink)}}function g1(n,e){if(1&n&&(p.TgZ(0,"div",5),p.YNc(1,p1,8,4,"div",6),p.qZA()),2&n){const t=e.$implicit;p.xp6(1),p.Q6J("ngIf",t.visibility)}}let m1=(()=>{class n{constructor(t){this.produktService=t}ngOnInit(){this.produktService.getProdukter().subscribe(t=>{this.produktList=t.sort(function(r,o){return r.sortnumber-o.sortnumber}).filter(r=>1==r.visibility),console.log(this.produktList)})}onNavigate(t){window.open(t,"_blank")}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(yT))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-produkter"]],decls:6,vars:1,consts:[["id","produkter",1,"pb-8"],[1,"container-fluid","container-lg",2,"margin-top","10%"],[1,"fs-4","fs-lg-8","fs-md-6","fw-bold","text-center","pb-5"],[1,"row","h-100","g-2","justify-content-center"],["class","col-sm-9 col-md-4 mb-3 mb-md-0 h-100",4,"ngFor","ngForOf"],[1,"col-sm-9","col-md-4","mb-3","mb-md-0","h-100"],["class","card card-span text-black h-100",4,"ngIf"],[1,"card","card-span","text-black","h-100"],[1,"img-card","h-100",2,"max-width","100%","max-height","100%","object-fit","contain",3,"src"],[1,"card-body","px-xl-5","px-md-3","pt-0","pb-7"],[1,"fw-bold","text-1000","mt-5"],[1,"text-900","mt-3"],["class","btn btn-lg text-900 fs-5 px-0 hvr-icon-forward","role","button",3,"click",4,"ngIf"],["role","button",1,"btn","btn-lg","text-900","fs-5","px-0","hvr-icon-forward",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-right-short","hover-icon"],["fill-rule","evenodd","d","M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"]],template:function(t,r){1&t&&(p._UZ(0,"section",0),p.TgZ(1,"div",1)(2,"h1",2),p._uU(3,"Ydelser"),p.qZA(),p.TgZ(4,"div",3),p.YNc(5,g1,2,1,"div",4),p.qZA()()),2&t&&(p.xp6(5),p.Q6J("ngForOf",r.produktList))},dependencies:[ys,Kc]}),n})(),y1=(()=>{class n{constructor(t){this.produktService=t,this.produkt={}}ngOnInit(){this.produktService.getProdukter().subscribe(t=>{this.produkt=t.find(function(r){return 99==r.sortnumber})})}onNavigate(t){window.open(t,"_blank")}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(yT))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-support"]],decls:8,vars:0,consts:[[1,"py-11","bg-light-gradient","border-bottom","border-white","border-5"],[1,"bg-holder","overlay","overlay-light",2,"background-image","url('assets/Images/Produkter/TFA-mockup-1.jpg')","width","100%","height","500px","background-color","rgba(255, 255, 255, 0.6)","background-blend-mode","lighten"],[1,"container",2,"position","relative","top","50%"],[1,"row","flex-center"],[1,"col-12","mb-10"],[1,"d-flex","align-items-center","flex-column"],[1,"btn","btn-dark","btn-lg",3,"click"]],template:function(t,r){1&t&&(p.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"a",6),p.NdJ("click",function(){return r.onNavigate(r.produkt.produktlink)}),p._uU(7,"F\xe5 Hurtigt Support Her"),p.qZA()()()()()()())}}),n})(),v1=(()=>{class n{constructor(t){this.aboutService=t,this.about={}}ngOnInit(){this.aboutService.getAbouts().subscribe(t=>{this.about=t.find(function(r){return"afsnit1"==r.name})})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(XS))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-teaserabout"]],decls:12,vars:1,consts:[[1,"container",2,"margin-top","10%"],[1,"row","h-100","g-0","justify-content-center"],[1,"col-md-6",2,"background","lightgrey"],[1,"bg-300","p-4","h-100","d-flex","flex-column","justify-content-center"],[1,"fw-semi-bold","lh-sm","fs-4","fs-lg-5","fs-xl-6",2,"font-weight","bolder"],[1,"mb-5","fs-6"],[1,"d-grid","gap-2","d-md-block","text-center"],["routerLink","/about","role","button",1,"btn","btn-lg","btn-dark"]],template:function(t,r){1&t&&(p.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),p._uU(6," ITCON "),p.qZA(),p.TgZ(7,"p",5),p._uU(8),p.qZA(),p.TgZ(9,"div",6)(10,"a",7),p._uU(11,"L\xe6s Mere"),p.qZA()()()()()()()),2&t&&(p.xp6(8),p.hij(" ",r.about.text," "))},dependencies:[a0]}),n})(),_1=(()=>{class n{constructor(t){this.firestore=t,this.contacts=this.firestore.collection("contact").valueChanges()}getContacts(){return this.contacts}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(TI))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),w1=(()=>{class n{constructor(t){this.contactService=t,this.contact={}}ngOnInit(){this.contactService.getContacts().subscribe(t=>{this.contact=t[0]}),console.log(this.contact)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(_1))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-contact"]],decls:20,vars:3,consts:[["id","kontakt",1,"py-0","pt-0"],[1,"container"],[1,"border-bottom","border-3"],[1,"row","flex-center","my-3"],[1,"col-sm-6","col-lg-auto"],[1,"lh-lg","fw-bold","text-1000"],["id","contact",1,"col-sm-auto","col-lg-auto","col-md-auto","ms-auto"],[1,"text-800"],["src","assets/Images/FooterIcons/phone.svg","width","16","height","16",1,"me-3"],["src","assets/Images/FooterIcons/mail.svg","width","16","height","16",1,"me-3"],["src","assets/Images/FooterIcons/home.svg","width","16","height","16",1,"me-3"]],template:function(t,r){1&t&&(p.TgZ(0,"section",0)(1,"div",1),p._UZ(2,"div",2),p.TgZ(3,"div",3)(4,"div",4)(5,"h5",5),p._uU(6,"Kontakt"),p.qZA(),p.TgZ(7,"div",6)(8,"p",7),p._UZ(9,"img",8),p.TgZ(10,"span",7),p._uU(11),p.qZA()(),p.TgZ(12,"p",7),p._UZ(13,"img",9),p.TgZ(14,"span",7),p._uU(15),p.qZA()(),p.TgZ(16,"p",7),p._UZ(17,"img",10),p.TgZ(18,"span",7),p._uU(19),p.qZA()()()()()()()),2&t&&(p.xp6(11),p.Oqu(r.contact.tlf),p.xp6(4),p.Oqu(r.contact.email),p.xp6(4),p.Oqu(r.contact.addresse))}}),n})(),E1=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-index"]],decls:4,vars:0,template:function(t,r){1&t&&p._UZ(0,"app-support")(1,"app-teaserabout")(2,"app-produkter")(3,"app-contact")},dependencies:[m1,y1,v1,w1]}),n})(),I1=(()=>{class n{constructor(t){this.firestore=t,this.referencer=this.firestore.collection("referencer").valueChanges()}getReferencer(){return this.referencer}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(TI))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function D1(n,e){if(1&n&&(p.TgZ(0,"div",20)(1,"a",21)(2,"div",22)(3,"div",23),p._UZ(4,"img",24),p.qZA(),p._UZ(5,"div",25),p.qZA()(),p.TgZ(6,"p",26),p._uU(7),p.qZA()()),2&n){const t=e.$implicit;p.xp6(1),p.s9C("href",t.link,p.LSH),p.xp6(3),p.MGl("src","assets/Images/Referencer/",t.logopath,"",p.LSH),p.xp6(3),p.hij(" ",t.navn," ")}}function b1(n,e){if(1&n&&(p.TgZ(0,"div",20)(1,"a",27)(2,"div",22)(3,"div",23),p._UZ(4,"img",24),p.qZA(),p._UZ(5,"div",25),p.qZA()(),p.TgZ(6,"p",26),p._uU(7),p.qZA()()),2&n){const t=e.$implicit;p.xp6(1),p.s9C("href",t.link,p.LSH),p.xp6(3),p.MGl("src","assets/Images/Referencer/",t.logopath,"",p.LSH),p.xp6(3),p.hij(" ",t.navn," ")}}function C1(n,e){if(1&n&&(p.TgZ(0,"div",20)(1,"a",27)(2,"div",22)(3,"div",23),p._UZ(4,"img",24),p.qZA(),p._UZ(5,"div",25),p.qZA()(),p.TgZ(6,"p",26),p._uU(7),p.qZA()()),2&n){const t=e.$implicit;p.xp6(1),p.s9C("href",t.link,p.LSH),p.xp6(3),p.MGl("src","assets/Images/Referencer/",t.logopath,"",p.LSH),p.xp6(3),p.hij(" ",t.navn," ")}}const T1=[{path:"referencer",component:(()=>{class n{constructor(t){this.referenceService=t}ngOnInit(){this.referenceService.getReferencer().subscribe(t=>{this.multiList=t.filter(function(r){return"Multinationale kunder"==r.kategori}).sort(function(r,o){return r.sortnumber-o.sortnumber}),this.nationalList=t.filter(function(r){return"Nationale kunder"==r.kategori}).sort(function(r,o){return r.sortnumber-o.sortnumber}),this.organisationList=t.filter(function(r){return"Organisationer"==r.kategori}).sort(function(r,o){return r.sortnumber-o.sortnumber})})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(I1))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-referencer"]],decls:31,vars:3,consts:[[1,"container",2,"margin-top","10%"],[1,"row","h-100"],[1,"col-lg-7","mx-auto","text-center","mb-6"],[1,"fw-bold","fs-3","fs-lg-5","lh-sm","mb-3"],[1,"col-12"],["id","nav-tab","role","tablist",1,"nav","nav-tabs","majestic-tabs","mb-4","justify-content-center"],["id","nav-multinationale-tab","data-bs-toggle","tab","data-bs-target","#nav-multinationale","type","button","role","tab","aria-controls","nav-multinationale","aria-selected","true",1,"nav-link","active"],["id","nav-nationale-tab","data-bs-toggle","tab","data-bs-target","#nav-nationale","type","button","role","tab","aria-controls","nav-nationale","aria-selected","false",1,"nav-link"],["id","nav-org-tab","data-bs-toggle","tab","data-bs-target","#nav-org","type","button","role","tab","aria-controls","nav-org","aria-selected","false",1,"nav-link"],["id","nav-tabContent",1,"tab-content"],["id","nav-multinationale","role","tabpanel","aria-labelledby","nav-multinationale-tab",1,"tab-pane","fade","active","show"],["id","pills-tabContentMultinationale",1,"tab-content","pt-5"],["id","pills-dresses","role","tabpanel","aria-labelledby","pills-multinationale-tab",1,"tab-pane","fade","active","show"],[1,"row","h-100","justify-content-center","g-2"],["class","col-sm-9 col-md-4 mb-3 mb-md-0 h-100",4,"ngFor","ngForOf"],["id","nav-nationale","role","tabpanel","aria-labelledby","nav-nationale-tab",1,"tab-pane","fade"],["id","pills-tabContentOrg",1,"tab-content","pt-5"],["id","pills-nationale","role","tabpanel","aria-labelledby","pills-nationale-tab",1,"tab-pane","fade","show","active"],["id","nav-org","role","tabpanel","aria-labelledby","nav-org-tab",1,"tab-pane","fade"],["id","pills-Org","role","tabpanel","aria-labelledby","pills-Org-tab",1,"tab-pane","fade","show","active"],[1,"col-sm-9","col-md-4","mb-3","mb-md-0","h-100"],[3,"href"],[1,"card","border-0"],[1,"justify-content-center"],["alt","...",1,"img-fluid","h-100","logo-size","card-img-top",2,"max-width","100%","max-height","100px","object-fit","contain",3,"src"],[1,"card-body"],[1,"card-text","text-center"],["target","_blank",3,"href"]],template:function(t,r){1&t&&(p.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h5",3),p._uU(5,"Referencer"),p.qZA()(),p.TgZ(6,"div",4)(7,"nav")(8,"div",5)(9,"button",6),p._uU(10," Multinationale "),p.qZA(),p.TgZ(11,"button",7),p._uU(12," Nationale "),p.qZA(),p.TgZ(13,"button",8),p._uU(14," Organisationer "),p.qZA()(),p.TgZ(15,"div",9)(16,"div",10)(17,"div",11)(18,"div",12)(19,"div",13),p.YNc(20,D1,8,3,"div",14),p.qZA()()()(),p.TgZ(21,"div",15)(22,"div",16)(23,"div",17)(24,"div",13),p.YNc(25,b1,8,3,"div",14),p.qZA()()()(),p.TgZ(26,"div",18)(27,"div",16)(28,"div",19)(29,"div",13),p.YNc(30,C1,8,3,"div",14),p.qZA()()()()()()()()()()),2&t&&(p.xp6(20),p.Q6J("ngForOf",r.multiList),p.xp6(5),p.Q6J("ngForOf",r.nationalList),p.xp6(5),p.Q6J("ngForOf",r.organisationList))},dependencies:[ys]}),n})()},{path:"about",component:h1},{path:"",component:E1}];let A1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[sS.forRoot(T1),sS]}),n})(),S1=(()=>{class n{constructor(t){this.scroller=t}ngOnInit(){}scroll(t){this.scroller.scrollToAnchor(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Qs))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-navbar"]],decls:21,vars:0,consts:[["data-navbar-on-scroll","data-navbar-on-scroll",1,"navbar","navbar-expand-lg","navbar-light","fixed-top","py-3","d-block","bg-white","shadow-transition","backdrop",2,"background-image","none","background-color","rgba(255, 255, 255, 0.514)","transition","none 0s ease 0s"],[1,"container"],["routerLink","/","data-bs-toggle","collapse","data-bs-target",".navbar-collapse.show",1,"navbar-brand","d-inline-flex"],[1,"text-1000","fs-0","fw-bold","ms-2"],["src","assets/Images/Logo.gif",1,"img-card","h-100",2,"height","50px","width","50px"],["type","button","data-bs-toggle","collapse","data-bs-target","#ITCON","aria-controls","navbarSupportedContent","aria-expanded","true","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","ITCON",1,"navbar-collapse","collapse","border-lg-0","mt-4","mt-lg-0","order-lg-1","order-md-1","order-sm-2","order-2"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item","px-2"],["aria-current","page","routerLink","/","data-bs-toggle","collapse","data-bs-target",".navbar-collapse.show",1,"nav-link","fw-medium","active",3,"click"],["routerLink","/referencer","data-bs-toggle","collapse","data-bs-target",".navbar-collapse.show",1,"nav-link","fw-medium"],["routerLink","/about","data-bs-toggle","collapse","data-bs-target",".navbar-collapse.show",1,"nav-link","fw-medium"]],template:function(t,r){1&t&&(p.TgZ(0,"nav",0)(1,"div",1)(2,"a",2)(3,"span",3),p._UZ(4,"img",4),p.qZA()(),p.TgZ(5,"button",5),p._UZ(6,"span",6),p.qZA(),p.TgZ(7,"div",7)(8,"ul",8)(9,"li",9)(10,"a",10),p.NdJ("click",function(){return r.scroll("produkter")}),p._uU(11,"Ydelse og Produkter"),p.qZA()(),p.TgZ(12,"li",9)(13,"a",11),p._uU(14,"Referencer"),p.qZA()(),p.TgZ(15,"li",9)(16,"a",12),p._uU(17,"Om ITCON"),p.qZA()(),p.TgZ(18,"li",9)(19,"a",10),p.NdJ("click",function(){return r.scroll("kontakt")}),p._uU(20,"Kontakt"),p.qZA()()()()()())},dependencies:[a0]}),n})(),x1=(()=>{class n{constructor(){this.title="ItconAngular"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&p._UZ(0,"app-navbar")(1,"router-outlet")},dependencies:[FC,S1]}),n})(),Hx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),SO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Hx]}),n})(),xO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[SO]}),n})(),NO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[x1]}),n.\u0275inj=p.cJS({providers:[yT],imports:[rd,A1,xO,Nn.hO.initializeApp(Ul_firebase),A_]}),n})();(0,p.G48)(),Fh().bootstrapModule(NO).catch(n=>console.error(n))},5867:(st,Te,P)=>{P.d(Te,{C6:()=>p.getApps,KN:()=>p.registerVersion,Mq:()=>p.getApp});var p=P(9681);(0,p.registerVersion)("firebase","9.8.4","app")},127:(st,Te,P)=>{P.d(Te,{Z:()=>p.Z});var p=P(3942);p.Z.registerVersion("firebase","9.8.4","app-compat")},3677:(st,Te,P)=>{P.r(Te);var p=P(5861),X=P(3942),O=P(2090),ae=P(9681),te=P(655),ge=P(1877),ue=P(4859);const Se=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ze=new ge.Yd("@firebase/auth");function Qe(y,...h){ze.logLevel<=ge.in.ERROR&&ze.error(`Auth (${ae.SDK_VERSION}): ${y}`,...h)}function De(y,...h){throw Ue(y,...h)}function we(y,...h){return Ue(y,...h)}function Ee(y,h,g){const _=Object.assign(Object.assign({},Le()),{[h]:g});return new O.LL("auth","Firebase",_).create(h,{appName:y.name})}function Be(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&De(y,"argument-error"),Ee(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(y,...h){if("string"!=typeof y){const g=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(g,..._)}return he.create(y,...h)}function j(y,h,...g){if(!y)throw Ue(h,...g)}function ve(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Qe(h),new Error(h)}function W(y,h){y||ve(h)}const ne=new Map;function ee(y){W(y instanceof Function,"Expected a class definition");let h=ne.get(y);return h?(W(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ne.set(y,h),h)}function Oe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function at(){return"http:"===Bt()||"https:"===Bt()}function Bt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class tn{constructor(h,g){this.shortDelay=h,this.longDelay=g,W(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Ft(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(at()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Sn(y,h){W(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class an{static initialize(h,g,_){this.fetchImpl=h,g&&(this.headersImpl=g),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Tr=new tn(3e4,6e4);function zt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Rt(y,h,g,_){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,p.Z)(function*(y,h,g,_,A={}){return Kr(y,A,(0,p.Z)(function*(){let R={},G={};_&&("GET"===h?G=_:R={body:JSON.stringify(_)});const se=(0,O.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),ke=yield y._getAdditionalHeaders();return ke["Content-Type"]="application/json",y.languageCode&&(ke["X-Firebase-Locale"]=y.languageCode),an.fetch()(gs(y,y.config.apiHost,g,se),Object.assign({method:h,headers:ke,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Kr(y,h,g){return vr.apply(this,arguments)}function vr(){return(vr=(0,p.Z)(function*(y,h,g){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},Kt),h);try{const A=new Yr(y),R=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const G=yield R.json();if("needConfirmation"in G)throw di(y,"account-exists-with-different-credential",G);if(R.ok&&!("errorMessage"in G))return G;{const se=R.ok?G.errorMessage:G.error.message,[ke,Xe]=se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw di(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===ke)throw di(y,"email-already-in-use",G);if("USER_DISABLED"===ke)throw di(y,"user-disabled",G);const it=_[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Ee(y,it,Xe);De(y,it)}}catch(A){if(A instanceof O.ZR)throw A;De(y,"network-request-failed")}})).apply(this,arguments)}function Ar(y,h,g,_){return Si.apply(this,arguments)}function Si(){return(Si=(0,p.Z)(function*(y,h,g,_,A={}){const R=yield Rt(y,h,g,_,A);return"mfaPendingCredential"in R&&De(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function gs(y,h,g,_){const A=`${h}${g}?${_}`;return y.config.emulator?Sn(y.config,A):`${y.config.apiScheme}://${A}`}class Yr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,_)=>{this.timer=setTimeout(()=>_(we(this.auth,"network-request-failed")),Tr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function di(y,h,g){const _={appName:y.name};g.email&&(_.email=g.email),g.phoneNumber&&(_.phoneNumber=g.phoneNumber);const A=we(y,h,_);return A.customData._tokenResponse=g,A}function Qr(){return(Qr=(0,p.Z)(function*(y,h){return Rt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function bn(y,h){return En.apply(this,arguments)}function En(){return(En=(0,p.Z)(function*(y,h){return Rt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ws(y,h){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,p.Z)(function*(y,h){return Rt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function er(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Eo(){return(Eo=(0,p.Z)(function*(y,h=!1){const g=(0,O.m9)(y),_=yield g.getIdToken(h),A=je(_);j(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,G=R?.sign_in_provider;return{claims:A,token:_,authTime:er(jt(A.auth_time)),issuedAtTime:er(jt(A.iat)),expirationTime:er(jt(A.exp)),signInProvider:G||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function jt(y){return 1e3*Number(y)}function je(y){var h;const[g,_,A]=y.split(".");if(void 0===g||void 0===_||void 0===A)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,O.tV)(_);return R?JSON.parse(R):(Qe("Failed to decode base64 JWT payload"),null)}catch(R){return Qe("Caught error parsing JWT payload as JSON",null===(h=R)||void 0===h?void 0:h.toString()),null}}function Sr(y,h){return qn.apply(this,arguments)}function qn(){return(qn=(0,p.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(_){throw _ instanceof O.ZR&&wt(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function wt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Xr{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,p.Z)(function*(){yield g.iteration()}),_)}iteration(){var h=this;return(0,p.Z)(function*(){var g;try{yield h.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null===(g=_)||void 0===g?void 0:g.code)&&h.schedule(!0))}h.schedule()})()}}class tr{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=er(this.lastLoginAt),this.creationTime=er(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ei(y){return en.apply(this,arguments)}function en(){return(en=(0,p.Z)(function*(y){var h;const g=y.auth,_=yield y.getIdToken(),A=yield Sr(y,Ws(g,{idToken:_}));j(A?.users.length,g,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const G=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?K(R.providerUserInfo):[],se=Y(y.providerData,G),it=!!y.isAnonymous&&!(y.email&&R.passwordHash||se?.length),tt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:se,metadata:new tr(R.createdAt,R.lastLoginAt),isAnonymous:it};Object.assign(y,tt)})).apply(this,arguments)}function V(){return(V=(0,p.Z)(function*(y){const h=(0,O.m9)(y);yield ei(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Y(y,h){return[...y.filter(_=>!h.some(A=>A.providerId===_.providerId)),...h]}function K(y){return y.map(h=>{var{providerId:g}=h,_=(0,te._T)(h,["providerId"]);return{providerId:g,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function _e(){return(_e=(0,p.Z)(function*(y,h){const g=yield Kr(y,{},(0,p.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,G=gs(y,A,"/v1/token",`key=${R}`),se=yield y._getAdditionalHeaders();return se["Content-Type"]="application/x-www-form-urlencoded",an.fetch()(G,{method:"POST",headers:se,body:_})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Pe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){j(h.idToken,"internal-error"),j(typeof h.idToken<"u","internal-error"),j(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function gt(y){const h=je(y);return j(h,"internal-error"),j(typeof h.exp<"u","internal-error"),j(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var _=this;return(0,p.Z)(function*(){return j(!_.accessToken||_.refreshToken,h,"user-token-expired"),g||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var _=this;return(0,p.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:G}=yield function L(y,h){return _e.apply(this,arguments)}(h,g);_.updateTokensAndExpiration(A,R,Number(G))})()}updateTokensAndExpiration(h,g,_){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,g){const{refreshToken:_,accessToken:A,expirationTime:R}=g,G=new Pe;return _&&(j("string"==typeof _,"internal-error",{appName:h}),G.refreshToken=_),A&&(j("string"==typeof A,"internal-error",{appName:h}),G.accessToken=A),R&&(j("number"==typeof R,"internal-error",{appName:h}),G.expirationTime=R),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Pe,this.toJSON())}_performRefresh(){return ve("not implemented")}}function et(y,h){j("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class mt{constructor(h){var{uid:g,auth:_,stsTokenManager:A}=h,R=(0,te._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=_,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new tr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,p.Z)(function*(){const _=yield Sr(g,g.stsTokenManager.getToken(g.auth,h));return j(_,g.auth,"internal-error"),g.accessToken!==_&&(g.accessToken=_,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),_})()}getIdTokenResult(h){return function hi(y){return Eo.apply(this,arguments)}(this,h)}reload(){return function z(y){return V.apply(this,arguments)}(this)}_assign(h){this!==h&&(j(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new mt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var _=this;return(0,p.Z)(function*(){let A=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),A=!0),g&&(yield ei(_)),yield _.auth._persistUserIfCurrent(_),A&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,p.Z)(function*(){const g=yield h.getIdToken();return yield Sr(h,function ut(y,h){return Qr.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var _,A,R,G,se,ke,Xe,it;const tt=null!==(_=g.displayName)&&void 0!==_?_:void 0,Gn=null!==(A=g.email)&&void 0!==A?A:void 0,Ii=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,lf=null!==(G=g.photoURL)&&void 0!==G?G:void 0,Td=null!==(se=g.tenantId)&&void 0!==se?se:void 0,nl=null!==(ke=g._redirectEventId)&&void 0!==ke?ke:void 0,Li=null!==(Xe=g.createdAt)&&void 0!==Xe?Xe:void 0,oc=null!==(it=g.lastLoginAt)&&void 0!==it?it:void 0,{uid:Qa,emailVerified:Ad,isAnonymous:Sd,providerData:Vs,stsTokenManager:xd}=g;j(Qa&&xd,h,"internal-error");const cf=Pe.fromJSON(this.name,xd);j("string"==typeof Qa,h,"internal-error"),et(tt,h.name),et(Gn,h.name),j("boolean"==typeof Ad,h,"internal-error"),j("boolean"==typeof Sd,h,"internal-error"),et(Ii,h.name),et(lf,h.name),et(Td,h.name),et(nl,h.name),et(Li,h.name),et(oc,h.name);const is=new mt({uid:Qa,auth:h,email:Gn,emailVerified:Ad,displayName:tt,isAnonymous:Sd,photoURL:lf,phoneNumber:Ii,tenantId:Td,stsTokenManager:cf,createdAt:Li,lastLoginAt:oc});return Vs&&Array.isArray(Vs)&&(is.providerData=Vs.map(Md=>Object.assign({},Md))),nl&&(is._redirectEventId=nl),is}static _fromIdTokenResponse(h,g,_=!1){return(0,p.Z)(function*(){const A=new Pe;A.updateFromServerResponse(g);const R=new mt({uid:g.localId,auth:h,stsTokenManager:A,isAnonymous:_});return yield ei(R),R})()}}const rn=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(g,_){var A=this;return(0,p.Z)(function*(){A.storage[g]=_})()}_get(g){var _=this;return(0,p.Z)(function*(){const A=_.storage[g];return void 0===A?null:A})()}_remove(g){var _=this;return(0,p.Z)(function*(){delete _.storage[g]})()}_addListener(g,_){}_removeListener(g,_){}}return y.type="NONE",y})();function St(y,h,g){return`firebase:${y}:${h}:${g}`}class Zn{constructor(h,g,_){this.persistence=h,this.auth=g,this.userKey=_;const{config:A,name:R}=this.auth;this.fullUserKey=St(this.userKey,A.apiKey,R),this.fullPersistenceKey=St("persistence",A.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,p.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?mt._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,p.Z)(function*(){if(g.persistence===h)return;const _=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,_?g.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,_="authUser"){return(0,p.Z)(function*(){if(!g.length)return new Zn(ee(rn),h,_);const A=(yield Promise.all(g.map(function(){var Xe=(0,p.Z)(function*(it){if(yield it._isAvailable())return it});return function(it){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let R=A[0]||ee(rn);const G=St(_,h.config.apiKey,h.name);let se=null;for(const Xe of g)try{const it=yield Xe._get(G);if(it){const tt=mt._fromJSON(h,it);Xe!==R&&(se=tt),R=Xe;break}}catch{}const ke=A.filter(Xe=>Xe._shouldAllowMigration);return R._shouldAllowMigration&&ke.length?(R=ke[0],se&&(yield R._set(G,se.toJSON())),yield Promise.all(g.map(function(){var Xe=(0,p.Z)(function*(it){if(it!==R)try{yield it._remove(G)}catch{}});return function(it){return Xe.apply(this,arguments)}}())),new Zn(R,h,_)):new Zn(R,h,_)})()}}function Vt(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(xr(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(xn(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Et(h))return"Blackberry";if(Yt(h))return"Webos";if(nr(h))return"Safari";if((h.includes("chrome/")||lr(h))&&!h.includes("edge/"))return"Chrome";if($e(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function xn(y=(0,O.z$)()){return/firefox\//i.test(y)}function nr(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function lr(y=(0,O.z$)()){return/crios\//i.test(y)}function xr(y=(0,O.z$)()){return/iemobile/i.test(y)}function $e(y=(0,O.z$)()){return/android/i.test(y)}function Et(y=(0,O.z$)()){return/blackberry/i.test(y)}function Yt(y=(0,O.z$)()){return/webos/i.test(y)}function In(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function pn(y=(0,O.z$)()){return In(y)||$e(y)||Yt(y)||Et(y)||/windows phone/i.test(y)||xr(y)}function fi(y,h=[]){let g;switch(y){case"Browser":g=Vt((0,O.z$)());break;case"Worker":g=`${Vt((0,O.z$)())}-${y}`;break;default:g=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${ae.SDK_VERSION}/${_}`}class Dt{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const _=R=>new Promise((G,se)=>{try{G(h(R))}catch(ke){se(ke)}});_.onAbort=g,this.queue.push(_);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,p.Z)(function*(){var _;if(g.auth.currentUser===h)return;const A=[];try{for(const R of g.queue)yield R(h),R.onAbort&&A.push(R.onAbort)}catch(R){A.reverse();for(const G of A)try{G()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(_=R)||void 0===_?void 0:_.message})}})()}}class gu{constructor(h,g,_){this.app=h,this.heartbeatServiceProvider=g,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Do(this),this.idTokenSubscription=new Do(this),this.beforeStateQueue=new Dt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(h,g){var _=this;return g&&(this._popupRedirectResolver=ee(g)),this._initializationPromise=this.queue((0,p.Z)(function*(){var A,R;if(!_._deleted&&(_.persistenceManager=yield Zn.create(_,h),!_._deleted)){if(null!==(A=_._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(g),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,p.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,p.Z)(function*(){var _;const A=yield g.assertedPersistence.getCurrentUser();let R=A,G=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const se=null===(_=g.redirectUser)||void 0===_?void 0:_._redirectEventId,ke=R?._redirectEventId,Xe=yield g.tryRedirectSignIn(h);(!se||se===ke)&&Xe?.user&&(R=Xe.user,G=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(G)try{yield g.beforeStateQueue.runMiddleware(R)}catch(se){R=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(se))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return j(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var g=this;return(0,p.Z)(function*(){let _=null;try{_=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,p.Z)(function*(){var _;try{yield ei(h)}catch(A){if("auth/network-request-failed"!==(null===(_=A)||void 0===_?void 0:_.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function We(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,p.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,p.Z)(function*(){const _=h?(0,O.m9)(h):null;return _&&j(_.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(_&&_._clone(g))})()}_updateCurrentUser(h,g=!1){var _=this;return(0,p.Z)(function*(){if(!_._deleted)return h&&j(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),g||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,p.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,p.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,p.Z)(function*(){yield g.assertedPersistence.setPersistence(ee(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,g,_){return this.registerStateListener(this.authStateSubscription,h,g,_)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,_){return this.registerStateListener(this.idTokenSubscription,h,g,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var _=this;return(0,p.Z)(function*(){const A=yield _.getOrInitRedirectPersistenceManager(g);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,p.Z)(function*(){if(!g.redirectPersistenceManager){const _=h&&ee(h)||g._popupRedirectResolver;j(_,g,"argument-error"),g.redirectPersistenceManager=yield Zn.create(g,[ee(_._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,p.Z)(function*(){var _,A;return g._isInitialized&&(yield g.queue((0,p.Z)(function*(){}))),(null===(_=g._currentUser)||void 0===_?void 0:_._redirectEventId)===h?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,p.Z)(function*(){if(h===g.currentUser)return g.queue((0,p.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,_,A){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),G=this._isInitialized?Promise.resolve():this._initializationPromise;return j(G,this,"internal-error"),G.then(()=>R(this.currentUser)),"function"==typeof g?h.addObserver(g,_,A):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,p.Z)(function*(){g.currentUser&&g.currentUser!==h&&(g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh()),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=fi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,p.Z)(function*(){var g;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const A=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(_["X-Firebase-Client"]=A),_})()}}function gn(y){return(0,O.m9)(y)}class Do{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Un(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Gi(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class ti{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return ve("not implemented")}_getIdTokenResponse(h){return ve("not implemented")}_linkToIdToken(h,g){return ve("not implemented")}_getReauthenticationResolver(h){return ve("not implemented")}}function cr(y,h){return sn.apply(this,arguments)}function sn(){return(sn=(0,p.Z)(function*(y,h){return Rt(y,"POST","/v1/accounts:resetPassword",zt(y,h))})).apply(this,arguments)}function Zc(y,h){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,p.Z)(function*(y,h){return Rt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ma(y,h){return Co.apply(this,arguments)}function Co(){return(Co=(0,p.Z)(function*(y,h){return Rt(y,"POST","/v1/accounts:update",zt(y,h))})).apply(this,arguments)}function ys(){return(ys=(0,p.Z)(function*(y,h){return Ar(y,"POST","/v1/accounts:signInWithPassword",zt(y,h))})).apply(this,arguments)}function pi(y,h){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,p.Z)(function*(y,h){return Rt(y,"POST","/v1/accounts:sendOobCode",zt(y,h))})).apply(this,arguments)}function Kc(y,h){return dr.apply(this,arguments)}function dr(){return(dr=(0,p.Z)(function*(y,h){return pi(y,h)})).apply(this,arguments)}function Rr(y,h){return To.apply(this,arguments)}function To(){return(To=(0,p.Z)(function*(y,h){return pi(y,h)})).apply(this,arguments)}function ya(y,h){return va.apply(this,arguments)}function va(){return(va=(0,p.Z)(function*(y,h){return pi(y,h)})).apply(this,arguments)}function xi(y,h){return _a.apply(this,arguments)}function _a(){return(_a=(0,p.Z)(function*(y,h){return pi(y,h)})).apply(this,arguments)}function Tl(){return(Tl=(0,p.Z)(function*(y,h){return Ar(y,"POST","/v1/accounts:signInWithEmailLink",zt(y,h))})).apply(this,arguments)}function Yc(){return(Yc=(0,p.Z)(function*(y,h){return Ar(y,"POST","/v1/accounts:signInWithEmailLink",zt(y,h))})).apply(this,arguments)}class Al extends ti{constructor(h,g,_,A=null){super("password",_),this._email=h,this._password=g,this._tenantId=A}static _fromEmailAndPassword(h,g){return new Al(h,g,"password")}static _fromEmailAndCode(h,g,_=null){return new Al(h,g,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,p.Z)(function*(){switch(g.signInMethod){case"password":return function Zs(y,h){return ys.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Np(y,h){return Tl.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:De(h,"internal-error")}})()}_linkToIdToken(h,g){var _=this;return(0,p.Z)(function*(){switch(_.signInMethod){case"password":return Zc(h,{idToken:g,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Nh(y,h){return Yc.apply(this,arguments)}(h,{idToken:g,email:_._email,oobCode:_._password});default:De(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Kn(y,h){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,p.Z)(function*(y,h){return Ar(y,"POST","/v1/accounts:signInWithIdp",zt(y,h))})).apply(this,arguments)}class zi extends ti{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new zi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):De("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:A}=g,R=(0,te._T)(g,["providerId","signInMethod"]);if(!_||!A)return null;const G=new zi(_,A);return G.idToken=R.idToken||void 0,G.accessToken=R.accessToken||void 0,G.secret=R.secret,G.nonce=R.nonce,G.pendingToken=R.pendingToken||null,G}_getIdTokenResponse(h){return Kn(h,this.buildRequest())}_linkToIdToken(h,g){const _=this.buildRequest();return _.idToken=g,Kn(h,_)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Kn(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,O.xO)(g)}return h}}function kp(y,h){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,p.Z)(function*(y,h){return Rt(y,"POST","/v1/accounts:sendVerificationCode",zt(y,h))})).apply(this,arguments)}function vs(){return(vs=(0,p.Z)(function*(y,h){return Ar(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,h))})).apply(this,arguments)}function Xc(){return(Xc=(0,p.Z)(function*(y,h){const g=yield Ar(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,h));if(g.temporaryProof)throw di(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Fp={USER_NOT_FOUND:"user-not-found"};function mu(){return(mu=(0,p.Z)(function*(y,h){return Ar(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Fp)})).apply(this,arguments)}class Wi extends ti{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new Wi({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new Wi({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function Sl(y,h){return vs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function Pp(y,h){return Xc.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Lp(y,h){return mu.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:_,verificationCode:A}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:_,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:_,phoneNumber:A,temporaryProof:R}=h;return _||g||A||R?new Wi({verificationId:g,verificationCode:_,phoneNumber:A,temporaryProof:R}):null}}class yu{constructor(h){var g,_,A,R,G,se;const ke=(0,O.zd)((0,O.pd)(h)),Xe=null!==(g=ke.apiKey)&&void 0!==g?g:null,it=null!==(_=ke.oobCode)&&void 0!==_?_:null,tt=function Jm(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=ke.mode)&&void 0!==A?A:null);j(Xe&&it&&tt,"argument-error"),this.apiKey=Xe,this.operation=tt,this.code=it,this.continueUrl=null!==(R=ke.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(G=ke.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(se=ke.tenantId)&&void 0!==se?se:null}static parseLink(h){const g=function ed(y){const h=(0,O.zd)((0,O.pd)(y)).link,g=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||g||h||y}(h);try{return new yu(g)}catch{return null}}}let vu=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,_){return Al._fromEmailAndPassword(g,_)}static credentialWithLink(g,_){const A=yu.parseLink(_);return j(A,"argument-error"),Al._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class gi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class ws extends gi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Ao extends ws{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return j("providerId"in g&&"signInMethod"in g,"argument-error"),zi._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return j(h.idToken||h.accessToken,"argument-error"),zi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Ao.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Ao.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:_,oauthTokenSecret:A,pendingToken:R,nonce:G,providerId:se}=h;if(!_&&!A&&!g&&!R||!se)return null;try{return new Ao(se)._credential({idToken:g,accessToken:_,nonce:G,pendingToken:R})}catch{return null}}}let wa=(()=>{class y extends ws{constructor(){super("facebook.com")}static credential(g){return zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ea=(()=>{class y extends ws{constructor(){super("google.com"),this.addScope("profile")}static credential(g,_){return zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:A}=g;if(!_&&!A)return null;try{return y.credential(_,A)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),xl=(()=>{class y extends ws{constructor(){super("github.com")}static credential(g){return zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Ks extends ti{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Kn(h,this.buildRequest())}_linkToIdToken(h,g){const _=this.buildRequest();return _.idToken=g,Kn(h,_)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Kn(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:A,pendingToken:R}=g;return _&&A&&R&&_===A?new Ks(_,R):null}static _create(h,g){return new Ks(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class mn extends gi{constructor(h){j(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return mn.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return mn.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Ks.fromJSON(h);return j(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:_}=h;if(!g||!_)return null;try{return Ks._create(_,g)}catch{return null}}}let _u=(()=>{class y extends ws{constructor(){super("twitter.com")}static credential(g,_){return zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:_,oauthTokenSecret:A}=g;if(!_||!A)return null;try{return y.credential(_,A)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function wu(y,h){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,p.Z)(function*(y,h){return Ar(y,"POST","/v1/accounts:signUp",zt(y,h))})).apply(this,arguments)}class Nr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,_,A=!1){return(0,p.Z)(function*(){const R=yield mt._fromIdTokenResponse(h,_,A),G=Oh(_);return new Nr({user:R,providerId:G,_tokenResponse:_,operationType:g})})()}static _forOperation(h,g,_){return(0,p.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const A=Oh(_);return new Nr({user:h,providerId:A,_tokenResponse:_,operationType:g})})()}}function Oh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function td(){return(td=(0,p.Z)(function*(y){var h;const g=gn(y);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new Nr({user:g.currentUser,providerId:null,operationType:"signIn"});const _=yield wu(g,{returnSecureToken:!0}),A=yield Nr._fromIdTokenResponse(g,"signIn",_,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Qs extends O.ZR{constructor(h,g,_,A){var R;super(g.code,g.message),this.operationType=_,this.user=A,Object.setPrototypeOf(this,Qs.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,g,_,A){return new Qs(h,g,_,A)}}function kh(y,h,g,_){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Qs._fromErrorAndOperation(y,R,h,_):R})}function Qt(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function bu(){return(bu=(0,p.Z)(function*(y,h){const g=(0,O.m9)(y);yield Js(!0,g,h);const{providerUserInfo:_}=yield bn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),A=Qt(_||[]);return g.providerData=g.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function yn(y,h){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,p.Z)(function*(y,h,g=!1){const _=yield Sr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return Nr._forOperation(y,"link",_)})).apply(this,arguments)}function Js(y,h,g){return ni.apply(this,arguments)}function ni(){return(ni=(0,p.Z)(function*(y,h,g){yield ei(h);const A=!1===y?"provider-already-linked":"no-such-provider";j(Qt(h.providerData).has(g)===y,h.auth,A)})).apply(this,arguments)}function $r(y,h){return Es.apply(this,arguments)}function Es(){return(Es=(0,p.Z)(function*(y,h,g=!1){var _;const{auth:A}=y,R="reauthenticate";try{const G=yield Sr(y,kh(A,R,h,y),g);j(G.idToken,A,"internal-error");const se=je(G.idToken);j(se,A,"internal-error");const{sub:ke}=se;return j(y.uid===ke,A,"user-mismatch"),Nr._forOperation(y,R,G)}catch(G){throw"auth/user-not-found"===(null===(_=G)||void 0===_?void 0:_.code)&&De(A,"user-mismatch"),G}})).apply(this,arguments)}function So(y,h){return qi.apply(this,arguments)}function qi(){return(qi=(0,p.Z)(function*(y,h,g=!1){const _="signIn",A=yield kh(y,_,h),R=yield Nr._fromIdTokenResponse(y,_,A);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function $t(y,h){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,p.Z)(function*(y,h){return So(gn(y),h)})).apply(this,arguments)}function xo(y,h){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,p.Z)(function*(y,h){const g=(0,O.m9)(y);return yield Js(!1,g,h.providerId),yn(g,h)})).apply(this,arguments)}function Or(y,h){return Is.apply(this,arguments)}function Is(){return(Is=(0,p.Z)(function*(y,h){return $r((0,O.m9)(y),h)})).apply(this,arguments)}function Mo(y,h){return dt.apply(this,arguments)}function dt(){return(dt=(0,p.Z)(function*(y,h){return Ar(y,"POST","/v1/accounts:signInWithCustomToken",zt(y,h))})).apply(this,arguments)}function Da(){return(Da=(0,p.Z)(function*(y,h){const g=gn(y),_=yield Mo(g,{token:h,returnSecureToken:!0}),A=yield Nr._fromIdTokenResponse(g,"signIn",_);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Xs{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?ba._fromServerResponse(h,g):De(h,"internal-error")}}class ba extends Xs{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new ba(g)}}function Ca(y,h,g){var _;j((null===(_=g.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),j(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(j(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(j(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function Tu(){return(Tu=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:h};g&&Ca(_,A,g),yield Rr(_,A)})).apply(this,arguments)}function Ce(){return(Ce=(0,p.Z)(function*(y,h,g){yield cr((0,O.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function bs(){return(bs=(0,p.Z)(function*(y,h){yield ma((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function Ro(y,h){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,p.Z)(function*(y,h){const g=(0,O.m9)(y),_=yield cr(g,{oobCode:h}),A=_.requestType;switch(j(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(_.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(_.mfaInfo,g,"internal-error");default:j(_.email,g,"internal-error")}let R=null;return _.mfaInfo&&(R=Xs._fromServerResponse(gn(g),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function Zi(){return(Zi=(0,p.Z)(function*(y,h){const{data:g}=yield Ro((0,O.m9)(y),h);return g.email})).apply(this,arguments)}function Oo(){return(Oo=(0,p.Z)(function*(y,h,g){const _=gn(y),A=yield wu(_,{returnSecureToken:!0,email:h,password:g}),R=yield Nr._fromIdTokenResponse(_,"signIn",A);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}function Nl(){return(Nl=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:h};j(g.handleCodeInApp,_,"argument-error"),g&&Ca(_,A,g),yield ya(_,A)})).apply(this,arguments)}function jn(){return(jn=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y),A=vu.credentialWithLink(h,g||Oe());return j(A._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),$t(_,A)})).apply(this,arguments)}function Ki(y,h){return ko.apply(this,arguments)}function ko(){return(ko=(0,p.Z)(function*(y,h){return Rt(y,"POST","/v1/accounts:createAuthUri",zt(y,h))})).apply(this,arguments)}function yi(){return(yi=(0,p.Z)(function*(y,h){const _={identifier:h,continueUri:at()?Oe():"http://localhost"},{signinMethods:A}=yield Ki((0,O.m9)(y),_);return A||[]})).apply(this,arguments)}function Po(){return(Po=(0,p.Z)(function*(y,h){const g=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Ca(g.auth,A,h);const{email:R}=yield Kc(g.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function kl(){return(kl=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&Ca(_.auth,R,g);const{email:G}=yield xi(_.auth,R);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function Sa(y,h){return xa.apply(this,arguments)}function xa(){return(xa=(0,p.Z)(function*(y,h){return Rt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Fo(){return(Fo=(0,p.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const _=(0,O.m9)(y),R={idToken:yield _.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},G=yield Sr(_,Sa(_.auth,R));_.displayName=G.displayName||null,_.photoURL=G.photoUrl||null;const se=_.providerData.find(({providerId:ke})=>"password"===ke);se&&(se.displayName=_.displayName,se.photoURL=_.photoURL),yield _._updateTokensIfNecessary(G)})).apply(this,arguments)}function eo(y,h,g){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,p.Z)(function*(y,h,g){const{auth:_}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),g&&(R.password=g);const G=yield Sr(y,Zc(_,R));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class Vo{constructor(h,g,_={}){this.isNewUser=h,this.providerId=g,this.profile=_}}class Pl extends Vo{constructor(h,g,_,A){super(h,g,_),this.username=A}}class xu extends Vo{constructor(h,g){super(h,"facebook.com",g)}}class Fl extends Pl{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class id extends Vo{constructor(h,g){super(h,"google.com",g)}}class rr extends Pl{constructor(h,g,_){super(h,"twitter.com",g,_)}}function Ts(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function rd(y){var h,g;if(!y)return null;const{providerId:_}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const G=null===(g=null===(h=je(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(G)return new Vo(R,"anonymous"!==G&&"custom"!==G?G:null)}if(!_)return null;switch(_){case"facebook.com":return new xu(R,A);case"github.com":return new Fl(R,A);case"google.com":return new id(R,A);case"twitter.com":return new rr(R,A,y.screenName||null);case"custom":case"anonymous":return new Vo(R,null);default:return new Vo(R,_,A)}}(g)}class Yi{constructor(h,g){this.type=h,this.credential=g}static _fromIdtoken(h){return new Yi("enroll",h)}static _fromMfaPendingCredential(h){return new Yi("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,_;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Yi._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return Yi._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Na{constructor(h,g,_){this.session=h,this.hints=g,this.signInResolver=_}static _fromError(h,g){const _=gn(h),A=g.customData._serverResponse,R=(A.mfaInfo||[]).map(se=>Xs._fromServerResponse(_,se));j(A.mfaPendingCredential,_,"internal-error");const G=Yi._fromMfaPendingCredential(A.mfaPendingCredential);return new Na(G,R,function(){var se=(0,p.Z)(function*(ke){const Xe=yield ke._process(_,G);delete A.mfaInfo,delete A.mfaPendingCredential;const it=Object.assign(Object.assign({},A),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(g.operationType){case"signIn":const tt=yield Nr._fromIdTokenResponse(_,g.operationType,it);return yield _._updateCurrentUser(tt.user),tt;case"reauthenticate":return j(g.user,_,"internal-error"),Nr._forOperation(g.user,g.operationType,it);default:De(_,"internal-error")}});return function(ke){return se.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,p.Z)(function*(){return g.signInResolver(h)})()}}function Lh(y,h){return Rt(y,"POST","/v2/accounts/mfaEnrollment:start",zt(y,h))}class od{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(_=>Xs._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new od(h)}getSession(){var h=this;return(0,p.Z)(function*(){return Yi._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,g){var _=this;return(0,p.Z)(function*(){const A=h,R=yield _.getSession(),G=yield Sr(_.user,A._process(_.user.auth,R,g));return yield _.user._updateTokensIfNecessary(G),_.user.reload()})()}unenroll(h){var g=this;return(0,p.Z)(function*(){var _;const A="string"==typeof h?h:h.uid,R=yield g.user.getIdToken(),G=yield Sr(g.user,function Ru(y,h){return Rt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(y,h))}(g.user.auth,{idToken:R,mfaEnrollmentId:A}));g.enrolledFactors=g.enrolledFactors.filter(({uid:se})=>se!==A),yield g.user._updateTokensIfNecessary(G);try{yield g.user.reload()}catch(se){if("auth/user-token-expired"!==(null===(_=se)||void 0===_?void 0:_.code))throw se}})()}}const Nu=new WeakMap,to="__sak";class Vh{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(to,"1"),this.storage.removeItem(to),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ou=(()=>{class y extends Vh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,_)=>this.onStorageEvent(g,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Bp(){const y=(0,O.z$)();return nr(y)||In(y)}()&&function ga(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=pn(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const _ of Object.keys(this.listeners)){const A=this.storage.getItem(_),R=this.localCache[_];A!==R&&g(_,R,A)}}onStorageEvent(g,_=!1){if(!g.key)return void this.forAllChangedKeys((se,ke,Xe)=>{this.notifyListeners(se,Xe)});const A=g.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const se=this.storage.getItem(A);if(g.newValue!==se)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!_)return}const R=()=>{const se=this.storage.getItem(A);!_&&this.localCache[A]===se||this.notifyListeners(A,se)},G=this.storage.getItem(A);!function ms(){return(0,O.w1)()&&10===document.documentMode}()||G===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,_){this.localCache[g]=_;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,_,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:_,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,_){var A=()=>super._set,R=this;return(0,p.Z)(function*(){yield A().call(R,g,_),R.localCache[g]=JSON.stringify(_)})()}_get(g){var _=()=>super._get,A=this;return(0,p.Z)(function*(){const R=yield _().call(A,g);return A.localCache[g]=JSON.stringify(R),R})()}_remove(g){var _=()=>super._remove,A=this;return(0,p.Z)(function*(){yield _().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),vi=(()=>{class y extends Vh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,_){}_removeListener(g,_){}}return y.type="SESSION",y})();let Ul=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const _=this.receivers.find(R=>R.isListeningto(g));if(_)return _;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var _=this;return(0,p.Z)(function*(){const A=g,{eventId:R,eventType:G,data:se}=A.data,ke=_.handlersMap[G];if(!ke?.size)return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:G});const Xe=Array.from(ke).map(function(){var tt=(0,p.Z)(function*(Gn){return Gn(A.origin,se)});return function(Gn){return tt.apply(this,arguments)}}()),it=yield function ad(y){return Promise.all(y.map(function(){var h=(0,p.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(_){return{fulfilled:!1,reason:_}}});return function(g){return h.apply(this,arguments)}}()))}(Xe);A.ports[0].postMessage({status:"done",eventId:R,eventType:G,response:it})})()}_subscribe(g,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(_)}_unsubscribe(g,_){this.handlersMap[g]&&_&&this.handlersMap[g].delete(_),(!_||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Nn(y="",h=10){let g="";for(let _=0;_<h;_++)g+=Math.floor(10*Math.random());return y+g}class Cn{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,_=50){var A=this;return(0,p.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let G,se;return new Promise((ke,Xe)=>{const it=Nn("",20);R.port1.start();const tt=setTimeout(()=>{Xe(new Error("unsupported_event"))},_);se={messageChannel:R,onMessage(Gn){const Ii=Gn;if(Ii.data.eventId===it)switch(Ii.data.status){case"ack":clearTimeout(tt),G=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),ke(Ii.data.response);break;default:clearTimeout(tt),clearTimeout(G),Xe(new Error("invalid_response"))}}},A.handlers.add(se),R.port1.addEventListener("message",se.onMessage),A.target.postMessage({eventType:h,eventId:it,data:g},[R.port2])}).finally(()=>{se&&A.removeMessageHandler(se)})})()}}function un(){return window}function no(){return typeof un().WorkerGlobalScope<"u"&&"function"==typeof un().importScripts}function ku(){return(ku=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Mi="firebaseLocalStorageDb",Ss="firebaseLocalStorage",ka="fbase_key";class Bo{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Pr(y,h){return y.transaction([Ss],h?"readwrite":"readonly").objectStore(Ss)}function jl(){const y=indexedDB.open(Mi,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(Ss,{keyPath:ka})}catch(A){g(A)}}),y.addEventListener("success",(0,p.Z)(function*(){const _=y.result;_.objectStoreNames.contains(Ss)?h(_):(_.close(),yield function Fu(){const y=indexedDB.deleteDatabase(Mi);return new Bo(y).toPromise()}(),h(yield jl()))}))})}function Pa(y,h,g){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,p.Z)(function*(y,h,g){const _=Pr(y,!0).put({[ka]:h,value:g});return new Bo(_).toPromise()})).apply(this,arguments)}function pe(){return(pe=(0,p.Z)(function*(y,h){const g=Pr(y,!1).get(h),_=yield new Bo(g).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Ri(y,h){const g=Pr(y,!0).delete(h);return new Bo(g).toPromise()}const ro=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,p.Z)(function*(){return g.db||(g.db=yield jl()),g.db})()}_withRetries(g){var _=this;return(0,p.Z)(function*(){let A=0;for(;;)try{const R=yield _._openDb();return yield g(R)}catch(R){if(A++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,p.Z)(function*(){return no()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,p.Z)(function*(){g.receiver=Ul._getInstance(function jp(){return no()?self:null}()),g.receiver._subscribe("keyChanged",function(){var _=(0,p.Z)(function*(A,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(A,R){return _.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var _=(0,p.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return _.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,p.Z)(function*(){var _,A;if(g.activeServiceWorker=yield function Bh(){return ku.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Cn(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(_=R[0])||void 0===_?void 0:_.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var _=this;return(0,p.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function Pu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:g},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const g=yield jl();return yield Pa(g,to,"1"),yield Ri(g,to),!0}catch{}return!1})()}_withPendingWrite(g){var _=this;return(0,p.Z)(function*(){_.pendingWrites++;try{yield g()}finally{_.pendingWrites--}})()}_set(g,_){var A=this;return(0,p.Z)(function*(){return A._withPendingWrite((0,p.Z)(function*(){return yield A._withRetries(R=>Pa(R,g,_)),A.localCache[g]=_,A.notifyServiceWorker(g)}))})()}_get(g){var _=this;return(0,p.Z)(function*(){const A=yield _._withRetries(R=>function ud(y,h){return pe.apply(this,arguments)}(R,g));return _.localCache[g]=A,A})()}_remove(g){var _=this;return(0,p.Z)(function*(){return _._withPendingWrite((0,p.Z)(function*(){return yield _._withRetries(A=>Ri(A,g)),delete _.localCache[g],_.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,p.Z)(function*(){const _=yield g._withRetries(G=>{const se=Pr(G,!1).getAll();return new Bo(se).toPromise()});if(!_)return[];if(0!==g.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:G,value:se}of _)R.add(G),JSON.stringify(g.localCache[G])!==JSON.stringify(se)&&(g.notifyListeners(G,se),A.push(G));for(const G of Object.keys(g.localCache))g.localCache[G]&&!R.has(G)&&(g.notifyListeners(G,null),A.push(G));return A})()}notifyListeners(g,_){this.localCache[g]=_;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(_)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function ii(y,h){return Rt(y,"POST","/v2/accounts/mfaSignIn:start",zt(y,h))}function pt(){return(pt=(0,p.Z)(function*(y){return(yield Rt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Vu(y){return new Promise((h,g)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=A=>{const R=we("internal-error");R.customData=A,g(R)},_.type="text/javascript",_.charset="UTF-8",function xs(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function Ji(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ms=1e12;class $o{constructor(h){this.auth=h,this.counter=Ms,this._widgets=new Map}render(h,g){const _=this.counter;return this._widgets.set(_,new ld(h,this.auth.name,g||{})),this.counter++,_}reset(h){var g;const _=h||Ms;null===(g=this._widgets.get(_))||void 0===g||g.delete(),this._widgets.delete(_)}getResponse(h){var g;return(null===(g=this._widgets.get(h||Ms))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,p.Z)(function*(){var _;return null===(_=g._widgets.get(h||Ms))||void 0===_||_.execute(),""})()}}class ld{constructor(h,g,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;j(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Tn(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Oi=Ji("rcb"),_r=new tn(3e4,6e4);class ln{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!un().grecaptcha}load(h,g=""){return j(function jh(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(un().grecaptcha):new Promise((_,A)=>{const R=un().setTimeout(()=>{A(we(h,"network-request-failed"))},_r.get());un()[Oi]=()=>{un().clearTimeout(R),delete un()[Oi];const se=un().grecaptcha;if(!se)return void A(we(h,"internal-error"));const ke=se.render;se.render=(Xe,it)=>{const tt=ke(Xe,it);return this.counter++,tt},this.hostLanguage=g,_(se)},Vu(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Oi,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),A(we(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!un().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class cd{load(h){return(0,p.Z)(function*(){return new $o(h)})()}clearedOneInstance(){}}const Hl="recaptcha",$p={theme:"light",type:"image"};class $h{constructor(h,g=Object.assign({},$p),_){this.parameters=g,this.type=Hl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gn(_),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;j(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cd:new ln,this.validateStartingState()}verify(){var h=this;return(0,p.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(g)||new Promise(R=>{const G=se=>{!se||(h.tokenChangeListeners.delete(G),R(se))};h.tokenChangeListeners.add(G),h.isInvisible&&_.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(_=>_(g)),"function"==typeof h)h(g);else if("string"==typeof h){const _=un()[h];"function"==typeof _&&_(g)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,p.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const _=document.createElement("div");g.appendChild(_),g=_}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,p.Z)(function*(){j(at()&&!no(),h.auth,"internal-error"),yield function dd(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function Fa(y){return pt.apply(this,arguments)}(h.auth);j(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class La{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=Wi._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function hr(){return(hr=(0,p.Z)(function*(y,h,g){const _=gn(y),A=yield Va(_,h,(0,O.m9)(g));return new La(A,R=>$t(_,R))})).apply(this,arguments)}function Lt(){return(Lt=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y);yield Js(!1,_,"phone");const A=yield Va(_.auth,h,(0,O.m9)(g));return new La(A,R=>xo(_,R))})).apply(this,arguments)}function Rs(){return(Rs=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y),A=yield Va(_.auth,h,(0,O.m9)(g));return new La(A,R=>Or(_,R))})).apply(this,arguments)}function Va(y,h,g){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,p.Z)(function*(y,h,g){var _;const A=yield g.verify();try{let R;if(j("string"==typeof A,y,"argument-error"),j(g.type===Hl,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const G=R.session;if("phoneNumber"in R)return j("enroll"===G.type,y,"internal-error"),(yield Lh(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{j("signin"===G.type,y,"internal-error");const se=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return j(se,y,"missing-multi-factor-info"),(yield ii(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:se,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield kp(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return G}}finally{g._reset()}})).apply(this,arguments)}function Fr(){return(Fr=(0,p.Z)(function*(y,h){yield yn((0,O.m9)(y),h)})).apply(this,arguments)}let ki=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=gn(g)}verifyPhoneNumber(g,_){return Va(this.auth,g,(0,O.m9)(_))}static credential(g,_){return Wi._fromVerification(g,_)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:_,temporaryProof:A}=g;return _&&A?Wi._fromTokenResponse(_,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function si(y,h){return h?ee(h):(j(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Xi extends ti{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Kn(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Kn(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Kn(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function es(y){return So(y.auth,new Xi(y),y.bypassAuthState)}function ju(y){const{auth:h,user:g}=y;return j(g,h,"internal-error"),$r(g,new Xi(y),y.bypassAuthState)}function hd(y){return fd.apply(this,arguments)}function fd(){return(fd=(0,p.Z)(function*(y){const{auth:h,user:g}=y;return j(g,h,"internal-error"),yn(g,new Xi(y),y.bypassAuthState)})).apply(this,arguments)}class Hp{constructor(h,g,_,A,R=!1){this.auth=h,this.resolver=_,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,p.Z)(function*(_,A){h.pendingPromise={resolve:_,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(_,A){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,p.Z)(function*(){const{urlResponse:_,sessionId:A,postBody:R,tenantId:G,error:se,type:ke}=h;if(se)return void g.reject(se);const Xe={auth:g.auth,requestUri:_,sessionId:A,tenantId:G||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(ke)(Xe))}catch(it){g.reject(it)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return es;case"linkViaPopup":case"linkViaRedirect":return hd;case"reauthViaPopup":case"reauthViaRedirect":return ju;default:De(this.auth,"internal-error")}}resolve(h){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gl=new tn(2e3,1e4);function oi(){return(oi=(0,p.Z)(function*(y,h,g){const _=gn(y);Be(y,h,gi);const A=si(_,g);return new Ua(_,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function $u(){return($u=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y);Be(_.auth,h,gi);const A=si(_.auth,g);return new Ua(_.auth,"reauthViaPopup",h,A,_).executeNotNull()})).apply(this,arguments)}function ns(){return(ns=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y);Be(_.auth,h,gi);const A=si(_.auth,g);return new Ua(_.auth,"linkViaPopup",h,A,_).executeNotNull()})).apply(this,arguments)}let Ua=(()=>{class y extends Hp{constructor(g,_,A,R,G){super(g,_,R,G),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,p.Z)(function*(){const _=yield g.execute();return j(_,g.auth,"internal-error"),_})()}onExecution(){var g=this;return(0,p.Z)(function*(){W(1===g.filter.length,"Popup operations only handle one event");const _=Nn();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],_),g.authWindow.associatedEvent=_,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(we(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var _,A;this.pollId=null!==(A=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Gl.get())};g()}}return y.currentPopupAction=null,y})();const Hu=new Map;class Gp extends Hp{constructor(h,g,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,p.Z)(function*(){let _=Hu.get(g.auth._key());if(!_){try{const R=(yield function ir(y,h){return rs.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;_=()=>Promise.resolve(R)}catch(A){_=()=>Promise.reject(A)}Hu.set(g.auth._key(),_)}return g.bypassAuthState||Hu.set(g.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,_=this;return(0,p.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(_,h);if("unknown"!==h.type){if(h.eventId){const A=yield _.auth._redirectUserForId(h.eventId);if(A)return _.user=A,g().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function rs(){return(rs=(0,p.Z)(function*(y,h){const g=F(h),_=x(y);if(!(yield _._isAvailable()))return!1;const A="true"===(yield _._get(g));return yield _._remove(g),A})).apply(this,arguments)}function Go(y,h){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,p.Z)(function*(y,h){return x(y)._set(F(h),"true")})).apply(this,arguments)}function C(y,h){Hu.set(y._key(),h)}function x(y){return ee(y._redirectPersistence)}function F(y){return St("pendingRedirect",y.config.apiKey,y.name)}function be(){return(be=(0,p.Z)(function*(y,h,g){const _=gn(y);Be(y,h,gi);const A=si(_,g);return yield Go(A,_),A._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function yt(){return(yt=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y);Be(_.auth,h,gi);const A=si(_.auth,g);yield Go(A,_.auth);const R=yield Gu(_);return A._openRedirect(_.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Hn(){return(Hn=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y);Be(_.auth,h,gi);const A=si(_.auth,g);yield Js(!1,_,h.providerId),yield Go(A,_.auth);const R=yield Gu(_);return A._openRedirect(_.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function _i(){return(_i=(0,p.Z)(function*(y,h){return yield gn(y)._initializationPromise,Os(y,h,!1)})).apply(this,arguments)}function Os(y,h){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,p.Z)(function*(y,h,g=!1){const _=gn(y),A=si(_,h),G=yield new Gp(_,A,g).execute();return G&&!g&&(delete G.user._redirectEventId,yield _._persistUserIfCurrent(G.user),yield _._setRedirectUser(null,h)),G})).apply(this,arguments)}function Gu(y){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,p.Z)(function*(y){const h=Nn(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class dn{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(g=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function zp(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ja(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var _;if(h.error&&!ja(h)){const A=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";g.onError(we(this.auth,A))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const _=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lr(h))}saveEventToCache(h){this.cachedEventUids.add(Lr(h)),this.lastProcessedEventTime=Date.now()}}function Lr(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function ja({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function zu(y){return $a.apply(this,arguments)}function $a(){return($a=(0,p.Z)(function*(y,h={}){return Rt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Wp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ry=/^https?/;function ks(){return(ks=(0,p.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield zu(y);for(const g of h)try{if(zl(g))return}catch{}De(y,"unauthorized-domain")})).apply(this,arguments)}function zl(y){const h=Oe(),{protocol:g,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===_?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&G.hostname===_}if(!ry.test(g))return!1;if(Wp.test(y))return _===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(_)}const zh=new tn(3e4,6e4);function qp(){const y=un().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Ha=null;function Kp(y){return Ha=Ha||function Zp(y){return new Promise((h,g)=>{var _,A,R;function G(){qp(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{qp(),g(we(y,"network-request-failed"))},timeout:zh.get()})}if(null!==(A=null===(_=un().gapi)||void 0===_?void 0:_.iframes)&&void 0!==A&&A.Iframe)h(gapi.iframes.getContext());else{if(null===(R=un().gapi)||void 0===R||!R.load){const se=Ji("iframefcb");return un()[se]=()=>{gapi.load?G():g(we(y,"network-request-failed"))},Vu(`https://apis.google.com/js/api.js?onload=${se}`).catch(ke=>g(ke))}G()}}).catch(h=>{throw Ha=null,h})}(y),Ha}const Wh=new tn(5e3,15e3),zo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qp(y){const h=y.config;j(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?Sn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:h.apiKey,appName:y.name,v:ae.SDK_VERSION},A=qh.get(y.config.apiHost);A&&(_.eid=A);const R=y._getFrameworks();return R.length&&(_.fw=R.join(",")),`${g}?${(0,O.xO)(_).slice(1)}`}function Wl(){return Wl=(0,p.Z)(function*(y){const h=yield Kp(y),g=un().gapi;return j(g,y,"internal-error"),h.open({where:document.body,url:Qp(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zo,dontclear:!0},_=>new Promise(function(){var A=(0,p.Z)(function*(R,G){yield _.restyle({setHideOnLeave:!1});const se=we(y,"network-request-failed"),ke=un().setTimeout(()=>{G(se)},Wh.get());function Xe(){un().clearTimeout(ke),R(_)}_.ping(Xe).then(Xe,()=>{G(se)})});return function(R,G){return A.apply(this,arguments)}}()))}),Wl.apply(this,arguments)}const Jp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Wo{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Zl(y,h,g,_,A,R){j(y.config.authDomain,y,"auth-domain-config-required"),j(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:_,v:ae.SDK_VERSION,eventId:A};if(h instanceof gi){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[ke,Xe]of Object.entries(R||{}))G[ke]=Xe}if(h instanceof ws){const ke=h.getScopes().filter(Xe=>""!==Xe);ke.length>0&&(G.scopes=ke.join(","))}y.tenantId&&(G.tid=y.tenantId);const se=G;for(const ke of Object.keys(se))void 0===se[ke]&&delete se[ke];return`${function Vr({config:y}){return y.emulator?Sn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(se).slice(1)}`}const Kl="webStorageSupport";class Ql extends class eg{constructor(h){this.factorId=h}_process(h,g,_){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,_);case"signin":return this._finalizeSignIn(h,g.credential);default:return ve("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Ql(h)}_finalizeEnroll(h,g,_){return function As(y,h){return Rt(y,"POST","/v2/accounts/mfaEnrollment:finalize",zt(y,h))}(h,{idToken:g,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Ke(y,h){return Rt(y,"POST","/v2/accounts/mfaSignIn:finalize",zt(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let tg=(()=>{class y{constructor(){}static assertion(g){return Ql._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Qh="@firebase/auth";class za{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,p.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(_=>{var A;h((null===(A=_)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ps(){return window}function Zu(){return(Zu=(0,p.Z)(function*(y,h,g){var _;const{BuildInfo:A}=Ps();W(h.sessionId,"AuthEvent did not contain a session ID");const R=yield qo(h.sessionId),G={};return In()?G.ibi=A.packageName:$e()?G.apn=A.packageName:De(y,"operation-not-supported-in-this-environment"),A.displayName&&(G.appDisplayName=A.displayName),G.sessionId=R,Zl(y,g,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,G)})).apply(this,arguments)}function Jl(){return(Jl=(0,p.Z)(function*(y){const{BuildInfo:h}=Ps(),g={};In()?g.iosBundleId=h.packageName:$e()?g.androidPackageName=h.packageName:De(y,"operation-not-supported-in-this-environment"),yield zu(y,g)})).apply(this,arguments)}function Xh(){return(Xh=(0,p.Z)(function*(y,h,g){const{cordova:_}=Ps();let A=()=>{};try{yield new Promise((R,G)=>{let se=null;function ke(){var tt;R();const Gn=null===(tt=_.plugins.browsertab)||void 0===tt?void 0:tt.close;"function"==typeof Gn&&Gn(),"function"==typeof g?.close&&g.close()}function Xe(){se||(se=window.setTimeout(()=>{G(we(y,"redirect-cancelled-by-user"))},2e3))}function it(){"visible"===document?.visibilityState&&Xe()}h.addPassiveListener(ke),document.addEventListener("resume",Xe,!1),$e()&&document.addEventListener("visibilitychange",it,!1),A=()=>{h.removePassiveListener(ke),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",it,!1),se&&window.clearTimeout(se)}})}finally{A()}})).apply(this,arguments)}function qo(y){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,p.Z)(function*(y){const h=Ei(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ei(y){if(W(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let _=0;_<y.length;_++)g[_]=y.charCodeAt(_);return g}!function ng(y){(0,ae._registerComponent)(new ue.wA("auth",(h,{options:g})=>{const _=h.getProvider("app").getImmediate(),A=h.getProvider("heartbeat"),{apiKey:R,authDomain:G}=_.options;return((se,ke)=>{j(R&&!R.includes(":"),"invalid-api-key",{appName:se.name}),j(!G?.includes(":"),"argument-error",{appName:se.name});const Xe={apiKey:R,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fi(y)},it=new gu(se,ke,Xe);return function oe(y,h){const g=h?.persistence||[],_=(Array.isArray(g)?g:[g]).map(ee);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,h?.popupRedirectResolver)}(it,g),it})(_,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,_)=>{h.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new ue.wA("auth-internal",h=>{const g=gn(h.getProvider("auth").getImmediate());return new za(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(Qh,"0.20.4",function Jh(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(Qh,"0.20.4","esm2017")}("Browser");class Zo extends dn{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,p.Z)(function*(){yield h.initPromise})()}}function ef(y){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,p.Z)(function*(y){const h=yield Ku()._get(ec(y));return h&&(yield Ku()._remove(ec(y))),h})).apply(this,arguments)}function ao(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const _=Math.floor(Math.random()*h.length);y.push(h.charAt(_))}return y.join("")}function Ku(){return ee(Ou)}function ec(y){return St("authEvent",y.config.apiKey,y.name)}function Yo(y){if(!y?.includes("?"))return{};const[h,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function vn(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}function uo(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function tf(y=(0,O.z$)()){return!("file:"!==uo()&&"ionic:"!==uo()&&"capacitor:"!==uo()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qu(){try{const y=self.localStorage,h=Nn();if(y)return y.setItem(h,"1"),y.removeItem(h),!function ly(y=(0,O.z$)()){return function nf(){return(0,O.w1)()&&11===document?.documentMode}()||function lg(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return Fs()&&(0,O.hl)()}return!1}function Fs(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function wd(){return(function Qn(){return"http:"===uo()||"https:"===uo()}()||(0,O.ru)()||tf())&&!function uy(){return(0,O.b$)()||(0,O.UG)()}()&&Qu()&&!Fs()}function rf(){return tf()&&typeof document<"u"}function Za(){return(Za=(0,p.Z)(function*(){return!!rf()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Hr={LOCAL:"local",NONE:"none",SESSION:"session"},Ju=j,Ed="persistence";function Id(y){return rc.apply(this,arguments)}function rc(){return(rc=(0,p.Z)(function*(y){yield y._initializationPromise;const h=Dd(),g=St(Ed,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function Dd(){var y;try{return(null===(y=function nc(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const cg=j;class Ls{constructor(){this.browserResolver=ee(class qu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vi,this._completeRedirectFn=Os,this._overrideRedirectResult=C}_openPopup(h,g,_,A){var R=this;return(0,p.Z)(function*(){var G;W(null===(G=R.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const se=Zl(h,g,_,Oe(),A);return function Xp(y,h,g,_=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),G=Math.max((window.screen.availWidth-_)/2,0).toString();let se="";const ke=Object.assign(Object.assign({},Jp),{width:_.toString(),height:A.toString(),top:R,left:G}),Xe=(0,O.z$)().toLowerCase();g&&(se=lr(Xe)?"_blank":g),xn(Xe)&&(h=h||"http://localhost",ke.scrollbars="yes");const it=Object.entries(ke).reduce((Gn,[Ii,lf])=>`${Gn}${Ii}=${lf},`,"");if(function Mn(y=(0,O.z$)()){var h;return In(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Xe)&&"_self"!==se)return function Yh(y,h){const g=document.createElement("a");g.href=y,g.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(_)}(h||"",se),new Wo(null);const tt=window.open(h||"",se,it);j(tt,y,"popup-blocked");try{tt.focus()}catch{}return new Wo(tt)}(h,se,Nn())})()}_openRedirect(h,g,_,A){var R=this;return(0,p.Z)(function*(){return yield R._originValidation(h),function Qi(y){un().location.href=y}(Zl(h,g,_,Oe(),A)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:A,promise:R}=this.eventManagers[g];return A?Promise.resolve(A):(W(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(h);return this.eventManagers[g]={promise:_},_.catch(()=>{delete this.eventManagers[g]}),_}initAndGetManager(h){var g=this;return(0,p.Z)(function*(){const _=yield function Zh(y){return Wl.apply(this,arguments)}(h),A=new dn(h);return _.register("authEvent",R=>(j(R?.authEvent,h,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:A},g.iframes[h._key()]=_,A})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(Kl,{type:Kl},A=>{var R;const G=null===(R=A?.[0])||void 0===R?void 0:R[Kl];void 0!==G&&g(!!G),De(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Gh(y){return ks.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return pn()||nr()||In()}}),this.cordovaResolver=ee(class vd{constructor(){this._redirectPersistence=vi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Os,this._overrideRedirectResult=C}_initialize(h){var g=this;return(0,p.Z)(function*(){const _=h._key();let A=g.eventManagers.get(_);return A||(A=new Zo(h),g.eventManagers.set(_,A),g.attachCallbackListeners(h,A)),A})()}_openPopup(h){De(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,_,A){var R=this;return(0,p.Z)(function*(){!function oy(y){var h,g,_,A,R,G,se,ke,Xe,it;const tt=Ps();j("function"==typeof(null===(h=tt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(typeof(null===(g=tt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(R=null===(A=null===(_=tt?.cordova)||void 0===_?void 0:_.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(ke=null===(se=null===(G=tt?.cordova)||void 0===G?void 0:G.plugins)||void 0===se?void 0:se.browsertab)||void 0===ke?void 0:ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(it=null===(Xe=tt?.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===it?void 0:it.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield R._initialize(h);yield G.initialized(),G.resetRedirect(),function D(){Hu.clear()}(),yield R._originValidation(h);const se=function md(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:ao(),postBody:null,tenantId:y.tenantId,error:we(y,"no-auth-event")}}(h,_,A);yield function og(y,h){return Ku()._set(ec(y),h)}(h,se);const ke=yield function _0(y,h,g){return Zu.apply(this,arguments)}(h,se,g),Xe=yield function ig(y){const{cordova:h}=Ps();return new Promise(g=>{h.plugins.browsertab.isAvailable(_=>{let A=null;_?h.plugins.browsertab.openUrl(y):A=h.InAppBrowser.open(y,function Io(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(ke);return function sg(y,h,g){return Xh.apply(this,arguments)}(h,G,Xe)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function gd(y){return Jl.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:_,handleOpenURL:A,BuildInfo:R}=Ps(),G=setTimeout((0,p.Z)(function*(){yield ef(h),g.onEvent(vn())}),500),se=function(){var it=(0,p.Z)(function*(tt){clearTimeout(G);const Gn=yield ef(h);let Ii=null;Gn&&tt?.url&&(Ii=function ag(y,h){var g,_;const A=function Ko(y){const h=Yo(y),g=h.link?decodeURIComponent(h.link):void 0,_=Yo(g).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Yo(A).link||A||_||g||y}(h);if(A.includes("/__/auth/callback")){const R=Yo(A),G=R.firebaseError?function Yu(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,se=null===(_=null===(g=G?.code)||void 0===g?void 0:g.split("auth/"))||void 0===_?void 0:_[1],ke=se?we(se):null;return ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(Gn,tt.url)),g.onEvent(Ii||vn())});return function(Gn){return it.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,se);const ke=A,Xe=`${R.packageName.toLowerCase()}://`;Ps().handleOpenURL=function(){var it=(0,p.Z)(function*(tt){if(tt.toLowerCase().startsWith(Xe)&&se({url:tt}),"function"==typeof ke)try{ke(tt)}catch(Gn){console.error(Gn)}});return function(tt){return it.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=vi,this._completeRedirectFn=Os,this._overrideRedirectResult=C}_initialize(h){var g=this;return(0,p.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,_,A){var R=this;return(0,p.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,g,_,A)})()}_openRedirect(h,g,_,A){var R=this;return(0,p.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,g,_,A)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return rf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return cg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,p.Z)(function*(){if(h.underlyingResolver)return;const g=yield function cy(){return Za.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function dg(y){return y.unwrap()}function of(y){return el(y)}function el(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return ki.credentialFromResult(y);const g=h.providerId;if(!g||"password"===g)return null;let _;switch(g){case"google.com":_=Ea;break;case"facebook.com":_=wa;break;case"github.com":_=xl;break;case"twitter.com":_=_u;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:G,pendingToken:se,nonce:ke}=h;return R||G||A||se?se?g.startsWith("saml.")?Ks._create(g,se):zi._fromParams({providerId:g,signInMethod:g,pendingToken:se,idToken:A,accessToken:R}):new Ao(g).credential({idToken:A,accessToken:R,rawNonce:ke}):null}return y instanceof O.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function wr(y,h){return h.catch(g=>{throw g instanceof O.ZR&&function bd(y,h){var g,_;const A=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(_=h)||void 0===_?void 0:_.code))h.resolver=new ic(y,function Yn(y,h){var g;const _=(0,O.m9)(y),A=h;return j(h.customData.operationType,_,"argument-error"),j(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,_,"argument-error"),Na._fromError(_,A)}(y,h));else if(A){const R=el(h),G=h;R&&(G.credential=R,G.tenantId=A.tenantId||void 0,G.email=A.email||void 0,G.phoneNumber=A.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:of(g),additionalUserInfo:Ts(g),user:hn.getOrCreate(A)}})}function tl(y,h){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,p.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:_=>wr(y,g.confirm(_))}})).apply(this,arguments)}class ic{constructor(h,g){this.resolver=g,this.auth=function dy(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return wr(dg(this.auth),this.resolver.resolveSignIn(h))}}class hn{constructor(h){this._delegate=h,this.multiFactor=function Oa(y){const h=(0,O.m9)(y);return Nu.has(h)||Nu.set(h,od._fromUser(h)),Nu.get(h)}(h)}static getOrCreate(h){return hn.USER_MAP.has(h)||hn.USER_MAP.set(h,new hn(h)),hn.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,p.Z)(function*(){return wr(g.auth,xo(g._delegate,h))})()}linkWithPhoneNumber(h,g){var _=this;return(0,p.Z)(function*(){return tl(_.auth,function Hh(y,h,g){return Lt.apply(this,arguments)}(_._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,p.Z)(function*(){return wr(g.auth,function pd(y,h,g){return ns.apply(this,arguments)}(g._delegate,h,Ls))})()}linkWithRedirect(h){var g=this;return(0,p.Z)(function*(){return yield Id(gn(g.auth)),function rt(y,h,g){return function ct(y,h,g){return Hn.apply(this,arguments)}(y,h,g)}(g._delegate,h,Ls)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,p.Z)(function*(){return wr(g.auth,Or(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return tl(this.auth,function Uu(y,h,g){return Rs.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return wr(this.auth,function ts(y,h,g){return $u.apply(this,arguments)}(this._delegate,h,Ls))}reauthenticateWithRedirect(h){var g=this;return(0,p.Z)(function*(){return yield Id(gn(g.auth)),function Ve(y,h,g){return function lt(y,h,g){return yt.apply(this,arguments)}(y,h,g)}(g._delegate,h,Ls)})()}sendEmailVerification(h){return function Ol(y,h){return Po.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,p.Z)(function*(){return yield function Du(y,h){return bu.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function Fh(y,h){return eo((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Ma(y,h){return eo((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function fr(y,h){return Fr.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Su(y,h){return Fo.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function nd(y,h,g){return kl.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}hn.USER_MAP=new WeakMap;const Ka=j;let On=(()=>{class y{constructor(g,_){if(this.app=g,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;Ka(A,"invalid-api-key",{appName:g.name}),Ka(A,"invalid-api-key",{appName:g.name});const R=typeof window<"u"?Ls:void 0;this._delegate=_.initialize({options:{persistence:Ur(A,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Se),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?hn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,_){!function qs(y,h,g){const _=gn(y);j(_._canInitEmulator,_,"emulator-config-failed"),j(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const A=!!g?.disableWarnings,R=Un(h),{host:G,port:se}=function bo(y){const h=Un(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const _=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(_);if(A){const R=A[1];return{host:R,port:Gi(_.substr(R.length+1))}}{const[R,G]=_.split(":");return{host:R,port:Gi(G)}}}(h);_.config.emulator={url:`${R}//${G}${null===se?"":`:${se}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:G,port:se,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Mr(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,_)}applyActionCode(g){return function Nt(y,h){return bs.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Ro(this._delegate,g)}confirmPasswordReset(g,_){return function Rl(y,h,g){return Ce.apply(this,arguments)}(this._delegate,g,_)}createUserWithEmailAndPassword(g,_){var A=this;return(0,p.Z)(function*(){return wr(A._delegate,function mi(y,h,g){return Oo.apply(this,arguments)}(A._delegate,g,_))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Cs(y,h){return yi.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Ph(y,h){return"EMAIL_SIGNIN"===yu.parseLink(h)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,p.Z)(function*(){Ka(wd(),g._delegate,"operation-not-supported-in-this-environment");const _=yield function sr(y,h){return _i.apply(this,arguments)}(g._delegate,Ls);return _?wr(g._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function tc(y,h){gn(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,_,A){const{next:R,error:G,complete:se}=sc(g,_,A);return this._delegate.onAuthStateChanged(R,G,se)}onIdTokenChanged(g,_,A){const{next:R,error:G,complete:se}=sc(g,_,A);return this._delegate.onIdTokenChanged(R,G,se)}sendSignInLinkToEmail(g,_){return function Up(y,h,g){return Nl.apply(this,arguments)}(this._delegate,g,_)}sendPasswordResetEmail(g,_){return function Ta(y,h,g){return Tu.apply(this,arguments)}(this._delegate,g,_||void 0)}setPersistence(g){var _=this;return(0,p.Z)(function*(){let A;switch(function Xu(y,h){Ju(Object.values(Hr).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Ju(h!==Hr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Ju(h===Hr.NONE,y,"unsupported-persistence-type"):Fs()?Ju(h===Hr.NONE||h===Hr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Ju(h===Hr.NONE||Qu(),y,"unsupported-persistence-type")}(_._delegate,g),g){case Hr.SESSION:A=vi;break;case Hr.LOCAL:A=(yield ee(ro)._isAvailable())?ro:Ou;break;case Hr.NONE:A=rn;break;default:return De("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return wr(this._delegate,function Iu(y){return td.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return wr(this._delegate,$t(this._delegate,g))}signInWithCustomToken(g){return wr(this._delegate,function Ds(y,h){return Da.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,_){return wr(this._delegate,function Au(y,h,g){return $t((0,O.m9)(y),vu.credential(h,g))}(this._delegate,g,_))}signInWithEmailLink(g,_){return wr(this._delegate,function Aa(y,h,g){return jn.apply(this,arguments)}(this._delegate,g,_))}signInWithPhoneNumber(g,_){return tl(this._delegate,function Ho(y,h,g){return hr.apply(this,arguments)}(this._delegate,g,_))}signInWithPopup(g){var _=this;return(0,p.Z)(function*(){return Ka(wd(),_._delegate,"operation-not-supported-in-this-environment"),wr(_._delegate,function pr(y,h,g){return oi.apply(this,arguments)}(_._delegate,g,Ls))})()}signInWithRedirect(g){var _=this;return(0,p.Z)(function*(){return Ka(wd(),_._delegate,"operation-not-supported-in-this-environment"),yield Id(_._delegate),function q(y,h,g){return function re(y,h,g){return be.apply(this,arguments)}(y,h,g)}(_._delegate,g,Ls)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function No(y,h){return Zi.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Hr,y})();function sc(y,h,g){let _=y;"function"!=typeof y&&({next:_,error:h,complete:g}=y);const A=_;return{next:G=>A(G&&hn.getOrCreate(G)),error:h,complete:g}}function Ur(y,h){const g=function sf(y,h){const g=Dd();if(!g)return[];const _=St(Ed,y,h);switch(g.getItem(_)){case Hr.NONE:return[rn];case Hr.LOCAL:return[ro,vi];case Hr.SESSION:return[vi];default:return[]}}(y,h);if(typeof self<"u"&&!g.includes(ro)&&g.push(ro),typeof window<"u")for(const _ of[Ou,vi])g.includes(_)||g.push(_);return g.includes(rn)||g.push(rn),g}class Ya{constructor(){this.providerId="phone",this._delegate=new ki(dg(X.Z.auth()))}static credential(h,g){return ki.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}Ya.PHONE_SIGN_IN_METHOD=ki.PHONE_SIGN_IN_METHOD,Ya.PROVIDER_ID=ki.PROVIDER_ID;const af=j;class hy{constructor(h,g,_=X.Z.app()){var A;af(null===(A=_.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new $h(h,g,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function uf(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new On(g,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:vu,FacebookAuthProvider:wa,GithubAuthProvider:xl,GoogleAuthProvider:Ea,OAuthProvider:Ao,SAMLAuthProvider:mn,PhoneAuthProvider:Ya,PhoneMultiFactorGenerator:tg,RecaptchaVerifier:hy,TwitterAuthProvider:_u,Auth:On,AuthCredential:ti,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.17")}(X.Z)},8306:(st,Te,P)=>{P.d(Te,{y:()=>$});var p=P(2961),X=P(727),O=P(8822),ae=P(4671);var ue=P(2416),le=P(576),de=P(2806);let $=(()=>{class Ae{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const he=new Ae;return he.source=this,he.operator=Le,he}subscribe(Le,he,me){const ze=function He(Ae){return Ae&&Ae instanceof p.Lv||function Q(Ae){return Ae&&(0,le.m)(Ae.next)&&(0,le.m)(Ae.error)&&(0,le.m)(Ae.complete)}(Ae)&&(0,X.Nn)(Ae)}(Le)?Le:new p.Hp(Le,he,me);return(0,de.x)(()=>{const{operator:Qe,source:De}=this;ze.add(Qe?Qe.call(ze,De):De?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(Le){try{return this._subscribe(Le)}catch(he){Le.error(he)}}forEach(Le,he){return new(he=B(he))((me,ze)=>{const Qe=new p.Hp({next:De=>{try{Le(De)}catch(we){ze(we),Qe.unsubscribe()}},error:ze,complete:me});this.subscribe(Qe)})}_subscribe(Le){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Le)}[O.L](){return this}pipe(...Le){return function ge(Ae){return 0===Ae.length?ae.y:1===Ae.length?Ae[0]:function(Le){return Ae.reduce((he,me)=>me(he),Le)}}(Le)(this)}toPromise(Le){return new(Le=B(Le))((he,me)=>{let ze;this.subscribe(Qe=>ze=Qe,Qe=>me(Qe),()=>he(ze))})}}return Ae.create=Se=>new Ae(Se),Ae})();function B(Ae){var Se;return null!==(Se=Ae??ue.v.Promise)&&void 0!==Se?Se:Promise}},7579:(st,Te,P)=>{P.d(Te,{x:()=>ue});var p=P(8306),X=P(727);const ae=(0,P(3888).d)(de=>function(){de(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=P(8737),ge=P(2806);let ue=(()=>{class de extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const Q=new le(this,this);return Q.operator=B,Q}_throwIfClosed(){if(this.closed)throw new ae}next(B){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(B)}})}error(B){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:Q}=this;for(;Q.length;)Q.shift().error(B)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:Q,isStopped:He,observers:Ae}=this;return Q||He?X.Lc:(this.currentObservers=null,Ae.push(B),new X.w0(()=>{this.currentObservers=null,(0,te.P)(Ae,B)}))}_checkFinalizedStatuses(B){const{hasError:Q,thrownError:He,isStopped:Ae}=this;Q?B.error(He):Ae&&B.complete()}asObservable(){const B=new p.y;return B.source=this,B}}return de.create=($,B)=>new le($,B),de})();class le extends ue{constructor($,B){super(),this.destination=$,this.source=B}next($){var B,Q;null===(Q=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===Q||Q.call(B,$)}error($){var B,Q;null===(Q=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===Q||Q.call(B,$)}complete(){var $,B;null===(B=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===B||B.call($)}_subscribe($){var B,Q;return null!==(Q=null===(B=this.source)||void 0===B?void 0:B.subscribe($))&&void 0!==Q?Q:X.Lc}}},2961:(st,Te,P)=>{P.d(Te,{Hp:()=>Le,Lv:()=>Q});var p=P(576),X=P(727),O=P(2416),ae=P(7849);function te(){}const ge=de("C",void 0,void 0);function de(De,we,Ee){return{kind:De,value:we,error:Ee}}var $=P(3410),B=P(2806);class Q extends X.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,X.Nn)(we)&&we.add(this)):this.destination=Qe}static create(we,Ee,Be){return new Le(we,Ee,Be)}next(we){this.isStopped?ze(function le(De){return de("N",De,void 0)}(we),this):this._next(we)}error(we){this.isStopped?ze(function ue(De){return de("E",void 0,De)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?ze(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Ae(De,we){return He.call(De,we)}class Se{constructor(we){this.partialObserver=we}next(we){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(we)}catch(Be){he(Be)}}error(we){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(we)}catch(Be){he(Be)}else he(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(Ee){he(Ee)}}}class Le extends Q{constructor(we,Ee,Be){let Ue;if(super(),(0,p.m)(we)||!we)Ue={next:we??void 0,error:Ee??void 0,complete:Be??void 0};else{let j;this&&O.v.useDeprecatedNextContext?(j=Object.create(we),j.unsubscribe=()=>this.unsubscribe(),Ue={next:we.next&&Ae(we.next,j),error:we.error&&Ae(we.error,j),complete:we.complete&&Ae(we.complete,j)}):Ue=we}this.destination=new Se(Ue)}}function he(De){O.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(De):(0,ae.h)(De)}function ze(De,we){const{onStoppedNotification:Ee}=O.v;Ee&&$.z.setTimeout(()=>Ee(De,we))}const Qe={closed:!0,next:te,error:function me(De){throw De},complete:te}},727:(st,Te,P)=>{P.d(Te,{Lc:()=>ge,w0:()=>te,Nn:()=>ue});var p=P(576);const O=(0,P(3888).d)(de=>function(B){de(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((Q,He)=>`${He+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var ae=P(8737);class te{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Ae of B)Ae.remove(this);else B.remove(this);const{initialTeardown:Q}=this;if((0,p.m)(Q))try{Q()}catch(Ae){$=Ae instanceof O?Ae.errors:[Ae]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Ae of He)try{le(Ae)}catch(Se){$=$??[],Se instanceof O?$=[...$,...Se.errors]:$.push(Se)}}if($)throw new O($)}}add($){var B;if($&&$!==this)if(this.closed)le($);else{if($ instanceof te){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push($)}}_hasParent($){const{_parentage:B}=this;return B===$||Array.isArray(B)&&B.includes($)}_addParent($){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push($),B):B?[B,$]:$}_removeParent($){const{_parentage:B}=this;B===$?this._parentage=null:Array.isArray(B)&&(0,ae.P)(B,$)}remove($){const{_finalizers:B}=this;B&&(0,ae.P)(B,$),$ instanceof te&&$._removeParent(this)}}te.EMPTY=(()=>{const de=new te;return de.closed=!0,de})();const ge=te.EMPTY;function ue(de){return de instanceof te||de&&"closed"in de&&(0,p.m)(de.remove)&&(0,p.m)(de.add)&&(0,p.m)(de.unsubscribe)}function le(de){(0,p.m)(de)?de():de.unsubscribe()}},2416:(st,Te,P)=>{P.d(Te,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(st,Te,P)=>{P.d(Te,{E:()=>X});const X=new(P(8306).y)(te=>te.complete())},8996:(st,Te,P)=>{P.d(Te,{D:()=>we});var p=P(8421),X=P(5363),O=P(9468),ge=P(8306),le=P(2202),de=P(576),$=P(9672);function Q(Ee,Be){if(!Ee)throw new Error("Iterable cannot be null");return new ge.y(Ue=>{(0,$.f)(Ue,Be,()=>{const j=Ee[Symbol.asyncIterator]();(0,$.f)(Ue,Be,()=>{j.next().then(ve=>{ve.done?Ue.complete():Ue.next(ve.value)})},0,!0)})})}var He=P(3670),Ae=P(8239),Se=P(1144),Le=P(6495),he=P(2206),me=P(4532),ze=P(3260);function we(Ee,Be){return Be?function De(Ee,Be){if(null!=Ee){if((0,He.c)(Ee))return function ae(Ee,Be){return(0,p.Xf)(Ee).pipe((0,O.R)(Be),(0,X.Q)(Be))}(Ee,Be);if((0,Se.z)(Ee))return function ue(Ee,Be){return new ge.y(Ue=>{let j=0;return Be.schedule(function(){j===Ee.length?Ue.complete():(Ue.next(Ee[j++]),Ue.closed||this.schedule())})})}(Ee,Be);if((0,Ae.t)(Ee))return function te(Ee,Be){return(0,p.Xf)(Ee).pipe((0,O.R)(Be),(0,X.Q)(Be))}(Ee,Be);if((0,he.D)(Ee))return Q(Ee,Be);if((0,Le.T)(Ee))return function B(Ee,Be){return new ge.y(Ue=>{let j;return(0,$.f)(Ue,Be,()=>{j=Ee[le.h](),(0,$.f)(Ue,Be,()=>{let ve,W;try{({value:ve,done:W}=j.next())}catch(ne){return void Ue.error(ne)}W?Ue.complete():Ue.next(ve)},0,!0)}),()=>(0,de.m)(j?.return)&&j.return()})}(Ee,Be);if((0,ze.L)(Ee))return function Qe(Ee,Be){return Q((0,ze.Q)(Ee),Be)}(Ee,Be)}throw(0,me.z)(Ee)}(Ee,Be):(0,p.Xf)(Ee)}},8421:(st,Te,P)=>{P.d(Te,{Xf:()=>He});var p=P(655),X=P(1144),O=P(8239),ae=P(8306),te=P(3670),ge=P(2206),ue=P(4532),le=P(6495),de=P(3260),$=P(576),B=P(7849),Q=P(8822);function He(De){if(De instanceof ae.y)return De;if(null!=De){if((0,te.c)(De))return function Ae(De){return new ae.y(we=>{const Ee=De[Q.L]();if((0,$.m)(Ee.subscribe))return Ee.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,X.z)(De))return function Se(De){return new ae.y(we=>{for(let Ee=0;Ee<De.length&&!we.closed;Ee++)we.next(De[Ee]);we.complete()})}(De);if((0,O.t)(De))return function Le(De){return new ae.y(we=>{De.then(Ee=>{we.closed||(we.next(Ee),we.complete())},Ee=>we.error(Ee)).then(null,B.h)})}(De);if((0,ge.D)(De))return me(De);if((0,le.T)(De))return function he(De){return new ae.y(we=>{for(const Ee of De)if(we.next(Ee),we.closed)return;we.complete()})}(De);if((0,de.L)(De))return function ze(De){return me((0,de.Q)(De))}(De)}throw(0,ue.z)(De)}function me(De){return new ae.y(we=>{(function Qe(De,we){var Ee,Be,Ue,j;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,p.KL)(De);!(Be=yield Ee.next()).done;)if(we.next(Be.value),we.closed)return}catch(ve){Ue={error:ve}}finally{try{Be&&!Be.done&&(j=Ee.return)&&(yield j.call(Ee))}finally{if(Ue)throw Ue.error}}we.complete()})})(De,we).catch(Ee=>we.error(Ee))})}},6451:(st,Te,P)=>{P.d(Te,{T:()=>ge});var p=P(8189),X=P(8421),O=P(515),ae=P(7669),te=P(8996);function ge(...ue){const le=(0,ae.yG)(ue),de=(0,ae._6)(ue,1/0),$=ue;return $.length?1===$.length?(0,X.Xf)($[0]):(0,p.J)(de)((0,te.D)($,le)):O.E}},5403:(st,Te,P)=>{P.d(Te,{x:()=>X});var p=P(2961);function X(ae,te,ge,ue,le){return new O(ae,te,ge,ue,le)}class O extends p.Lv{constructor(te,ge,ue,le,de,$){super(te),this.onFinalize=de,this.shouldUnsubscribe=$,this._next=ge?function(B){try{ge(B)}catch(Q){te.error(Q)}}:super._next,this._error=le?function(B){try{le(B)}catch(Q){te.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(B){te.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},4004:(st,Te,P)=>{P.d(Te,{U:()=>O});var p=P(4482),X=P(5403);function O(ae,te){return(0,p.e)((ge,ue)=>{let le=0;ge.subscribe((0,X.x)(ue,de=>{ue.next(ae.call(te,de,le++))}))})}},8189:(st,Te,P)=>{P.d(Te,{J:()=>O});var p=P(5577),X=P(4671);function O(ae=1/0){return(0,p.z)(X.y,ae)}},5577:(st,Te,P)=>{P.d(Te,{z:()=>le});var p=P(4004),X=P(8421),O=P(4482),ae=P(9672),te=P(5403),ue=P(576);function le(de,$,B=1/0){return(0,ue.m)($)?le((Q,He)=>(0,p.U)((Ae,Se)=>$(Q,Ae,He,Se))((0,X.Xf)(de(Q,He))),B):("number"==typeof $&&(B=$),(0,O.e)((Q,He)=>function ge(de,$,B,Q,He,Ae,Se,Le){const he=[];let me=0,ze=0,Qe=!1;const De=()=>{Qe&&!he.length&&!me&&$.complete()},we=Be=>me<Q?Ee(Be):he.push(Be),Ee=Be=>{Ae&&$.next(Be),me++;let Ue=!1;(0,X.Xf)(B(Be,ze++)).subscribe((0,te.x)($,j=>{He?.(j),Ae?we(j):$.next(j)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(me--;he.length&&me<Q;){const j=he.shift();Se?(0,ae.f)($,Se,()=>Ee(j)):Ee(j)}De()}catch(j){$.error(j)}}))};return de.subscribe((0,te.x)($,we,()=>{Qe=!0,De()})),()=>{Le?.()}}(Q,He,de,B)))}},5363:(st,Te,P)=>{P.d(Te,{Q:()=>ae});var p=P(9672),X=P(4482),O=P(5403);function ae(te,ge=0){return(0,X.e)((ue,le)=>{ue.subscribe((0,O.x)(le,de=>(0,p.f)(le,te,()=>le.next(de),ge),()=>(0,p.f)(le,te,()=>le.complete(),ge),de=>(0,p.f)(le,te,()=>le.error(de),ge)))})}},3099:(st,Te,P)=>{P.d(Te,{B:()=>ge});var p=P(8996),X=P(5698),O=P(7579),ae=P(2961),te=P(4482);function ge(le={}){const{connector:de=(()=>new O.x),resetOnError:$=!0,resetOnComplete:B=!0,resetOnRefCountZero:Q=!0}=le;return He=>{let Ae=null,Se=null,Le=null,he=0,me=!1,ze=!1;const Qe=()=>{Se?.unsubscribe(),Se=null},De=()=>{Qe(),Ae=Le=null,me=ze=!1},we=()=>{const Ee=Ae;De(),Ee?.unsubscribe()};return(0,te.e)((Ee,Be)=>{he++,!ze&&!me&&Qe();const Ue=Le=Le??de();Be.add(()=>{he--,0===he&&!ze&&!me&&(Se=ue(we,Q))}),Ue.subscribe(Be),Ae||(Ae=new ae.Hp({next:j=>Ue.next(j),error:j=>{ze=!0,Qe(),Se=ue(De,$,j),Ue.error(j)},complete:()=>{me=!0,Qe(),Se=ue(De,B),Ue.complete()}}),(0,p.D)(Ee).subscribe(Ae))})(He)}}function ue(le,de,...$){return!0===de?(le(),null):!1===de?null:de(...$).pipe((0,X.q)(1)).subscribe(()=>le())}},9468:(st,Te,P)=>{P.d(Te,{R:()=>X});var p=P(4482);function X(O,ae=0){return(0,p.e)((te,ge)=>{ge.add(O.schedule(()=>te.subscribe(ge),ae))})}},5698:(st,Te,P)=>{P.d(Te,{q:()=>ae});var p=P(515),X=P(4482),O=P(5403);function ae(te){return te<=0?()=>p.E:(0,X.e)((ge,ue)=>{let le=0;ge.subscribe((0,O.x)(ue,de=>{++le<=te&&(ue.next(de),te<=le&&ue.complete())}))})}},8505:(st,Te,P)=>{P.d(Te,{b:()=>te});var p=P(576),X=P(4482),O=P(5403),ae=P(4671);function te(ge,ue,le){const de=(0,p.m)(ge)||ue||le?{next:ge,error:ue,complete:le}:ge;return de?(0,X.e)(($,B)=>{var Q;null===(Q=de.subscribe)||void 0===Q||Q.call(de);let He=!0;$.subscribe((0,O.x)(B,Ae=>{var Se;null===(Se=de.next)||void 0===Se||Se.call(de,Ae),B.next(Ae)},()=>{var Ae;He=!1,null===(Ae=de.complete)||void 0===Ae||Ae.call(de),B.complete()},Ae=>{var Se;He=!1,null===(Se=de.error)||void 0===Se||Se.call(de,Ae),B.error(Ae)},()=>{var Ae,Se;He&&(null===(Ae=de.unsubscribe)||void 0===Ae||Ae.call(de)),null===(Se=de.finalize)||void 0===Se||Se.call(de)}))}):ae.y}},4408:(st,Te,P)=>{P.d(Te,{o:()=>te});var p=P(727);class X extends p.w0{constructor(ue,le){super()}schedule(ue,le=0){return this}}const O={setInterval(ge,ue,...le){const{delegate:de}=O;return de?.setInterval?de.setInterval(ge,ue,...le):setInterval(ge,ue,...le)},clearInterval(ge){const{delegate:ue}=O;return(ue?.clearInterval||clearInterval)(ge)},delegate:void 0};var ae=P(8737);class te extends X{constructor(ue,le){super(ue,le),this.scheduler=ue,this.work=le,this.pending=!1}schedule(ue,le=0){if(this.closed)return this;this.state=ue;const de=this.id,$=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId($,de,le)),this.pending=!0,this.delay=le,this.id=this.id||this.requestAsyncId($,this.id,le),this}requestAsyncId(ue,le,de=0){return O.setInterval(ue.flush.bind(ue,this),de)}recycleAsyncId(ue,le,de=0){if(null!=de&&this.delay===de&&!1===this.pending)return le;O.clearInterval(le)}execute(ue,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(ue,le);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,le){let $,de=!1;try{this.work(ue)}catch(B){de=!0,$=B||new Error("Scheduled action threw falsy error")}if(de)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ue,scheduler:le}=this,{actions:de}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(de,this),null!=ue&&(this.id=this.recycleAsyncId(le,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(st,Te,P)=>{P.d(Te,{v:()=>O});var p=P(6063);class X{constructor(te,ge=X.now){this.schedulerActionCtor=te,this.now=ge}schedule(te,ge=0,ue){return new this.schedulerActionCtor(this,te).schedule(ue,ge)}}X.now=p.l.now;class O extends X{constructor(te,ge=X.now){super(te,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(te){const{actions:ge}=this;if(this._active)return void ge.push(te);let ue;this._active=!0;do{if(ue=te.execute(te.state,te.delay))break}while(te=ge.shift());if(this._active=!1,ue){for(;te=ge.shift();)te.unsubscribe();throw ue}}}},4986:(st,Te,P)=>{P.d(Te,{z:()=>O});var p=P(4408);const O=new(P(7565).v)(p.o)},6063:(st,Te,P)=>{P.d(Te,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(st,Te,P)=>{P.d(Te,{z:()=>p});const p={setTimeout(X,O,...ae){const{delegate:te}=p;return te?.setTimeout?te.setTimeout(X,O,...ae):setTimeout(X,O,...ae)},clearTimeout(X){const{delegate:O}=p;return(O?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(st,Te,P)=>{P.d(Te,{h:()=>X});const X=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(st,Te,P)=>{P.d(Te,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(st,Te,P)=>{P.d(Te,{_6:()=>ge,jO:()=>ae,yG:()=>te});var p=P(576);function O(ue){return ue[ue.length-1]}function ae(ue){return(0,p.m)(O(ue))?ue.pop():void 0}function te(ue){return function X(ue){return ue&&(0,p.m)(ue.schedule)}(O(ue))?ue.pop():void 0}function ge(ue,le){return"number"==typeof O(ue)?ue.pop():le}},8737:(st,Te,P)=>{function p(X,O){if(X){const ae=X.indexOf(O);0<=ae&&X.splice(ae,1)}}P.d(Te,{P:()=>p})},3888:(st,Te,P)=>{function p(X){const ae=X(te=>{Error.call(te),te.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}P.d(Te,{d:()=>p})},2806:(st,Te,P)=>{P.d(Te,{O:()=>ae,x:()=>O});var p=P(2416);let X=null;function O(te){if(p.v.useDeprecatedSynchronousErrorHandling){const ge=!X;if(ge&&(X={errorThrown:!1,error:null}),te(),ge){const{errorThrown:ue,error:le}=X;if(X=null,ue)throw le}}else te()}function ae(te){p.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=te)}},9672:(st,Te,P)=>{function p(X,O,ae,te=0,ge=!1){const ue=O.schedule(function(){ae(),ge?X.add(this.schedule(null,te)):this.unsubscribe()},te);if(X.add(ue),!ge)return ue}P.d(Te,{f:()=>p})},4671:(st,Te,P)=>{function p(X){return X}P.d(Te,{y:()=>p})},1144:(st,Te,P)=>{P.d(Te,{z:()=>p});const p=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(st,Te,P)=>{P.d(Te,{D:()=>X});var p=P(576);function X(O){return Symbol.asyncIterator&&(0,p.m)(O?.[Symbol.asyncIterator])}},576:(st,Te,P)=>{function p(X){return"function"==typeof X}P.d(Te,{m:()=>p})},3670:(st,Te,P)=>{P.d(Te,{c:()=>O});var p=P(8822),X=P(576);function O(ae){return(0,X.m)(ae[p.L])}},6495:(st,Te,P)=>{P.d(Te,{T:()=>O});var p=P(2202),X=P(576);function O(ae){return(0,X.m)(ae?.[p.h])}},8239:(st,Te,P)=>{P.d(Te,{t:()=>X});var p=P(576);function X(O){return(0,p.m)(O?.then)}},3260:(st,Te,P)=>{P.d(Te,{L:()=>ae,Q:()=>O});var p=P(655),X=P(576);function O(te){return(0,p.FC)(this,arguments,function*(){const ue=te.getReader();try{for(;;){const{value:le,done:de}=yield(0,p.qq)(ue.read());if(de)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(le)}}finally{ue.releaseLock()}})}function ae(te){return(0,X.m)(te?.getReader)}},4482:(st,Te,P)=>{P.d(Te,{A:()=>X,e:()=>O});var p=P(576);function X(ae){return(0,p.m)(ae?.lift)}function O(ae){return te=>{if(X(te))return te.lift(function(ge){try{return ae(ge,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(st,Te,P)=>{P.d(Te,{h:()=>O});var p=P(2416),X=P(3410);function O(ae){X.z.setTimeout(()=>{const{onUnhandledError:te}=p.v;if(!te)throw ae;te(ae)})}},4532:(st,Te,P)=>{function p(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Te,{z:()=>p})},655:(st,Te,P)=>{function ae(W,ne){var ee={};for(var ye in W)Object.prototype.hasOwnProperty.call(W,ye)&&ne.indexOf(ye)<0&&(ee[ye]=W[ye]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var oe=0;for(ye=Object.getOwnPropertySymbols(W);oe<ye.length;oe++)ne.indexOf(ye[oe])<0&&Object.prototype.propertyIsEnumerable.call(W,ye[oe])&&(ee[ye[oe]]=W[ye[oe]])}return ee}function le(W,ne,ee,ye){return new(ee||(ee=Promise))(function(Oe,at){function Bt(tn){try{We(ye.next(tn))}catch(Sn){at(Sn)}}function Ft(tn){try{We(ye.throw(tn))}catch(Sn){at(Sn)}}function We(tn){tn.done?Oe(tn.value):function oe(Oe){return Oe instanceof ee?Oe:new ee(function(at){at(Oe)})}(tn.value).then(Bt,Ft)}We((ye=ye.apply(W,ne||[])).next())})}function he(W){return this instanceof he?(this.v=W,this):new he(W)}function me(W,ne,ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,ye=ee.apply(W,ne||[]),Oe=[];return oe={},at("next"),at("throw"),at("return"),oe[Symbol.asyncIterator]=function(){return this},oe;function at(an){ye[an]&&(oe[an]=function(Kt){return new Promise(function(Tr,zt){Oe.push([an,Kt,Tr,zt])>1||Bt(an,Kt)})})}function Bt(an,Kt){try{!function Ft(an){an.value instanceof he?Promise.resolve(an.value.v).then(We,tn):Sn(Oe[0][2],an)}(ye[an](Kt))}catch(Tr){Sn(Oe[0][3],Tr)}}function We(an){Bt("next",an)}function tn(an){Bt("throw",an)}function Sn(an,Kt){an(Kt),Oe.shift(),Oe.length&&Bt(Oe[0][0],Oe[0][1])}}function Qe(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,ne=W[Symbol.asyncIterator];return ne?ne.call(W):(W=function Q(W){var ne="function"==typeof Symbol&&Symbol.iterator,ee=ne&&W[ne],ye=0;if(ee)return ee.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&ye>=W.length&&(W=void 0),{value:W&&W[ye++],done:!W}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),ee={},ye("next"),ye("throw"),ye("return"),ee[Symbol.asyncIterator]=function(){return this},ee);function ye(Oe){ee[Oe]=W[Oe]&&function(at){return new Promise(function(Bt,Ft){!function oe(Oe,at,Bt,Ft){Promise.resolve(Ft).then(function(We){Oe({value:We,done:Bt})},at)}(Bt,Ft,(at=W[Oe](at)).done,at.value)})}}}P.d(Te,{FC:()=>me,KL:()=>Qe,_T:()=>ae,mG:()=>le,qq:()=>he})},4650:(st,Te,P)=>{P.d(Te,{$8M:()=>$l,$Z:()=>V0,AFp:()=>aC,AaK:()=>le,CHM:()=>bs,CRH:()=>jE,CZH:()=>M_,CqO:()=>wv,D6c:()=>oI,EJc:()=>Wn,EpF:()=>ww,F4k:()=>Ew,FYo:()=>yE,FiY:()=>cn,G48:()=>du,GfV:()=>_E,Gpc:()=>B,JOm:()=>Li,KtG:()=>Ro,LFG:()=>rt,LSH:()=>nf,Lbi:()=>pA,MGl:()=>Jg,MMx:()=>fh,NdJ:()=>Hf,O4$:()=>Xm,OlP:()=>ln,Oqu:()=>Jf,PXZ:()=>YE,Q6J:()=>Kg,QGY:()=>th,QP$:()=>Eh,Qsj:()=>_b,R0b:()=>ls,RDi:()=>td,Rgc:()=>dp,SBq:()=>Mm,Sil:()=>lu,Suo:()=>I_,TTD:()=>gi,TgZ:()=>eh,X6Q:()=>U_,XFs:()=>ut,Xpm:()=>K,Y36:()=>fc,YKP:()=>xm,YNc:()=>pv,Yjl:()=>Zn,Yz7:()=>Kt,ZZ4:()=>Zm,_Bn:()=>go,_UZ:()=>mv,_Vd:()=>dh,_c5:()=>SC,_uU:()=>kw,aQg:()=>fu,c2e:()=>gA,cJS:()=>zt,cg1:()=>mm,dDg:()=>ZE,deG:()=>jh,dqk:()=>je,eFA:()=>vp,ekj:()=>xv,eoX:()=>Um,g9A:()=>lC,h0i:()=>Bc,hGG:()=>sI,hM9:()=>bE,hij:()=>om,iGM:()=>UE,ifc:()=>jt,ip1:()=>oC,kL8:()=>Gv,lG2:()=>St,lqb:()=>Bs,lri:()=>k_,n5z:()=>pt,oAB:()=>mt,oxw:()=>Ev,q4F:()=>wE,qLn:()=>Xu,qOj:()=>lv,qZA:()=>ur,rWj:()=>qE,s9C:()=>qf,sBO:()=>yC,sIi:()=>ou,s_b:()=>Om,soG:()=>R_,tBr:()=>Fi,tb:()=>cC,tp0:()=>Lr,uIk:()=>hl,vHH:()=>Se,vpe:()=>da,wAp:()=>ht,xp6:()=>by,z2F:()=>Gm,zSh:()=>Ty,zs3:()=>Gr});var p=P(7579),X=P(727),O=P(8306),ae=P(6451),te=P(3099);function ge(i){for(let s in i)if(i[s]===ge)return s;throw Error("Could not find renamed property on target object.")}function ue(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function le(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(le).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function de(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const $=ge({__forward_ref__:ge});function B(i){return i.__forward_ref__=B,i.toString=function(){return le(this())},i}function Q(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===B}class Se extends Error{constructor(s,a){super(function Le(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function we(i,s){throw new Se(-201,!1)}function Ft(i,s){null==i&&function We(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Kt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function zt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Rt(i){return Hi(i,Si)||Hi(i,Yr)}function Hi(i,s){return i.hasOwnProperty(s)?i[s]:null}function Ar(i){return i&&(i.hasOwnProperty(gs)||i.hasOwnProperty(di))?i[gs]:null}const Si=ge({\u0275prov:ge}),gs=ge({\u0275inj:ge}),Yr=ge({ngInjectableDef:ge}),di=ge({ngInjectorDef:ge});var ut=(()=>((ut=ut||{})[ut.Default=0]="Default",ut[ut.Host=1]="Host",ut[ut.Self=2]="Self",ut[ut.SkipSelf=4]="SkipSelf",ut[ut.Optional=8]="Optional",ut))();let Qr;function En(i){const s=Qr;return Qr=i,s}function Ws(i,s,a){const l=Rt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ut.Optional?null:void 0!==s?s:void we(le(i))}function er(i){return{toString:i}.toString()}var Vn=(()=>((Vn=Vn||{})[Vn.OnPush=0]="OnPush",Vn[Vn.Default=1]="Default",Vn))(),jt=(()=>{return(i=jt||(jt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",jt;var i})();const je=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),qn={},wt=[],Xr=ge({\u0275cmp:ge}),tr=ge({\u0275dir:ge}),ei=ge({\u0275pipe:ge}),en=ge({\u0275mod:ge}),z=ge({\u0275fac:ge}),V=ge({__NG_ELEMENT_ID__:ge});let Y=0;function K(i){return er(()=>{const a=!0===i.standalone,l={},c={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Vn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||wt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||jt.Emulated,id:"c"+Y++,styles:i.styles||wt,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,v=i.features;return c.inputs=rn(i.inputs,l),c.outputs=rn(i.outputs),v&&v.forEach(w=>w(c)),c.directiveDefs=f?()=>("function"==typeof f?f():f).map(_e).filter(Pe):null,c.pipeDefs=f?()=>("function"==typeof f?f():f).map(nr).filter(Pe):null,c})}function _e(i){return Vt(i)||xn(i)}function Pe(i){return null!==i}const et={};function mt(i){return er(()=>{const s={type:i.type,bootstrap:i.bootstrap||wt,declarations:i.declarations||wt,imports:i.imports||wt,exports:i.exports||wt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(et[i.id]=i.type),s})}function rn(i,s){if(null==i)return qn;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),a[c]=l,s&&(s[c]=f)}return a}const St=K;function Zn(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Vt(i){return i[Xr]||null}function xn(i){return i[tr]||null}function nr(i){return i[ei]||null}function lr(i,s){const a=i[en]||null;if(!a&&!0===s)throw new Error(`Type ${le(i)} does not have '\u0275mod' property.`);return a}function dr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Rr(i){return Array.isArray(i)&&!0===i[1]}function To(i){return 0!=(8&i.flags)}function ya(i){return 2==(2&i.flags)}function va(i){return 1==(1&i.flags)}function xi(i){return null!==i.template}function _a(i){return 0!=(256&i[2])}function _s(i,s){return i.hasOwnProperty(z)?i[z]:null}class vu{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function gi(){return ws}function ws(i){return i.type.prototype.ngOnChanges&&(i.setInput=wa),Ao}function Ao(){const i=xl(this),s=i?.current;if(s){const a=i.previous;if(a===qn)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function wa(i,s,a,l){const c=xl(i)||function Vp(i,s){return i[Ea]=s}(i,{previous:qn,current:null}),f=c.current||(c.current={}),v=c.previous,w=this.declaredInputs[a],I=v[w];f[w]=new vu(I&&I.currentValue,s,v===qn),i[l]=s}gi.ngInherit=!0;const Ea="__ngSimpleChanges__";function xl(i){return i[Ea]||null}let Iu;function td(i){Iu=i}function Qt(i){return!!i.listen}const Du={createRenderer:(i,s)=>function Qs(){return void 0!==Iu?Iu:typeof document<"u"?document:void 0}()};function yn(i){for(;Array.isArray(i);)i=i[0];return i}function ni(i,s){return yn(s[i])}function $r(i,s){return yn(s[i.index])}function So(i,s){return i.data[s]}function $t(i,s){const a=s[i];return dr(a)?a:a[0]}function Cu(i){return 4==(4&i[2])}function xo(i){return 64==(64&i[2])}function Or(i,s){return null==s?null:i[s]}function Is(i){i[18]=0}function Mo(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const dt={lFrame:rd(null),bindingsEnabled:!0};function Ta(){return dt.bindingsEnabled}function Ce(){return dt.lFrame.lView}function Nt(){return dt.lFrame.tView}function bs(i){return dt.lFrame.contextLView=i,i[8]}function Ro(i){return dt.lFrame.contextLView=null,i}function Rn(){let i=No();for(;null!==i&&64===i.type;)i=i.parent;return i}function No(){return dt.lFrame.currentTNode}function mi(i,s){const a=dt.lFrame;a.currentTNode=i,a.isParent=s}function Oo(){return dt.lFrame.isParent}function Cs(){return dt.lFrame.bindingIndex++}function nd(i,s){const a=dt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Sa(s)}function Sa(i){dt.lFrame.currentDirectiveIndex=i}function Su(){return dt.lFrame.currentQueryIndex}function Fo(i){dt.lFrame.currentQueryIndex=i}function Fh(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Ma(i,s,a){if(a&ut.SkipSelf){let c=s,f=i;for(;!(c=c.parent,null!==c||a&ut.Host||(c=Fh(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;s=c,i=f}const l=dt.lFrame=Lo();return l.currentTNode=s,l.lView=i,!0}function eo(i){const s=Lo(),a=i[1];dt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Lo(){const i=dt.lFrame,s=null===i?null:i.child;return null===s?rd(i):s}function rd(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Vo(){const i=dt.lFrame;return dt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Pl=Vo;function xu(){const i=Vo();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function rr(){return dt.lFrame.selectedIndex}function Ts(i){dt.lFrame.selectedIndex=i}function $n(){const i=dt.lFrame;return So(i.tView,i.selectedIndex)}function Xm(){dt.lFrame.currentNamespace="svg"}function Mu(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:M}=f;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Ra(i,s,a){Yn(i,s,3,a)}function Yi(i,s,a,l){(3&i[2])===a&&Yn(i,s,a,l)}function Na(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Yn(i,s,a,l){const f=l??-1,v=s.length-1;let w=0;for(let I=void 0!==l?65535&i[18]:0;I<v;I++)if("number"==typeof s[I+1]){if(w=s[I],null!=l&&w>=l)break}else s[I]<0&&(i[18]+=65536),(w<f||-1==f)&&(Lh(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Lh(i,s,a,l){const c=a[l]<0,f=a[l+1],w=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class Ru{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function kr(i,s,a){const l=Qt(i);let c=0;for(;c<a.length;){const f=a[c];if("number"==typeof f){if(0!==f)break;c++;const v=a[c++],w=a[c++],I=a[c++];l?i.setAttribute(s,w,I,v):s.setAttributeNS(v,w,I)}else{const v=f,w=a[++c];Uh(v)?l&&i.setProperty(s,v,w):l?i.setAttribute(s,v,w):s.setAttribute(v,w),c++}}return c}function Ou(i){return 3===i||4===i||6===i}function Uh(i){return 64===i.charCodeAt(0)}function vi(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||ad(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function ad(i,s,a,l,c){let f=0,v=i.length;if(-1===s)v=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===s){v=-1;break}if(w>s){v=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==c&&(i[f+1]=c));if(l===i[f+1])return void(i[f+2]=c)}f++,null!==l&&f++,null!==c&&f++}-1!==v&&(i.splice(v,0,s),f=v+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==c&&i.splice(f++,0,c)}function Ul(i){return-1!==i}function Nn(i){return 32767&i}function un(i,s){let a=function Cn(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Qi=!0;function no(i){const s=Qi;return Qi=i,s}let jp=0;const Mi={};function Ss(i,s){const a=Bo(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,ka(l.data,i),ka(s,null),ka(l.blueprint,null));const c=Pr(i,s),f=i.injectorIndex;if(Ul(c)){const v=Nn(c),w=un(c,s),I=w[1].data;for(let T=0;T<8;T++)s[f+T]=w[v+T]|I[v+T]}return s[f+8]=c,f}function ka(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Bo(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Pr(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){if(l=Ji(c),null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Fu(i,s,a){!function Bl(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(V)&&(l=a[V]),null==l&&(l=a[V]=jp++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Pa(i,s,a){if(a&ut.Optional)return i;we()}function Lu(i,s,a,l){if(a&ut.Optional&&void 0===l&&(l=null),0==(a&(ut.Self|ut.Host))){const c=i[9],f=En(void 0);try{return c?c.get(s,l,a&ut.Optional):Ws(s,l,a&ut.Optional)}finally{En(f)}}return Pa(l,0,a)}function ud(i,s,a,l=ut.Default,c){if(null!==i){if(1024&s[2]){const v=function Vu(i,s,a,l,c){let f=i,v=s;for(;null!==f&&null!==v&&1024&v[2]&&!(256&v[2]);){const w=pe(f,v,a,l|ut.Self,Mi);if(w!==Mi)return w;let I=f.parent;if(!I){const T=v[21];if(T){const M=T.get(a,Mi,l);if(M!==Mi)return M}I=Ji(v),v=v[15]}f=I}return c}(i,s,a,l,Mi);if(v!==Mi)return v}const f=pe(i,s,a,l,Mi);if(f!==Mi)return f}return Lu(s,a,l,c)}function pe(i,s,a,l,c){const f=function xt(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(V)?i[V]:void 0;return"number"==typeof s?s>=0?255&s:Fa:s}(a);if("function"==typeof f){if(!Ma(s,i,l))return l&ut.Host?Pa(c,0,l):Lu(s,a,l,c);try{const v=f(l);if(null!=v||l&ut.Optional)return v;we()}finally{Pl()}}else if("number"==typeof f){let v=null,w=Bo(i,s),I=-1,T=l&ut.Host?s[16][6]:null;for((-1===w||l&ut.SkipSelf)&&(I=-1===w?Pr(i,s):s[w+8],-1!==I&&ii(l,!1)?(v=s[1],w=Nn(I),s=un(I,s)):w=-1);-1!==w;){const M=s[1];if(ro(f,w,M.data)){const k=Ri(w,s,a,v,l,T);if(k!==Mi)return k}I=s[w+8],-1!==I&&ii(l,s[1].data[w+8]===T)&&ro(f,w,s)?(v=M,w=Nn(I),s=un(I,s)):w=-1}}return c}function Ri(i,s,a,l,c,f){const v=s[1],w=v.data[i+8],M=jo(w,v,a,null==l?ya(w)&&Qi:l!=v&&0!=(3&w.type),c&ut.Host&&f===w);return null!==M?ri(s,v,M,w):Mi}function jo(i,s,a,l,c){const f=i.providerIndexes,v=s.data,w=1048575&f,I=i.directiveStart,M=f>>20,U=c?w+M:i.directiveEnd;for(let J=l?w:w+M;J<U;J++){const Ie=v[J];if(J<I&&a===Ie||J>=I&&Ie.type===a)return J}if(c){const J=v[I];if(J&&xi(J)&&J.type===a)return I}return null}function ri(i,s,a,l){let c=i[a];const f=s.data;if(function od(i){return i instanceof Ru}(c)){const v=c;v.resolving&&function ze(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Se(-200,`Circular dependency in DI detected for ${i}${a}`)}(function me(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}(f[a]));const w=no(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?En(v.injectImpl):null;Ma(i,l,ut.Default);try{c=i[a]=v.factory(void 0,f,i,l),s.firstCreatePass&&a>=l.directiveStart&&function sd(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(l){const v=ws(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&En(I),no(w),v.resolving=!1,Pl()}}return c}function ro(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function ii(i,s){return!(i&ut.Self||i&ut.Host&&s)}class Ke{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return ud(this._tNode,this._lView,s,l,a)}}function Fa(){return new Ke(Rn(),Ce())}function pt(i){return er(()=>{const s=i.prototype.constructor,a=s[z]||xs(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const f=c[z]||xs(c);if(f&&f!==a)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function xs(i){return He(i)?()=>{const s=xs(Q(i));return s&&s()}:_s(i)}function Ji(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function $l(i){return function jl(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const f=a[c];if(Ou(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(f===s)return a[c+1];c+=2}}}return null}(Rn(),i)}const Ms="__parameters__";function Oi(i,s,a){return er(()=>{const l=function Tn(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...f){if(this instanceof c)return l.apply(this,f),this;const v=new c(...f);return w.annotation=v,w;function w(I,T,M){const k=I.hasOwnProperty(Ms)?I[Ms]:Object.defineProperty(I,Ms,{value:[]})[Ms];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(v),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class ln{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Kt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const jh=new ln("AnalyzeForEntryComponents");function fr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),fr(l,s)):s!==i&&s.push(l)}return s}function Fr(i,s){i.forEach(a=>Array.isArray(a)?Fr(a,s):s(a))}function ki(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function si(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function pr(i,s,a){let l=ts(i,s);return l>=0?i[1|l]=a:(l=~l,function hd(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function oi(i,s){const a=ts(i,s);if(a>=0)return i[1|a]}function ts(i,s){return function pd(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const f=l+(c-l>>1),v=i[f<<a];if(s===v)return f<<a;v>s?c=f:l=f+1}return~(c<<a)}(i,s,1)}const D={},C="__NG_DI_FLAG__",x="ngTempTokenPath",q=/\n/gm,be="__source";let Ve;function lt(i){const s=Ve;return Ve=i,s}function yt(i,s=ut.Default){if(void 0===Ve)throw new Se(-203,"");return null===Ve?Ws(i,void 0,s):Ve.get(i,s&ut.Optional?null:void 0,s)}function rt(i,s=ut.Default){return(function bn(){return Qr}()||yt)(Q(i),s)}function sr(i){const s=[];for(let a=0;a<i.length;a++){const l=Q(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Se(900,"");let c,f=ut.Default;for(let v=0;v<l.length;v++){const w=l[v],I=Os(w);"number"==typeof I?-1===I?c=w.token:f|=I:c=w}s.push(rt(c,f))}else s.push(rt(l))}return s}function _i(i,s){return i[C]=s,i.prototype[C]=s,i}function Os(i){return i[C]}const Fi=_i(Oi("Inject",i=>({token:i})),-1),cn=_i(Oi("Optional"),8),Lr=_i(Oi("SkipSelf"),4);class qu{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function wi(i){return i instanceof qu?i.changingThisBreaksApplicationSecurity:i}const sg=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,oy=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Qn=(()=>((Qn=Qn||{})[Qn.NONE=0]="NONE",Qn[Qn.HTML=1]="HTML",Qn[Qn.STYLE=2]="STYLE",Qn[Qn.SCRIPT=3]="SCRIPT",Qn[Qn.URL=4]="URL",Qn[Qn.RESOURCE_URL=5]="RESOURCE_URL",Qn))();function nf(i){const s=function nc(){const i=Ce();return i&&i[12]}();return s?s.sanitize(Qn.URL,i)||"":function za(i,s){const a=function Jh(i){return i instanceof qu&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?wi(i):function qo(i){return(i=String(i)).match(sg)||i.match(oy)?i:"unsafe:"+i}(he(i))}function Ed(i){return i.ngOriginalError}class Xu{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Ed(s);for(;a&&Ed(a);)a=Ed(a);return a||null}}const of=new Map;let bd=0;const sc="__ngContext__";function Ur(i,s){dr(s)?(i[sc]=s[20],function wr(i){of.set(i[20],i)}(s)):i[sc]=s}function Ya(i){const s=i[sc];return"number"==typeof s?function tl(i){return of.get(i)||null}(s):s||null}function af(i){const s=Ya(i);return s?dr(s)?s:s.lView:null}const G=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(je))();function tt(i){return i instanceof Function?i():i}var Li=(()=>((Li=Li||{})[Li.Important=1]="Important",Li[Li.DashCase=2]="DashCase",Li))();function Qa(i,s){return undefined(i,s)}function Vs(i){const s=i[3];return Rr(s)?s[3]:s}function is(i){return fy(i[13])}function Md(i){return fy(i[4])}function fy(i){for(;null!==i&&!Rr(i);)i=i[4];return i}function ac(i,s,a,l,c){if(null!=l){let f,v=!1;Rr(l)?f=l:dr(l)&&(v=!0,l=l[0]);const w=yn(l);0===i&&null!==a?null==c?I0(s,a,w):Xa(s,a,w,c||null,!0):1===i&&null!==a?Xa(s,a,w,c||null,!0):2===i?function C0(i,s,a){const l=kd(i,s);l&&function gr(i,s,a,l){Qt(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,w,v):3===i&&s.destroyNode(w),null!=f&&function VT(i,s,a,l,c){const f=a[7];f!==yn(a)&&ac(s,i,l,f,c);for(let w=10;w<a.length;w++){const I=a[w];ff(I[1],I,i,s,l,f)}}(s,i,f,a,c)}}function fg(i,s,a){if(Qt(i))return i.createElement(s,a);{const l=null!==a?function Oh(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function gy(i,s){const a=i[9],l=a.indexOf(s),c=s[3];512&s[2]&&(s[2]&=-513,Mo(c,-1)),a.splice(l,1)}function my(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&gy(c,l),s>0&&(i[a-1][4]=l[4]);const f=si(i,10+s);!function Nd(i,s){ff(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const v=f[19];null!==v&&v.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function df(i,s){if(!(128&s[2])){const a=s[11];Qt(a)&&a.destroyNode&&ff(i,s,a,3,null,null),function py(i){let s=i[13];if(!s)return yy(i[1],i);for(;s;){let a=null;if(dr(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)dr(s)&&yy(s[1],s),s=s[3];null===s&&(s=i),dr(s)&&yy(s[1],s),a=s&&s[4]}s=a}}(s)}}function yy(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function Br(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof Ru)){const f=a[l+1];if(Array.isArray(f))for(let v=0;v<f.length;v+=2){const w=c[f[v]],I=f[v+1];try{I.call(w)}finally{}}else try{f.call(c)}finally{}}}}(i,s),function E0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const v=a[f+1],w="function"==typeof v?v(s):yn(s[v]),I=l[c=a[f+2]],T=a[f+3];"boolean"==typeof T?w.removeEventListener(a[f],I,T):T>=0?l[c=T]():l[c=-T].unsubscribe(),f+=2}else{const v=l[c=a[f+1]];a[f].call(v)}if(null!==l){for(let f=c+1;f<l.length;f++)l[f]();s[7]=null}}(i,s),1===s[1].type&&Qt(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Rr(s[3])){a!==s[3]&&gy(a,s);const l=s[19];null!==l&&l.detachView(i)}!function Cd(i){of.delete(i[20])}(s)}}function uc(i,s,a){return function Ja(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===jt.None||c===jt.Emulated)return null}return $r(l,a)}(i,s.parent,a)}function Xa(i,s,a,l,c){Qt(i)?i.insertBefore(s,a,l,c):(Od(s)?s.content:s).insertBefore(a,l,c)}function I0(i,s,a){Qt(i)?i.appendChild(s,a):(Od(s)?s.content:s).appendChild(a)}function Re(i,s,a,l,c){null!==l?Xa(i,s,a,l,c):I0(i,s,a)}function Od(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}function kd(i,s){return Qt(i)?i.parentNode(s):s.parentNode}let Ze=function D0(i,s,a){return 40&i.type?$r(i,a):null};function or(i,s,a,l){const c=uc(i,l,s),f=s[11],w=function vt(i,s,a){return Ze(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)Re(f,c,a[I],w,!1);else Re(f,c,a,w,!1)}function hf(i,s){if(null!==s){const a=s.type;if(3&a)return $r(s,i);if(4&a)return vy(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return hf(i,l);{const c=i[s.index];return Rr(c)?vy(-1,c):yn(c)}}if(32&a)return Qa(s,i)()||yn(i[s.index]);{const l=b0(i,s);return null!==l?Array.isArray(l)?l[0]:hf(Vs(i[16]),l):hf(i,s.next)}}return null}function b0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function vy(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return hf(l,c)}return s[7]}function _y(i,s,a,l,c,f,v){for(;null!=a;){const w=l[a.index],I=a.type;if(v&&0===s&&(w&&Ur(yn(w),l),a.flags|=4),64!=(64&a.flags))if(8&I)_y(i,s,a.child,l,c,f,!1),ac(s,i,c,w,f);else if(32&I){const T=Qa(a,l);let M;for(;M=T();)ac(s,i,c,M,f);ac(s,i,c,w,f)}else 16&I?A0(i,s,l,a,c,f):ac(s,i,c,w,f);a=v?a.projectionNext:a.next}}function ff(i,s,a,l,c,f){_y(a,l,i.firstChild,s,c,f,!1)}function A0(i,s,a,l,c,f){const v=a[16],I=v[6].projection[l.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)ac(s,i,c,I[T],f);else _y(i,s,I,v[3],c,f,!0)}function wy(i,s,a){Qt(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Tt(i,s,a){Qt(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function lc(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const f=s.length;if(c+f===l||i.charCodeAt(c+f)<=32)return c}a=c+1}}const An="ng-template";function _t(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==lc(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function Pd(i){return 4===i.type&&i.value!==An}function Jt(i,s,a){return s===(4!==i.type||a?i.value:An)}function HI(i,s,a){let l=4;const c=i.attrs||[],f=function cc(i){for(let s=0;s<i.length;s++)if(Ou(i[s]))return s;return i.length}(c);let v=!1;for(let w=0;w<s.length;w++){const I=s[w];if("number"!=typeof I){if(!v)if(4&l){if(l=2|1&l,""!==I&&!Jt(i,I,a)||""===I&&1===s.length){if(on(l))return!1;v=!0}}else{const T=8&l?I:s[++w];if(8&l&&null!==i.attrs){if(!_t(i.attrs,T,a)){if(on(l))return!1;v=!0}continue}const k=Ge(8&l?"class":I,c,Pd(i),a);if(-1===k){if(on(l))return!1;v=!0;continue}if(""!==T){let U;U=k>f?"":c[k+1].toLowerCase();const J=8&l?U:null;if(J&&-1!==lc(J,T,0)||2&l&&T!==U){if(on(l))return!1;v=!0}}}}else{if(!v&&!on(l)&&!on(I))return!1;if(v&&on(I))continue;v=!1,l=I|1&l}}return on(l)||v}function on(i){return 0==(1&i)}function Ge(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let f=!1;for(;c<s.length;){const v=s[c];if(v===i)return c;if(3===v||6===v)f=!0;else{if(1===v||2===v){let w=s[++c];for(;"string"==typeof w;)w=s[++c];continue}if(4===v)break;if(0===v){c+=4;continue}}c+=f?1:2}return-1}return function pg(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function pf(i,s,a=!1){for(let l=0;l<s.length;l++)if(HI(i,s[l],a))return!0;return!1}function Iy(i,s){return i?":not("+s.trim()+")":s}function S0(i){let s=i[0],a=1,l=2,c="",f=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&l){const w=i[++a];c+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?c+="."+v:4&l&&(c+=" "+v);else""!==c&&!on(v)&&(s+=Iy(f,c),c=""),l=v,f=f||!on(l);a++}return""!==c&&(s+=Iy(f,c)),s}const Ct={};function by(i){eu(Nt(),Ce(),rr()+i,!1)}function eu(i,s,a,l){if(!l)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Ra(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Yi(s,f,0,a)}Ts(a)}const Cy=new ln("ENVIRONMENT_INITIALIZER"),yg=new ln("INJECTOR_DEF_TYPES");function WI(...i){return{\u0275providers:x0(0,i)}}function x0(i,...s){const a=[],l=new Set;let c;return Fr(s,f=>{const v=f;vg(v,a,[],l)&&(c||(c=[]),c.push(v))}),void 0!==c&&Di(c,a),a}function Di(i,s){for(let a=0;a<i.length;a++){const{providers:c}=i[a];Fr(c,f=>{s.push(f)})}}function vg(i,s,a,l){if(!(i=Q(i)))return!1;let c=null,f=Ar(i);const v=!f&&Vt(i);if(f||v){if(v&&!v.standalone)return!1;c=i}else{const I=i.ngModule;if(f=Ar(I),!f)return!1;c=I}const w=l.has(c);if(v){if(w)return!1;if(l.add(c),v.dependencies){const I="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const T of I)vg(T,s,a,l)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let T;l.add(c);try{Fr(f.imports,M=>{vg(M,s,a,l)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&Di(T,s)}if(!w){const T=_s(c)||(()=>new c);s.push({provide:c,useFactory:T,deps:wt},{provide:yg,useValue:c,multi:!0},{provide:Cy,useValue:()=>rt(c),multi:!0})}const I=f.providers;null==I||w||Fr(I,M=>{s.push(M)})}}return c!==i&&void 0!==i.providers}const M0=ge({provide:String,useValue:ge});function kn(i){return null!==i&&"object"==typeof i&&M0 in i}function Xt(i){return"function"==typeof i}const il=new ln("INJECTOR",-1);class Ui{get(s,a=D){if(a===D){const l=new Error(`NullInjectorError: No provider for ${le(s)}!`);throw l.name="NullInjectorError",l}return a}}const Ty=new ln("Set Injector scope."),Jn={},qI={};let Qo;function Pn(){return void 0===Qo&&(Qo=new Ui),Qo}class Bs{}class _g extends Bs{constructor(s,a,l,c){super(),this.parent=a,this.source=l,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,tu(s,v=>this.processProvider(v)),this.records.set(il,Xo(void 0,this)),c.has("environment")&&this.records.set(Bs,Xo(void 0,this));const f=this.records.get(Ty);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(yg.multi,wt,ut.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}get(s,a=D,l=ut.Default){this.assertNotDestroyed();const c=lt(this),f=En(void 0);try{if(!(l&ut.SkipSelf)){let w=this.records.get(s);if(void 0===w){const I=function sl(i){return"function"==typeof i||"object"==typeof i&&i instanceof ln}(s)&&Rt(s);w=I&&this.injectableDefInScope(I)?Xo(wg(s),Jn):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&ut.Self?Pn():this.parent).get(s,a=l&ut.Optional&&a===D?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[x]=v[x]||[]).unshift(le(s)),c)throw v;return function Pi(i,s,a,l){const c=i[x];throw s[be]&&c.unshift(s[be]),i.message=function Gu(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let c=le(s);if(Array.isArray(s))c=s.map(le).join(" -> ");else if("object"==typeof s){let f=[];for(let v in s)if(s.hasOwnProperty(v)){let w=s[v];f.push(v+":"+("string"==typeof w?JSON.stringify(w):le(w)))}c=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(q,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[x]=null,i}(v,s,"R3InjectorError",this.source)}throw v}finally{En(f),lt(c)}}resolveInjectorInitializers(){const s=lt(this),a=En(void 0);try{const l=this.get(Cy.multi,wt,ut.Self);for(const c of l)c()}finally{lt(s),En(a)}}toString(){const s=[],a=this.records;for(const l of a.keys())s.push(le(l));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processProvider(s){let a=Xt(s=Q(s))?s:Q(s&&s.provide);const l=function ZI(i){return kn(i)?Xo(void 0,i.useValue):Xo(Jo(i),Jn)}(s);if(Xt(s)||!0!==s.multi)this.records.get(a);else{let c=this.records.get(a);c||(c=Xo(void 0,Jn,!0),c.factory=()=>sr(c.multi),this.records.set(a,c)),a=s,c.multi.push(s)}this.records.set(a,l)}hydrate(s,a){return a.value===Jn&&(a.value=qI,a.value=a.factory()),"object"==typeof a.value&&a.value&&function N0(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Q(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function wg(i){const s=Rt(i),a=null!==s?s.factory:_s(i);if(null!==a)return a;if(i instanceof ln)throw new Se(204,!1);if(i instanceof Function)return function yf(i){const s=i.length;if(s>0)throw function Xi(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Se(204,!1);const a=function Kr(i){const s=i&&(i[Si]||i[Yr]);if(s){const a=function vr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Se(204,!1)}function Jo(i,s,a){let l;if(Xt(i)){const c=Q(i);return _s(c)||wg(c)}if(kn(i))l=()=>Q(i.useValue);else if(function jr(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...sr(i.deps||[]));else if(function mf(i){return!(!i||!i.useExisting)}(i))l=()=>rt(Q(i.useExisting));else{const c=Q(i&&(i.useClass||i.provide));if(!function vf(i){return!!i.deps}(i))return _s(c)||wg(c);l=()=>new c(...sr(i.deps))}return l}function Xo(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Eg(i){return!!i.\u0275providers}function tu(i,s){for(const a of i)Array.isArray(a)?tu(a,s):Eg(a)?tu(a.\u0275providers,s):s(a)}function lo(i,s=null,a=null,l){const c=Ud(i,s,a,l);return c.resolveInjectorInitializers(),c}function Ud(i,s=null,a=null,l,c=new Set){const f=[a||wt,WI(i)];return l=l||("object"==typeof i?void 0:le(i)),new _g(f,s||Pn(),l||null,c)}let Gr=(()=>{class i{static create(a,l){if(Array.isArray(a))return lo({name:""},l,a,"");{const c=a.name??"";return lo({name:c},a.parent,a.providers,c)}}}return i.THROW_IF_NOT_FOUND=D,i.NULL=new Ui,i.\u0275prov=Kt({token:i,providedIn:"any",factory:()=>rt(il)}),i.__NG_ELEMENT_ID__=-1,i})();function fc(i,s=ut.Default){const a=Ce();return null===a?rt(i,s):ud(Rn(),a,Q(i),s)}function V0(){throw new Error("invalid")}function Tf(i,s){return i<<17|s<<2}function bi(i){return i>>17&32767}function Af(i){return 2|i}function ea(i){return(131068&i)>>2}function Ag(i,s){return-131069&i|s<<2}function Sg(i){return 1|i}function $y(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],f=a[l+1];if(-1!==f){const v=i.data[f];Fo(c),v.contentQueries(2,s[f],f)}}}function Of(i,s,a,l,c,f,v,w,I,T,M){const k=s.blueprint.slice();return k[0]=c,k[2]=76|l,(null!==M||i&&1024&i[2])&&(k[2]|=1024),Is(k),k[3]=k[15]=i,k[8]=a,k[10]=v||i&&i[10],k[11]=w||i&&i[11],k[12]=I||i&&i[12]||null,k[9]=T||i&&i[9]||null,k[6]=f,k[20]=function el(){return bd++}(),k[21]=M,k[16]=2==s.type?i[16]:k,k}function bt(i,s,a,l,c){let f=i.data[s];if(null===f)f=function Hy(i,s,a,l,c){const f=No(),v=Oo(),I=i.data[s]=function gD(i,s,a,l,c,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?f:f&&f.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==f&&(v?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,l,c),function Ol(){return dt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=c;const v=function Zi(){const i=dt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===v?-1:v.injectorIndex}return mi(f,!0),f}function ru(i,s,a,l){if(0===a)return-1;const c=s.length;for(let f=0;f<a;f++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function iu(i,s,a){eo(s);try{const l=i.viewQuery;null!==l&&iv(1,l,a);const c=i.template;null!==c&&Gy(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&$y(i,s),i.staticViewQueries&&iv(2,i.viewQuery,a);const f=i.components;null!==f&&function fD(i,s){for(let a=0;a<s.length;a++)X0(i,s[a])}(s,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,xu()}}function ia(i,s,a,l){const c=s[2];if(128!=(128&c)){eo(s);try{Is(s),function ko(i){return dt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Gy(i,s,a,2,l);const v=3==(3&c);if(v){const T=i.preOrderCheckHooks;null!==T&&Ra(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Yi(s,T,0,null),Na(s,0)}if(function J0(i){for(let s=is(i);null!==s;s=Md(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],f=c[3];0==(512&c[2])&&Mo(f,1),c[2]|=512}}}(s),function _D(i){for(let s=is(i);null!==s;s=Md(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];xo(l)&&ia(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&$y(i,s),v){const T=i.contentCheckHooks;null!==T&&Ra(s,T)}else{const T=i.contentHooks;null!==T&&Yi(s,T,1),Na(s,1)}!function ra(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Ts(~c);else{const f=c,v=a[++l],w=a[++l];nd(v,f),w(2,s[f])}}}finally{Ts(-1)}}(i,s);const w=i.components;null!==w&&function Nf(i,s){for(let a=0;a<s.length;a++)Ci(i,s[a])}(s,w);const I=i.viewQuery;if(null!==I&&iv(2,I,l),v){const T=i.viewCheckHooks;null!==T&&Ra(s,T)}else{const T=i.viewHooks;null!==T&&Yi(s,T,2),Na(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,Mo(s[3],-1))}finally{xu()}}}function Vg(i,s,a,l){const c=s[10],v=Cu(s);try{!v&&c.begin&&c.begin(),v&&iu(i,s,l),ia(i,s,a,l)}finally{!v&&c.end&&c.end()}}function Gy(i,s,a,l,c){const f=rr(),v=2&l;try{Ts(-1),v&&s.length>22&&eu(i,s,22,!1),a(l,c)}finally{Ts(f)}}function Ug(i,s,a){!Ta()||(function yD(i,s,a,l){const c=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Ss(a,s),Ur(l,s);const v=a.initialInputs;for(let w=c;w<f;w++){const I=i.data[w],T=xi(I);T&&Y0(s,a,I);const M=ri(s,i,w,a);Ur(M,s),null!==v&&zd(0,w-c,M,I,0,v),T&&($t(a.index,s)[8]=M)}}(i,s,a,$r(a,s)),128==(128&a.flags)&&function vD(i,s,a){const l=a.directiveStart,c=a.directiveEnd,f=a.index,v=function kl(){return dt.lFrame.currentDirectiveIndex}();try{Ts(f);for(let w=l;w<c;w++){const I=i.data[w],T=s[w];Sa(w),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Gd(I,T)}}finally{Ts(-1),Sa(v)}}(i,s,a))}function Wy(i,s,a=$r){const l=s.localNames;if(null!==l){let c=s.index+1;for(let f=0;f<l.length;f+=2){const v=l[f+1],w=-1===v?a(s,i):i[v];i[c++]=w}}}function qy(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=kf(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function kf(i,s,a,l,c,f,v,w,I,T){const M=22+l,k=M+c,U=function pD(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Ct);return a}(M,k),J="function"==typeof T?T():T;return U[1]={type:i,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:s,data:U.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:J,incompleteFirstPass:!1}}function Zy(i,s,a,l){const c=nw(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&rw(i).push(l,c.length-1))}function Er(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function Wr(i,s,a,l,c,f,v,w){const I=$r(s,a);let M,T=s.inputs;!w&&null!=T&&(M=T[l])?(ow(i,a,M,l,c),ya(s)&&function sa(i,s){const a=$t(s,i);16&a[2]||(a[2]|=32)}(a,s.index)):3&s.type&&(l=function G0(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=v?v(c,s.value||"",l):c,Qt(f)?f.setProperty(I,l,c):Uh(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}function Bg(i,s,a,l){let c=!1;if(Ta()){const f=function Jy(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let f=0;f<l.length;f++){const v=l[f];pf(a,v.selectors,!1)&&(c||(c=[]),Fu(Ss(a,s),i,v.type),xi(v)?(W0(i,a),c.unshift(v)):c.push(v))}return c}(i,s,a),v=null===l?null:{"":-1};if(null!==f){c=!0,Xy(a,i.data.length,f.length);for(let M=0;M<f.length;M++){const k=f[M];k.providersResolver&&k.providersResolver(k)}let w=!1,I=!1,T=ru(i,s,f.length,null);for(let M=0;M<f.length;M++){const k=f[M];a.mergedAttrs=vi(a.mergedAttrs,k.hostAttrs),K0(i,a,s,T,k),Z0(T,k,v),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const U=k.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!I&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}!function Ky(i,s){const l=s.directiveEnd,c=i.data,f=s.attrs,v=[];let w=null,I=null;for(let T=s.directiveStart;T<l;T++){const M=c[T],k=M.inputs,U=null===f||Pd(s)?null:Wd(k,f);v.push(U),w=Er(k,T,w),I=Er(M.outputs,T,I)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=v,s.inputs=w,s.outputs=I}(i,a)}v&&function q0(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const f=a[s[c+1]];if(null==f)throw new Se(-301,!1);l.push(s[c],f)}}}(a,l,v)}return a.mergedAttrs=vi(a.mergedAttrs,a.attrs),c}function Qy(i,s,a,l,c,f){const v=f.hostBindings;if(v){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const I=~s.index;(function z0(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=I&&w.push(I),w.push(l,c,v)}}function Gd(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function W0(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Z0(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;xi(s)&&(a[""]=i)}}function Xy(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function K0(i,s,a,l,c){i.data[l]=c;const f=c.factory||(c.factory=_s(c.type)),v=new Ru(f,xi(c),fc);i.blueprint[l]=v,a[l]=v,Qy(i,s,0,l,ru(i,a,c.hostVars,Ct),c)}function Y0(i,s,a){const l=$r(s,i),c=qy(a),f=i[10],v=Ff(i,Of(i,c,null,a.onPush?32:16,l,s,f,f.createRenderer(l,a),null,null,null));i[s.index]=v}function oa(i,s,a,l,c,f){const v=$r(i,s);!function ev(i,s,a,l,c,f,v){if(null==f)Qt(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const w=null==v?he(f):v(f,l||"",c);Qt(i)?i.setAttribute(s,c,w,a):a?s.setAttributeNS(a,c,w):s.setAttribute(c,w)}}(s[11],v,f,i.value,a,l,c)}function zd(i,s,a,l,c,f){const v=f[s];if(null!==v){const w=l.setInput;for(let I=0;I<v.length;){const T=v[I++],M=v[I++],k=v[I++];null!==w?l.setInput(a,k,T,M):a[M]=k}}}function Wd(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function Q0(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Ci(i,s){const a=$t(s,i);if(xo(a)){const l=a[1];48&a[2]?ia(l,a,l.template,a[8]):a[5]>0&&tv(a)}}function tv(i){for(let l=is(i);null!==l;l=Md(l))for(let c=10;c<l.length;c++){const f=l[c];if(512&f[2]){const v=f[1];ia(v,f,v.template,f[8])}else f[5]>0&&tv(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=$t(a[l],i);xo(c)&&c[5]>0&&tv(c)}}function X0(i,s){const a=$t(s,i),l=a[1];(function aa(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),iu(l,a,a[8])}function Ff(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function qd(i){for(;i;){i[2]|=32;const s=Vs(i);if(_a(i)&&!s)return i;i=s}return null}function tw(i){!function nv(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=af(a);if(null!==l){const c=l[1];Vg(c,l,c.template,a)}}}(i[8])}function iv(i,s,a){Fo(0),s(i,a)}const wD=(()=>Promise.resolve(null))();function nw(i){return i[7]||(i[7]=[])}function rw(i){return i.cleanup||(i.cleanup=[])}function sw(i,s){const a=i[9],l=a?a.get(Xu,null):null;l&&l.handleError(s)}function ow(i,s,a,l,c){for(let f=0;f<a.length;){const v=a[f++],w=a[f++],I=s[v],T=i.data[v];null!==T.setInput?T.setInput(I,c,l,w):I[w]=c}}function su(i,s,a){const l=ni(s,i);!function Vi(i,s,a){Qt(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function jg(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,f=0;if(null!==s)for(let v=0;v<s.length;v++){const w=s[v];"number"==typeof w?f=w:1==f?c=de(c,w):2==f&&(l=de(l,w+": "+s[++v]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}function AD(){const i=Rn();Mu(Ce()[1],i)}function lv(i){let s=function hw(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(xi(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Se(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const v=i;v.inputs=_c(i.inputs),v.declaredInputs=_c(i.declaredInputs),v.outputs=_c(i.outputs);const w=c.hostBindings;w&&fw(i,w);const I=c.viewQuery,T=c.contentQueries;if(I&&wc(i,I),T&&Ec(i,T),ue(i.inputs,c.inputs),ue(i.declaredInputs,c.declaredInputs),ue(i.outputs,c.outputs),xi(c)&&c.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let v=0;v<f.length;v++){const w=f[v];w&&w.ngInherit&&w(i),w===lv&&(a=!1)}}s=Object.getPrototypeOf(s)}!function xD(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=vi(c.hostAttrs,a=vi(a,c.hostAttrs))}}(l)}function _c(i){return i===qn?{}:i===wt?[]:i}function wc(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function Ec(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,f)=>{s(l,c,f),a(l,c,f)}:s}function fw(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Ic=null;function Dc(){if(!Ic){const i=je.Symbol;if(i&&i.iterator)Ic=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Ic=l)}}}return Ic}function ou(i){return!!Zg(i)&&(Array.isArray(i)||!(i instanceof Map)&&Dc()in i)}function Zg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Dr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function hl(i,s,a,l){const c=Ce();return Dr(c,Cs(),s)&&(Nt(),oa($n(),c,i,s,a,l)),hl}function js(i,s,a,l){return Dr(i,Cs(),a)?s+he(a)+l:Ct}function pv(i,s,a,l,c,f,v,w){const I=Ce(),T=Nt(),M=i+22,k=T.firstCreatePass?function $f(i,s,a,l,c,f,v,w,I){const T=s.consts,M=bt(s,i,4,v||null,Or(T,w));Bg(s,a,M,Or(T,I)),Mu(s,M);const k=M.tViews=kf(2,M,l,c,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,M),k.queries=s.queries.embeddedTView(M)),M}(M,T,I,s,a,l,c,f,v):T.data[M];mi(k,!1);const U=I[11].createComment("");or(T,I,U,k),Ur(U,I),Ff(I,I[M]=Q0(U,I,U,k)),va(k)&&Ug(T,I,k),null!=v&&Wy(I,k,w)}function Kg(i,s,a){const l=Ce();return Dr(l,Cs(),s)&&Wr(Nt(),$n(),l,i,s,l[11],a,!1),Kg}function gv(i,s,a,l,c){const v=c?"class":"style";ow(i,a,s.inputs[v],v,l)}function eh(i,s,a,l){const c=Ce(),f=Nt(),v=22+i,w=c[11],I=c[v]=fg(w,s,function Vl(){return dt.lFrame.currentNamespace}()),T=f.firstCreatePass?function kD(i,s,a,l,c,f,v){const w=s.consts,T=bt(s,i,2,c,Or(w,f));return Bg(s,a,T,Or(w,v)),null!==T.attrs&&jg(T,T.attrs,!1),null!==T.mergedAttrs&&jg(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(v,f,c,0,s,a,l):f.data[v];mi(T,!0);const M=T.mergedAttrs;null!==M&&kr(w,I,M);const k=T.classes;null!==k&&Tt(w,I,k);const U=T.styles;return null!==U&&wy(w,I,U),64!=(64&T.flags)&&or(f,c,I,T),0===function Xs(){return dt.lFrame.elementDepthCount}()&&Ur(I,c),function ba(){dt.lFrame.elementDepthCount++}(),va(T)&&(Ug(f,c,T),function zy(i,s,a){if(To(s)){const c=s.directiveEnd;for(let f=s.directiveStart;f<c;f++){const v=i.data[f];v.contentQueries&&v.contentQueries(1,a[f],f)}}}(f,T,c)),null!==l&&Wy(c,T),eh}function ur(){let i=Rn();Oo()?function Au(){dt.lFrame.isParent=!1}():(i=i.parent,mi(i,!1));const s=i;!function Ca(){dt.lFrame.elementDepthCount--}();const a=Nt();return a.firstCreatePass&&(Mu(a,i),To(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Vh(i){return 0!=(16&i.flags)}(s)&&gv(a,s,Ce(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Bp(i){return 0!=(32&i.flags)}(s)&&gv(a,s,Ce(),s.stylesWithoutHost,!1),ur}function mv(i,s,a,l){return eh(i,s,a,l),ur(),mv}function ww(){return Ce()}function th(i){return!!i&&"function"==typeof i.then}function Ew(i){return!!i&&"function"==typeof i.subscribe}const wv=Ew;function Hf(i,s,a,l){const c=Ce(),f=Nt(),v=Rn();return function zf(i,s,a,l,c,f,v,w){const I=va(l),M=i.firstCreatePass&&rw(i),k=s[8],U=nw(s);let J=!0;if(3&l.type||w){const qe=$r(l,s),Je=w?w(qe):qe,ft=U.length,xe=w?ot=>w(yn(ot[l.index])):l.index;if(Qt(a)){let ot=null;if(!w&&I&&(ot=function Gf(i,s,a,l){const c=i.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const v=c[f];if(v===a&&c[f+1]===l){const w=s[7],I=c[f+2];return w.length>I?w[I]:null}"string"==typeof v&&(f+=2)}return null}(i,s,c,l.index)),null!==ot)(ot.__ngLastListenerFn__||ot).__ngNextListenerFn__=f,ot.__ngLastListenerFn__=f,J=!1;else{f=Wf(l,s,k,f,!1);const qt=a.listen(Je,c,f);U.push(f,qt),M&&M.push(c,xe,ft,ft+1)}}else f=Wf(l,s,k,f,!0),Je.addEventListener(c,f,v),U.push(f),M&&M.push(c,xe,ft,v)}else f=Wf(l,s,k,f,!1);const Ie=l.outputs;let Ne;if(J&&null!==Ie&&(Ne=Ie[c])){const qe=Ne.length;if(qe)for(let Je=0;Je<qe;Je+=2){const wn=s[Ne[Je]][Ne[Je+1]].subscribe(f),Dl=U.length;U.push(f,wn),M&&M.push(c,l.index,Dl,-(Dl+1))}}}(f,c,c[11],v,i,s,!!a,l),Hf}function Qg(i,s,a,l){try{return!1!==a(l)}catch(c){return sw(i,c),!1}}function Wf(i,s,a,l,c){return function f(v){if(v===Function)return l;qd(2&i.flags?$t(i.index,s):s);let I=Qg(s,0,l,v),T=f.__ngNextListenerFn__;for(;T;)I=Qg(s,0,T,v)&&I,T=T.__ngNextListenerFn__;return c&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function Ev(i=1){return function Fl(i){return(dt.lFrame.contextLView=function id(i,s){for(;i>0;)s=s[15],i--;return s}(i,dt.lFrame.contextLView))[8]}(i)}function qf(i,s,a){return Jg(i,"",s,"",a),qf}function Jg(i,s,a,l,c){const f=Ce(),v=js(f,s,a,l);return v!==Ct&&Wr(Nt(),$n(),f,i,v,f[11],c,!1),Jg}function Sw(i,s,a,l,c){const f=i[a+1],v=null===s;let w=l?bi(f):ea(f),I=!1;for(;0!==w&&(!1===I||v);){const M=i[w+1];bv(i[w],s)&&(I=!0,i[w+1]=l?Sg(M):Af(M)),w=l?bi(M):ea(M)}I&&(i[a+1]=l?Af(f):Sg(f))}function bv(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&ts(i,s)>=0}function xv(i,s){return function Hs(i,s,a,l){const c=Ce(),f=Nt(),v=function yi(i){const s=dt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function Ow(i,s,a,l){const c=i.data;if(null===c[a+1]){const f=c[rr()],v=function Nw(i,s){return s>=i.expandoStartIndex}(i,a);(function Ov(i,s){return 0!=(i.flags&(s?16:32))})(f,l)&&null===s&&!v&&(s=!1),s=function UD(i,s,a,l){const c=function xa(i){const s=dt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=xc(a=gl(null,i,s,a,l),s.attrs,l),f=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==c)if(a=gl(c,i,s,a,l),null===f){let I=function BD(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==ea(l))return i[bi(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=gl(null,i,s,I[1],l),I=xc(I,s.attrs,l),function Qf(i,s,a,l){i[bi(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else f=function Mv(i,s,a){let l;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)l=xc(l,i[f].hostAttrs,a);return xc(l,s.attrs,a)}(i,s,l)}return void 0!==f&&(l?s.residualClasses=f:s.residualStyles=f),a}(c,f,s,l),function Tw(i,s,a,l,c,f){let v=f?s.classBindings:s.styleBindings,w=bi(v),I=ea(v);i[l]=a;let M,T=!1;if(Array.isArray(a)){const k=a;M=k[1],(null===M||ts(k,M)>0)&&(T=!0)}else M=a;if(c)if(0!==I){const U=bi(i[w+1]);i[l+1]=Tf(U,w),0!==U&&(i[U+1]=Ag(i[U+1],l)),i[w+1]=function Py(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=Tf(w,0),0!==w&&(i[w+1]=Ag(i[w+1],l)),w=l;else i[l+1]=Tf(I,0),0===w?w=l:i[I+1]=Ag(i[I+1],l),I=l;T&&(i[l+1]=Af(i[l+1])),Sw(i,M,l,!0),Sw(i,M,l,!1),function Aw(i,s,a,l,c){const f=c?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&ts(f,s)>=0&&(a[l+1]=Sg(a[l+1]))}(s,M,i,l,f),v=Tf(w,I),f?s.classBindings=v:s.styleBindings=v}(c,f,s,a,v,l)}}(f,i,v,l),s!==Ct&&Dr(c,v,s)&&function Nv(i,s,a,l,c,f,v,w){if(!(3&s.type))return;const I=i.data,T=I[w+1];ih(function B0(i){return 1==(1&i)}(T)?sm(I,s,a,c,ea(T),v):void 0)||(ih(f)||function ky(i){return 2==(2&i)}(T)&&(f=sm(I,null,a,c,w,v)),function jI(i,s,a,l,c){const f=Qt(i);if(s)c?f?i.addClass(a,l):a.classList.add(l):f?i.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:Li.DashCase;if(null==c)f?i.removeStyle(a,l,v):a.style.removeProperty(l);else{const w="string"==typeof c&&c.endsWith("!important");w&&(c=c.slice(0,-10),v|=Li.Important),f?i.setStyle(a,l,c,v):a.style.setProperty(l,c,w?"important":"")}}}(l,v,ni(rr(),a),c,f))}(f,f.data[rr()],c,c[11],i,c[v+1]=function ml(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=le(wi(i)))),i}(s,a),l,v)}(i,s,null,!0),xv}function gl(i,s,a,l,c){let f=null;const v=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<v&&(f=s[w],l=xc(l,f.hostAttrs,c),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function xc(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const v=s[f];"number"==typeof v?c=v:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),pr(i,v,!!a||s[++f]))}return void 0===i?null:i}function sm(i,s,a,l,c,f){const v=null===s;let w;for(;c>0;){const I=i[c],T=Array.isArray(I),M=T?I[1]:I,k=null===M;let U=a[c+1];U===Ct&&(U=k?wt:void 0);let J=k?oi(U,l):M===l?U:void 0;if(T&&!ih(J)&&(J=oi(I,l)),ih(J)&&(w=J,v))return w;const Ie=i[c+1];c=v?bi(Ie):ea(Ie)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(w=oi(I,l))}return w}function ih(i){return void 0!==i}function kw(i,s=""){const a=Ce(),l=Nt(),c=i+22,f=l.firstCreatePass?bt(l,c,1,s,null):l.data[c],v=a[c]=function Rd(i,s){return Qt(i)?i.createText(s):i.createTextNode(s)}(a[11],s);or(l,a,v,f),mi(f,!1)}function Jf(i){return om("",i,""),Jf}function om(i,s,a){const l=Ce(),c=js(l,i,s,a);return c!==Ct&&su(l,rr(),c),om}const kc=void 0;var Hv=["en",[["a","p"],["AM","PM"],kc],[["AM","PM"],kc,kc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],kc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],kc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",kc,"{1} 'at' {0}",kc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function qD(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let vl={};function mm(i){const s=function KD(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=zv(s);if(a)return a;const l=s.split("-")[0];if(a=zv(l),a)return a;if("en"===l)return Hv;throw new Error(`Missing locale data for the locale "${i}".`)}function Gv(i){return mm(i)[ht.PluralCase]}function zv(i){return i in vl||(vl[i]=je.ng&&je.ng.common&&je.ng.common.locales&&je.ng.common.locales[i]),vl[i]}var ht=(()=>((ht=ht||{})[ht.LocaleId=0]="LocaleId",ht[ht.DayPeriodsFormat=1]="DayPeriodsFormat",ht[ht.DayPeriodsStandalone=2]="DayPeriodsStandalone",ht[ht.DaysFormat=3]="DaysFormat",ht[ht.DaysStandalone=4]="DaysStandalone",ht[ht.MonthsFormat=5]="MonthsFormat",ht[ht.MonthsStandalone=6]="MonthsStandalone",ht[ht.Eras=7]="Eras",ht[ht.FirstDayOfWeek=8]="FirstDayOfWeek",ht[ht.WeekendRange=9]="WeekendRange",ht[ht.DateFormat=10]="DateFormat",ht[ht.TimeFormat=11]="TimeFormat",ht[ht.DateTimeFormat=12]="DateTimeFormat",ht[ht.NumberSymbols=13]="NumberSymbols",ht[ht.NumberFormats=14]="NumberFormats",ht[ht.CurrencyCode=15]="CurrencyCode",ht[ht.CurrencySymbol=16]="CurrencySymbol",ht[ht.CurrencyName=17]="CurrencyName",ht[ht.Currencies=18]="Currencies",ht[ht.Directionality=19]="Directionality",ht[ht.PluralCase=20]="PluralCase",ht[ht.ExtraData=21]="ExtraData",ht))();const oh="en-US";let $w=oh;function ch(i,s,a,l,c){if(i=Q(i),Array.isArray(i))for(let f=0;f<i.length;f++)ch(i[f],s,a,l,c);else{const f=Nt(),v=Ce();let w=Xt(i)?i:Q(i.provide),I=Jo(i);const T=Rn(),M=1048575&T.providerIndexes,k=T.directiveStart,U=T.providerIndexes>>20;if(Xt(i)||!i.multi){const J=new Ru(I,c,fc),Ie=Sm(w,s,c?M:M+U,k);-1===Ie?(Fu(Ss(T,v),f,w),Ut(f,i,s.length),s.push(w),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(J),v.push(J)):(a[Ie]=J,v[Ie]=J)}else{const J=Sm(w,s,M+U,k),Ie=Sm(w,s,M,M+U),Ne=J>=0&&a[J],qe=Ie>=0&&a[Ie];if(c&&!qe||!c&&!Ne){Fu(Ss(T,v),f,w);const Je=function ui(i,s,a,l,c){const f=new Ru(i,a,fc);return f.multi=[],f.index=s,f.componentProviders=0,d_(f,c,l&&!a),f}(c?mb:np,a.length,c,l,I);!c&&qe&&(a[Ie].providerFactory=Je),Ut(f,i,s.length,0),s.push(w),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(Je),v.push(Je)}else Ut(f,i,J>-1?J:Ie,d_(a[c?Ie:J],I,!c&&l));!c&&l&&qe&&a[Ie].componentProviders++}}}function Ut(i,s,a,l){const c=Xt(s),f=function R0(i){return!!i.useClass}(s);if(c||f){const I=(f?Q(s.useClass):s).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const M=T.indexOf(a);-1===M?T.push(a,[l,I]):T[M+1].push(l,I)}else T.push(a,I)}}}function d_(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Sm(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function np(i,s,a,l){return _n(this.multi,[])}function mb(i,s,a,l){const c=this.multi;let f;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=ri(a,a[1],this.providerFactory.index,l);f=w.slice(0,v),_n(c,f);for(let I=v;I<w.length;I++)f.push(w[I])}else f=[],_n(c,f);return f}function _n(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function go(i,s=[]){return a=>{a.providersResolver=(l,c)=>function hE(i,s,a){const l=Nt();if(l.firstCreatePass){const c=xi(i);ch(a,l.data,l.blueprint,c,!0),ch(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class gE{resolveComponentFactory(s){throw function fE(i){const s=Error(`No component factory found for ${le(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let dh=(()=>{class i{}return i.NULL=new gE,i})();class Bc{}class xm{}class mE{}function Ln(){return rp(Rn(),Ce())}function rp(i,s){return new Mm($r(i,s))}let Mm=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Ln,i})();function yr(i){return i instanceof Mm?i.nativeElement:i}class yE{}let _b=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function wb(){const i=Ce(),a=$t(Rn().index,i);return function vE(i){return i[11]}(dr(a)?a:i)}(),i})(),Eb=(()=>{class i{}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:()=>null}),i})();class _E{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const wE=new _E("14.0.1"),EE={};function Rm(i,s,a,l,c=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&l.push(yn(f)),Rr(f))for(let w=10;w<f.length;w++){const I=f[w],T=I[1].firstChild;null!==T&&Rm(I[1],I,T,l)}const v=a.type;if(8&v)Rm(i,s,a.child,l);else if(32&v){const w=Qa(a,s);let I;for(;I=w();)l.push(I)}else if(16&v){const w=b0(s,a);if(Array.isArray(w))l.push(...w);else{const I=Vs(s[16]);Rm(I[1],I,w,l,!0)}}a=c?a.projectionNext:a.next}return l}class ip{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Rm(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Rr(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(my(s,l),si(a,l))}this._attachedToViewContainer=!1}df(this._lView[1],this._lView)}onDestroy(s){Zy(this._lView[1],this._lView,null,s)}markForCheck(){qd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function rv(i,s,a){const l=s[10];l.begin&&l.begin();try{ia(i,s,i.template,a)}catch(c){throw sw(s,c),c}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function VI(i,s){ff(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Se(902,"");this._appRef=s}}class IE extends ip{constructor(s){super(s),this._view=s}detectChanges(){tw(this._view)}checkNoChanges(){}get context(){return null}}class mo extends dh{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Vt(s);return new hh(a,this.ngModule)}}function Ib(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class jc{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,l){const c=this.injector.get(s,EE,l);return c!==EE||a===EE?c:this.parentInjector.get(s,a,l)}}class hh extends mE{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function ss(i){return i.map(S0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Ib(this.componentDef.inputs)}get outputs(){return Ib(this.componentDef.outputs)}create(s,a,l,c){let f=(c=c||this.ngModule)instanceof Bs?c:c?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const v=f?new jc(s,f):s,w=v.get(yE,Du),I=v.get(Eb,null),T=w.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",k=l?function Hd(i,s,a){if(Qt(i))return i.selectRootElement(s,a===jt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(T,l,this.componentDef.encapsulation):fg(w.createRenderer(null,this.componentDef),M,function la(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),U=this.componentDef.onPush?288:272,J=function dl(i,s){return{components:[],scheduler:i||G,clean:wD,playerHandler:s||null,flags:0}}(),Ie=kf(0,null,null,1,0,null,null,null,null,null),Ne=Of(null,Ie,J,U,null,null,w,T,I,v,null);let qe,Je;eo(Ne);try{const ft=function Vf(i,s,a,l,c,f){const v=a[1];a[22]=i;const I=bt(v,22,2,"#host",null),T=I.mergedAttrs=s.hostAttrs;null!==T&&(jg(I,T,!0),null!==i&&(kr(c,i,T),null!==I.classes&&Tt(c,i,I.classes),null!==I.styles&&wy(c,i,I.styles)));const M=l.createRenderer(i,s),k=Of(a,qy(s),null,s.onPush?32:16,a[22],I,l,M,f||null,null,null);return v.firstCreatePass&&(Fu(Ss(I,a),v,s.type),W0(v,I),Xy(I,a.length,1)),Ff(a,k),a[22]=k}(k,this.componentDef,Ne,w,T);if(k)if(l)kr(T,k,["ng-version",wE.full]);else{const{attrs:xe,classes:ot}=function Dy(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===c?""!==f&&s.push(f,i[++l]):8===c&&a.push(f);else{if(!on(c))break;c=f}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);xe&&kr(T,k,xe),ot&&ot.length>0&&Tt(T,k,ot.join(" "))}if(Je=So(Ie,22),void 0!==a){const xe=Je.projection=[];for(let ot=0;ot<this.ngContentSelectors.length;ot++){const qt=a[ot];xe.push(null!=qt?Array.from(qt):null)}}qe=function Kd(i,s,a,l,c){const f=a[1],v=function Pf(i,s,a){const l=Rn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),K0(i,l,s,ru(i,s,1,null),a));const c=ri(s,i,l.directiveStart,l);Ur(c,s);const f=$r(l,s);return f&&Ur(f,s),c}(f,a,s);if(l.components.push(v),i[8]=v,null!==c)for(const I of c)I(v,s);if(s.contentQueries){const I=Rn();s.contentQueries(1,v,I.directiveStart)}const w=Rn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Ts(w.index),Qy(a[1],w,0,w.directiveStart,w.directiveEnd,s),Gd(s,v)),v}(ft,this.componentDef,Ne,J,[AD]),iu(Ie,Ne,null)}finally{xu()}return new DE(this.componentType,qe,rp(Je,Ne),Ne,Je)}}class DE extends class yb{}{constructor(s,a,l,c,f){super(),this.location=l,this._rootLView=c,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new IE(c),this.componentType=s}get injector(){return new Ke(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function bE(i,s){return new sp(i,s??null)}class sp extends Bc{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new mo(this);const l=lr(s);this._bootstrapComponents=tt(l.bootstrap),this._r3Injector=Ud(s,a,[{provide:Bc,useValue:this},{provide:dh,useValue:this.componentFactoryResolver}],le(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(s)}get(s,a=Gr.THROW_IF_NOT_FOUND,l=ut.Default){return s===Gr||s===Bc||s===il?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class f_ extends xm{constructor(s){super(),this.moduleType=s}create(s){return new sp(this.moduleType,s)}}class $c extends Bc{constructor(s,a,l){super(),this.componentFactoryResolver=new mo(this),this.instance=null;const c=new _g([...s,{provide:Bc,useValue:this},{provide:dh,useValue:this.componentFactoryResolver}],a||Pn(),l,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function fh(i,s=null,a=null){return new $c(i,s,a).injector}function ca(i){return s=>{setTimeout(i,void 0,s)}}const da=class cp extends p.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){let c=s,f=a||(()=>null),v=l;if(s&&"object"==typeof s){const I=s;c=I.next?.bind(I),f=I.error?.bind(I),v=I.complete?.bind(I)}this.__isAsync&&(f=ca(f),c&&(c=ca(c)),v&&(v=ca(v)));const w=super.subscribe({next:c,error:f,complete:v});return s instanceof X.w0&&s.add(w),w}};function xb(){return this._results[Dc()]()}class __{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Dc(),l=__.prototype;l[a]||(l[a]=xb)}get changes(){return this._changes||(this._changes=new da)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=fr(s);(this._changesDetected=!function Bu(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],f=s[l];if(a&&(c=a(c),f=a(f)),f!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let dp=(()=>{class i{}return i.__NG_ELEMENT_ID__=Rb,i})();const RE=dp,Mb=class extends RE{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s,a){const l=this._declarationTContainer.tViews,c=Of(this._declarationLView,l,s,16,null,l.declTNode,null,null,null,null,a||null);c[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(c[19]=v.createEmbeddedView(l)),iu(l,c,s),new ip(c)}};function Rb(){return hp(Rn(),Ce())}function hp(i,s){return 4&i.type?new Mb(s,i,rp(i,s)):null}let Om=(()=>{class i{}return i.__NG_ELEMENT_ID__=Nb,i})();function Nb(){return w_(Rn(),Ce())}const NE=Om,OE=class extends NE{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return rp(this._hostTNode,this._hostLView)}get injector(){return new Ke(this._hostTNode,this._hostLView)}get parentInjector(){const s=Pr(this._hostTNode,this._hostLView);if(Ul(s)){const a=un(s,this._hostLView),l=Nn(s);return new Ke(a[1].data[l+8],a)}return new Ke(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=kE(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){let c,f;"number"==typeof l?c=l:null!=l&&(c=l.index,f=l.injector);const v=s.createEmbeddedView(a||{},f);return this.insert(v,c),v}createComponent(s,a,l,c,f){const v=s&&!function Rs(i){return"function"==typeof i}(s);let w;if(v)w=a;else{const k=a||{};w=k.index,l=k.injector,c=k.projectableNodes,f=k.environmentInjector||k.ngModuleRef}const I=v?s:new hh(Vt(s)),T=l||this.parentInjector;if(!f&&null==I.ngModule){const U=(v?T:this.parentInjector).get(Bs,null);U&&(f=U)}const M=I.create(T,c,void 0,f);return this.insert(M.hostView,w),M}insert(s,a){const l=s._lView,c=l[1];if(function Ml(i){return Rr(i[3])}(l)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const k=l[3],U=new OE(k,k[6],k[3]);U.detach(U.indexOf(s))}}const f=this._adjustIndex(a),v=this._lContainer;!function UI(i,s,a,l){const c=10+l,f=a.length;l>0&&(a[c-1][4]=s),l<f-10?(s[4]=a[c],ki(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const v=s[17];null!==v&&a!==v&&function BI(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(v,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=64}(c,l,v,f);const w=vy(f,v),I=l[11],T=kd(I,v[7]);return null!==T&&function LI(i,s,a,l,c,f){l[0]=c,l[6]=s,ff(i,l,a,1,c,f)}(c,v[6],I,l,T,w),s.attachToViewContainerRef(),ki(km(v),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=kE(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=my(this._lContainer,a);l&&(si(km(this._lContainer),a),df(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=my(this._lContainer,a);return l&&null!=si(km(this._lContainer),a)?new ip(l):null}_adjustIndex(s,a=0){return s??this.length+a}};function kE(i){return i[8]}function km(i){return i[8]||(i[8]=[])}function w_(i,s){let a;const l=s[i.index];if(Rr(l))a=l;else{let c;if(8&i.type)c=yn(l);else{const f=s[11];c=f.createComment("");const v=$r(i,s);Xa(f,kd(f,v),c,function nt(i,s){return Qt(i)?i.nextSibling(s):s.nextSibling}(f,v),!1)}s[i.index]=a=Q0(l,s,c,i),Ff(s,a)}return new OE(a,i,s)}class fp{constructor(s){this.queryList=s,this.matches=null}clone(){return new fp(this.queryList)}setDirty(){this.queryList.setDirty()}}class yh{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let f=0;f<l;f++){const v=a.getByIndex(f);c.push(this.queries[v.indexInDeclarationView].clone())}return new yh(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Fm(s,a).matches&&this.queries[a].setDirty()}}class LE{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Pm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(s,c);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new Pm(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class ha{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new ha(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const f=l[c];this.matchTNodeWithReadOption(s,a,Ob(a,f)),this.matchTNodeWithReadOption(s,a,jo(a,s,f,!1,!1))}else l===dp?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,jo(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Mm||c===Om||c===dp&&4&a.type)this.addMatch(a.index,-2);else{const f=jo(a,s,c,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Ob(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function kb(i,s,a,l){return-1===a?function zc(i,s){return 11&i.type?rp(i,s):4&i.type?hp(i,s):null}(s,i):-2===a?function Pb(i,s,a){return a===Mm?rp(s,i):a===dp?hp(s,i):a===Om?w_(s,i):void 0}(i,s,l):ri(i,i[1],a,s)}function VE(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const f=i.data,v=a.matches,w=[];for(let I=0;I<v.length;I+=2){const T=v[I];w.push(T<0?null:kb(s,f[T],v[I+1],a.metadata.read))}c.matches=w}return c.matches}function E_(i,s,a,l){const c=i.queries.getByIndex(a),f=c.matches;if(null!==f){const v=VE(i,s,c,a);for(let w=0;w<f.length;w+=2){const I=f[w];if(I>0)l.push(v[w/2]);else{const T=f[w+1],M=s[-I];for(let k=10;k<M.length;k++){const U=M[k];U[17]===U[3]&&E_(U[1],U,T,l)}if(null!==M[9]){const k=M[9];for(let U=0;U<k.length;U++){const J=k[U];E_(J[1],J,T,l)}}}}}return l}function UE(i){const s=Ce(),a=Nt(),l=Su();Fo(l+1);const c=Fm(a,l);if(i.dirty&&Cu(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const f=c.crossesNgTemplate?E_(a,s,l,[]):VE(a,s,c,l);i.reset(f,yr),i.notifyOnChanges()}return!0}return!1}function I_(i,s,a,l){const c=Nt();if(c.firstCreatePass){const f=Rn();(function $E(i,s,a){null===i.queries&&(i.queries=new Pm),i.queries.track(new ha(s,a))})(c,new LE(s,a,l),f.index),function vh(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function D_(i,s,a){const l=new __(4==(4&a));Zy(i,s,l,l.destroy),null===s[19]&&(s[19]=new yh),s[19].queries.push(new fp(l))}(c,Ce(),a)}function jE(){return function Fb(i,s){return i[19].queries[s].queryList}(Ce(),Su())}function Fm(i,s){return i.queries.getByIndex(s)}function Eh(i){const s=Vt(i)||xn(i)||nr(i);return null!==s&&s.standalone}function x_(...i){}const oC=new ln("Application Initializer");let M_=(()=>{class i{constructor(a){this.appInits=a,this.resolve=x_,this.reject=x_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(th(f))a.push(f);else if(wv(f)){const v=new Promise((w,I)=>{f.subscribe({complete:w,error:I})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(rt(oC,8))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const aC=new ln("AppId",{providedIn:"root",factory:function uC(){return`${zE()}${zE()}${zE()}`}});function zE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const lC=new ln("Platform Initializer"),pA=new ln("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),cC=new ln("appBootstrapListener");let gA=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const R_=new ln("LocaleId",{providedIn:"root",factory:()=>function Hn(i,s=ut.Default){return rt(i,s)}(R_,ut.Optional|ut.SkipSelf)||function mA(){return typeof $localize<"u"&&$localize.locale||oh}()}),Wn=new ln("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class yo{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let lu=(()=>{class i{compileModuleSync(a){return new f_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=tt(lr(a).declarations).reduce((v,w)=>{const I=Vt(w);return I&&v.push(new hh(I)),v},[]);return new yo(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const hC=(()=>Promise.resolve(0))();function N_(i){typeof Zone>"u"?hC.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ls{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new da(!1),this.onMicrotaskEmpty=new da(!1),this.onStable=new da(!1),this.onError=new da(!1),typeof Zone>"u")throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function WE(){let i=je.requestAnimationFrame,s=je.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function pC(i){const s=()=>{!function fC(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(je,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Vm(i),i.isCheckStableRunning=!0,Ot(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Vm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,f,v,w)=>{try{return O_(i),a.invokeTask(c,f,v,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Ai(i)}},onInvoke:(a,l,c,f,v,w,I)=>{try{return O_(i),a.invoke(c,f,v,w,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),Ai(i)}},onHasTask:(a,l,c,f)=>{a.hasTask(c,f),l===c&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Vm(i),Ot(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,c,f)=>(a.handleError(c,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ls.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ls.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const f=this._inner,v=f.scheduleEventTask("NgZoneEvent: "+c,s,mp,x_,x_);try{return f.runTask(v,a,l)}finally{f.cancelTask(v)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const mp={};function Ot(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Vm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function O_(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Ai(i){i._nesting--,Ot(i)}class gC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new da,this.onMicrotaskEmpty=new da,this.onStable=new da,this.onError=new da}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}const k_=new ln(""),qE=new ln("");let P_,ZE=(()=>{class i{constructor(a,l,c){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,P_||(function yp(i){P_=i}(c),c.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ls.assertNotInAngularZone(),N_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())N_(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(rt(ls),rt(Um),rt(qE))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})(),Um=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return P_?.findTestabilityInTree(this,a,l)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Gs=null;const Ih=new ln("AllowMultipleToken"),KE=new ln("PlatformOnDestroy");class YE{constructor(s,a){this.name=s,this.token=a}}function vp(i,s,a=[]){const l=`Platform: ${s}`,c=new ln(l);return(f=[])=>{let v=vo();if(!v||v.injector.get(Ih,!1)){const w=[...a,...f,{provide:c,useValue:!0}];i?i(w):function cs(i){if(Gs&&!Gs.get(Ih,!1))throw new Se(400,"");Gs=i;const s=i.get(cu);(function L_(i){const s=i.get(lC,null);s&&s.forEach(a=>a())})(i)}(function QE(i=[],s){return Gr.create({name:s,providers:[{provide:Ty,useValue:"platform"},{provide:KE,useValue:()=>Gs=null},...i]})}(w,l))}return function jm(i){const s=vo();if(!s)throw new Se(401,"");return s}()}}function vo(){return Gs?.get(cu)??null}let cu=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const c=function _p(i,s){let a;return a="noop"===i?new gC:("zone.js"===i?void 0:i)||new ls(s),a}(l?.ngZone,function li(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(l)),f=[{provide:ls,useValue:c}];return c.run(()=>{const v=Gr.create({providers:f,parent:this.injector,name:a.moduleType.name}),w=a.create(v),I=w.injector.get(Xu,null);if(!I)throw new Se(402,"");return c.runOutsideAngular(()=>{const T=c.onError.subscribe({next:M=>{I.handleError(M)}});w.onDestroy(()=>{bh(this._modules,w),T.unsubscribe()})}),function Hm(i,s,a){try{const l=a();return th(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(I,c,()=>{const T=w.injector.get(M_);return T.runInitializers(),T.donePromise.then(()=>(function ym(i){Ft(i,"Expected localeId to be defined"),"string"==typeof i&&($w=i.toLowerCase().replace(/_/g,"-"))}(w.injector.get(R_,oh)||oh),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,l=[]){const c=V_({},l);return function Bm(i,s,a){const l=new f_(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(a){const l=a.injector.get(Gm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Se(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Se(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._injector.get(KE,null)?.(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(rt(Gr))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function V_(i,s){return Array.isArray(s)?s.reduce(V_,i):{...i,...s}}let Gm=(()=>{class i{constructor(a,l,c,f){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),w=new O.y(I=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{ls.assertNotInAngularZone(),N_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{ls.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{T.unsubscribe(),M.unsubscribe()}});this.isStable=(0,ae.T)(v,w.pipe((0,te.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const c=a instanceof mE;if(!this._initStatus.done)throw!c&&Eh(a),new Se(405,false);let f;f=c?a:this._injector.get(dh).resolveComponentFactory(a),this.componentTypes.push(f.componentType);const v=function Dh(i){return i.isBoundToModule}(f)?void 0:this._injector.get(Bc),I=f.create(Gr.NULL,[],l||f.selector,v),T=I.location.nativeElement,M=I.injector.get(k_,null);return M?.registerApplication(T),I.onDestroy(()=>{this.detachView(I.hostView),bh(this.components,I),M?.unregisterApplication(T)}),this._loadComponent(I),I}tick(){if(this._runningTick)throw new Se(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;bh(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(cC,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>bh(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Se(406,false);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(rt(ls),rt(Gr),rt(Xu),rt(M_))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function bh(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let qr=!0,XE=!1;function U_(){return XE=!0,qr}function du(){if(XE)throw new Error("Cannot enable prod mode after platform setup.");qr=!1}let yC=(()=>{class i{}return i.__NG_ELEMENT_ID__=vC,i})();function vC(i){return function _C(i,s,a){if(ya(i)&&!a){const l=$t(i.index,s);return new ip(l,l)}return 47&i.type?new ip(s[16],s):null}(Rn(),Ce(),16==(16&i))}class G_{constructor(){}supports(s){return ou(s)}create(s){return new Zr(s)}}const bA=(i,s)=>s;class Zr{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||bA}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,f=null;for(;a||l;){const v=!l||a&&a.currentIndex<z_(l,c,f)?a:l,w=z_(v,c,f),I=v.currentIndex;if(v===l)c--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)c++;else{f||(f=[]);const T=w-c,M=I-c;if(T!=M){for(let U=0;U<T;U++){const J=U<f.length?f[U]:f[U]=0,Ie=J+U;M<=Ie&&Ie<T&&(f[U]=J+1)}f[v.previousIndex]=M-T}}w!==I&&s(v,w,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!ou(s))throw new Se(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,v,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)f=s[w],v=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,f,v,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,v,w),l=!0),a=a._next}else c=0,function Uf(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Dc()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{v=this._trackByFn(c,w),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,w,v,c)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,v,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,c)):s=this._addAfter(new _o(a,l),f,c),s}_verifyReinsertion(s,a,l,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new nI),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nI),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class _o{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class CC{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class nI{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new CC,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function z_(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class W_{constructor(){}supports(s){return s instanceof Map||Zg(s)}create(){return new TC}}class TC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Zg(s)))throw new Se(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const f=c._prev,v=c._next;return f&&(f._next=v),v&&(v._prev=f),c._next=null,c._prev=null,c}const l=new rI(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class rI{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function iI(){return new Zm([new G_])}let Zm=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||iI()),deps:[[i,new Lr,new cn]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Se(901,"")}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:iI}),i})();function Ep(){return new fu([new W_])}let fu=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Ep()),deps:[[i,new Lr,new cn]]}}find(a){const l=this.factories.find(f=>f.supports(a));if(l)return l;throw new Se(901,"")}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:Ep}),i})();const SC=vp(null,"core",[]);let sI=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(rt(Gm))},i.\u0275mod=mt({type:i}),i.\u0275inj=zt({}),i})();function oI(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(st,Te,P)=>{P.d(Te,{Z:()=>Se});var p=P(2090),X=P(4859),O=P(9681),ae=P(1877);class te{constructor(he,me){this._delegate=he,this.firebase=me,(0,O._addComponent)(he,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(he,me=O._DEFAULT_ENTRY_NAME){var ze;this._delegate.checkDestroyed();const Qe=this._delegate.container.getProvider(he);return!Qe.isInitialized()&&"EXPLICIT"===(null===(ze=Qe.getComponent())||void 0===ze?void 0:ze.instantiationMode)&&Qe.initialize(),Qe.getImmediate({identifier:me})}_removeServiceInstance(he,me=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(me)}_addComponent(he){(0,O._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,O._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function de(){const Le=function le(Le){const he={},me={__esModule:!0,initializeApp:function De(Ue,j={}){const ve=O.initializeApp(Ue,j);if((0,p.r3)(he,ve.name))return he[ve.name];const W=new Le(ve,me);return he[ve.name]=W,W},app:Qe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ee(Ue){const j=Ue.name,ve=j.replace("-compat","");if(O._registerComponent(Ue)&&"PUBLIC"===Ue.type){const W=(ne=Qe())=>{if("function"!=typeof ne[ve])throw ue.create("invalid-app-argument",{appName:j});return ne[ve]()};void 0!==Ue.serviceProps&&(0,p.ZB)(W,Ue.serviceProps),me[ve]=W,Le.prototype[ve]=function(...ne){return this._getService.bind(this,j).apply(this,Ue.multipleInstances?ne:[])}}return"PUBLIC"===Ue.type?me[ve]:null},removeApp:function ze(Ue){delete he[Ue]},useAsService:function Be(Ue,j){return"serverAuth"===j?null:j},modularAPIs:O}};function Qe(Ue){if(!(0,p.r3)(he,Ue=Ue||O._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Ue});return he[Ue]}return me.default=me,Object.defineProperty(me,"apps",{get:function we(){return Object.keys(he).map(Ue=>he[Ue])}}),Qe.App=Le,me}(te);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:de,extendNamespace:function he(me){(0,p.ZB)(Le,me)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Le}(),B=new ae.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Se=$;!function Ae(Le){(0,O.registerVersion)("@firebase/app-compat","0.1.28",Le)}()},9681:(st,Te,P)=>{P.r(Te),P.d(Te,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Si,_DEFAULT_ENTRY_NAME:()=>Ft,_addComponent:()=>an,_addOrOverwriteComponent:()=>Kt,_apps:()=>tn,_clearComponents:()=>Hi,_components:()=>Sn,_getProvider:()=>zt,_registerComponent:()=>Tr,_removeServiceInstance:()=>Rt,deleteApp:()=>ut,getApp:()=>Yr,getApps:()=>di,initializeApp:()=>gs,onLog:()=>En,registerVersion:()=>bn,setLogLevel:()=>Ws});var p=P(5861),X=P(4859),O=P(1877),ae=P(2090),te=P(8766);class ge{constructor(L){this.container=L}getPlatformInfoString(){return this.container.getProviders().map(_e=>{if(function ue(K){return"VERSION"===K.getComponent()?.type}(_e)){const Pe=_e.getImmediate();return`${Pe.library}/${Pe.version}`}return null}).filter(_e=>_e).join(" ")}}const le="@firebase/app",$=new O.Yd("@firebase/app"),Ft="[DEFAULT]",We={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,Sn=new Map;function an(K,L){try{K.container.addComponent(L)}catch(_e){$.debug(`Component ${L.name} failed to register with FirebaseApp ${K.name}`,_e)}}function Kt(K,L){K.container.addOrOverwriteComponent(L)}function Tr(K){const L=K.name;if(Sn.has(L))return $.debug(`There were multiple attempts to register component ${L}.`),!1;Sn.set(L,K);for(const _e of tn.values())an(_e,K);return!0}function zt(K,L){const _e=K.container.getProvider("heartbeat").getImmediate({optional:!0});return _e&&_e.triggerHeartbeat(),K.container.getProvider(L)}function Rt(K,L,_e=Ft){zt(K,L).clearInstance(_e)}function Hi(){Sn.clear()}const vr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ar{constructor(L,_e,Pe){this._isDeleted=!1,this._options=Object.assign({},L),this._config=Object.assign({},_e),this._name=_e.name,this._automaticDataCollectionEnabled=_e.automaticDataCollectionEnabled,this._container=Pe,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(L){this.checkDestroyed(),this._automaticDataCollectionEnabled=L}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(L){this._isDeleted=L}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}const Si="9.8.4";function gs(K,L={}){"object"!=typeof L&&(L={name:L});const _e=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},L),Pe=_e.name;if("string"!=typeof Pe||!Pe)throw vr.create("bad-app-name",{appName:String(Pe)});const et=tn.get(Pe);if(et){if((0,ae.vZ)(K,et.options)&&(0,ae.vZ)(_e,et.config))return et;throw vr.create("duplicate-app",{appName:Pe})}const mt=new X.H0(Pe);for(const rn of Sn.values())mt.addComponent(rn);const nn=new Ar(K,_e,mt);return tn.set(Pe,nn),nn}function Yr(K=Ft){const L=tn.get(K);if(!L)throw vr.create("no-app",{appName:K});return L}function di(){return Array.from(tn.values())}function ut(K){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,p.Z)(function*(K){const L=K.name;tn.has(L)&&(tn.delete(L),yield Promise.all(K.container.getProviders().map(_e=>_e.delete())),K.isDeleted=!0)})).apply(this,arguments)}function bn(K,L,_e){var Pe;let et=null!==(Pe=We[K])&&void 0!==Pe?Pe:K;_e&&(et+=`-${_e}`);const mt=et.match(/\s|\//),nn=L.match(/\s|\//);if(mt||nn){const rn=[`Unable to register library "${et}" with version "${L}":`];return mt&&rn.push(`library name "${et}" contains illegal characters (whitespace or "/")`),mt&&nn&&rn.push("and"),nn&&rn.push(`version name "${L}" contains illegal characters (whitespace or "/")`),void $.warn(rn.join(" "))}Tr(new X.wA(`${et}-version`,()=>({library:et,version:L}),"VERSION"))}function En(K,L){if(null!==K&&"function"!=typeof K)throw vr.create("invalid-log-argument");(0,O.Am)(K,L)}function Ws(K){(0,O.Ub)(K)}const Vn="firebase-heartbeat-store";let hi=null;function Eo(){return hi||(hi=(0,te.X3)("firebase-heartbeat-database",1,{upgrade:(K,L)=>{0===L&&K.createObjectStore(Vn)}}).catch(K=>{throw vr.create("storage-open",{originalErrorMessage:K.message})})),hi}function je(){return(je=(0,p.Z)(function*(K){var L;try{return(yield Eo()).transaction(Vn).objectStore(Vn).get(qn(K))}catch(_e){throw vr.create("storage-get",{originalErrorMessage:null===(L=_e)||void 0===L?void 0:L.message})}})).apply(this,arguments)}function gt(K,L){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,p.Z)(function*(K,L){var _e;try{const et=(yield Eo()).transaction(Vn,"readwrite");return yield et.objectStore(Vn).put(L,qn(K)),et.done}catch(Pe){throw vr.create("storage-set",{originalErrorMessage:null===(_e=Pe)||void 0===_e?void 0:_e.message})}})).apply(this,arguments)}function qn(K){return`${K.name}!${K.options.appId}`}class tr{constructor(L){this.container=L,this._heartbeatsCache=null;const _e=this.container.getProvider("app").getImmediate();this._storage=new z(_e),this._heartbeatsCachePromise=this._storage.read().then(Pe=>(this._heartbeatsCache=Pe,Pe))}triggerHeartbeat(){var L=this;return(0,p.Z)(function*(){const Pe=L.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),et=ei();if(null===L._heartbeatsCache&&(L._heartbeatsCache=yield L._heartbeatsCachePromise),L._heartbeatsCache.lastSentHeartbeatDate!==et&&!L._heartbeatsCache.heartbeats.some(mt=>mt.date===et))return L._heartbeatsCache.heartbeats.push({date:et,agent:Pe}),L._heartbeatsCache.heartbeats=L._heartbeatsCache.heartbeats.filter(mt=>{const nn=new Date(mt.date).valueOf();return Date.now()-nn<=2592e6}),L._storage.overwrite(L._heartbeatsCache)})()}getHeartbeatsHeader(){var L=this;return(0,p.Z)(function*(){if(null===L._heartbeatsCache&&(yield L._heartbeatsCachePromise),null===L._heartbeatsCache||0===L._heartbeatsCache.heartbeats.length)return"";const _e=ei(),{heartbeatsToSend:Pe,unsentEntries:et}=function en(K,L=1024){const _e=[];let Pe=K.slice();for(const et of K){const mt=_e.find(nn=>nn.agent===et.agent);if(mt){if(mt.dates.push(et.date),V(_e)>L){mt.dates.pop();break}}else if(_e.push({agent:et.agent,dates:[et.date]}),V(_e)>L){_e.pop();break}Pe=Pe.slice(1)}return{heartbeatsToSend:_e,unsentEntries:Pe}}(L._heartbeatsCache.heartbeats),mt=(0,ae.L)(JSON.stringify({version:2,heartbeats:Pe}));return L._heartbeatsCache.lastSentHeartbeatDate=_e,et.length>0?(L._heartbeatsCache.heartbeats=et,yield L._storage.overwrite(L._heartbeatsCache)):(L._heartbeatsCache.heartbeats=[],L._storage.overwrite(L._heartbeatsCache)),mt})()}}function ei(){return(new Date).toISOString().substring(0,10)}class z{constructor(L){this.app=L,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var L=this;return(0,p.Z)(function*(){return(yield L._canUseIndexedDBPromise)&&(yield function jt(K){return je.apply(this,arguments)}(L.app))||{heartbeats:[]}})()}overwrite(L){var _e=this;return(0,p.Z)(function*(){var Pe;if(yield _e._canUseIndexedDBPromise){const mt=yield _e.read();return gt(_e.app,{lastSentHeartbeatDate:null!==(Pe=L.lastSentHeartbeatDate)&&void 0!==Pe?Pe:mt.lastSentHeartbeatDate,heartbeats:L.heartbeats})}})()}add(L){var _e=this;return(0,p.Z)(function*(){var Pe;if(yield _e._canUseIndexedDBPromise){const mt=yield _e.read();return gt(_e.app,{lastSentHeartbeatDate:null!==(Pe=L.lastSentHeartbeatDate)&&void 0!==Pe?Pe:mt.lastSentHeartbeatDate,heartbeats:[...mt.heartbeats,...L.heartbeats]})}})()}}function V(K){return(0,ae.L)(JSON.stringify({version:2,heartbeats:K})).length}!function Y(K){Tr(new X.wA("platform-logger",L=>new ge(L),"PRIVATE")),Tr(new X.wA("heartbeat",L=>new tr(L),"PRIVATE")),bn(le,"0.7.27",K),bn(le,"0.7.27","esm2017"),bn("fire-js","")}("")},4859:(st,Te,P)=>{P.d(Te,{H0:()=>le,wA:()=>O});var p=P(5861),X=P(2090);class O{constructor($,B,Q){this.name=$,this.instanceFactory=B,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ae="[DEFAULT]";class te{constructor($,B){this.name=$,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const B=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(B)){const Q=new X.BH;if(this.instancesDeferred.set(B,Q),this.isInitialized(B)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:B});He&&Q.resolve(He)}catch{}}return this.instancesDeferred.get(B).promise}getImmediate($){var B;const Q=this.normalizeInstanceIdentifier($?.identifier),He=null!==(B=$?.optional)&&void 0!==B&&B;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Ae){if(He)return null;throw Ae}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ue(de){return"EAGER"===de.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[B,Q]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(B);try{const Ae=this.getOrInitializeService({instanceIdentifier:He});Q.resolve(Ae)}catch{}}}}clearInstance($=ae){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,p.Z)(function*(){const B=Array.from($.instances.values());yield Promise.all([...B.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...B.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ae){return this.instances.has($)}getOptions($=ae){return this.instancesOptions.get($)||{}}initialize($={}){const{options:B={}}=$,Q=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:Q,options:B});for(const[Ae,Se]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Ae)&&Se.resolve(He);return He}onInit($,B){var Q;const He=this.normalizeInstanceIdentifier(B),Ae=null!==(Q=this.onInitCallbacks.get(He))&&void 0!==Q?Q:new Set;Ae.add($),this.onInitCallbacks.set(He,Ae);const Se=this.instances.get(He);return Se&&$(Se,He),()=>{Ae.delete($)}}invokeOnInitCallbacks($,B){const Q=this.onInitCallbacks.get(B);if(Q)for(const He of Q)try{He($,B)}catch{}}getOrInitializeService({instanceIdentifier:$,options:B={}}){let Q=this.instances.get($);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(de=$,de===ae?void 0:de),options:B}),this.instances.set($,Q),this.instancesOptions.set($,B),this.invokeOnInitCallbacks(Q,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,Q)}catch{}var de;return Q||null}normalizeInstanceIdentifier($=ae){return this.component?this.component.multipleInstances?$:ae:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor($){this.name=$,this.providers=new Map}addComponent($){const B=this.getProvider($.name);if(B.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);B.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const B=new te($,this);return this.providers.set($,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(st,Te,P)=>{P.d(Te,{Am:()=>de,Ub:()=>le,Yd:()=>ue,in:()=>X});const p=[];var X=(()=>{return($=X||(X={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",X;var $})();const O={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ae=X.INFO,te={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},ge=($,B,...Q)=>{if(B<$.logLevel)return;const He=(new Date).toISOString(),Ae=te[B];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Ae](`[${He}]  ${$.name}:`,...Q)};class ue{constructor(B){this.name=B,this._logLevel=ae,this._logHandler=ge,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in X))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...B),this._logHandler(this,X.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...B),this._logHandler(this,X.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,X.INFO,...B),this._logHandler(this,X.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,X.WARN,...B),this._logHandler(this,X.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...B),this._logHandler(this,X.ERROR,...B)}}function le($){p.forEach(B=>{B.setLogLevel($)})}function de($,B){for(const Q of p){let He=null;B&&B.level&&(He=O[B.level]),Q.userLogHandler=null===$?null:(Ae,Se,...Le)=>{const he=Le.map(me=>{if(null==me)return null;if("string"==typeof me)return me;if("number"==typeof me||"boolean"==typeof me)return me.toString();if(me instanceof Error)return me.message;try{return JSON.stringify(me)}catch{return null}}).filter(me=>me).join(" ");Se>=(He??Ae.logLevel)&&$({level:X[Se].toLowerCase(),message:he,args:Le,type:Ae.name})}}}},8766:(st,Te,P)=>{P.d(Te,{Lj:()=>De,X3:()=>Qe});var p=P(5861);let O,ae;const ue=new WeakMap,le=new WeakMap,de=new WeakMap,$=new WeakMap,B=new WeakMap;let Ae={get(j,ve,W){if(j instanceof IDBTransaction){if("done"===ve)return le.get(j);if("objectStoreNames"===ve)return j.objectStoreNames||de.get(j);if("store"===ve)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return me(j[ve])},set:(j,ve,W)=>(j[ve]=W,!0),has:(j,ve)=>j instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in j};function he(j){return"function"==typeof j?function Le(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...ve){return j.apply(ze(this),ve),me(ue.get(this))}:function(...ve){return me(j.apply(ze(this),ve))}:function(ve,...W){const ne=j.call(ze(this),ve,...W);return de.set(ne,ve.sort?ve.sort():[ve]),me(ne)}}(j):(j instanceof IDBTransaction&&function He(j){if(le.has(j))return;const ve=new Promise((W,ne)=>{const ee=()=>{j.removeEventListener("complete",ye),j.removeEventListener("error",oe),j.removeEventListener("abort",oe)},ye=()=>{W(),ee()},oe=()=>{ne(j.error||new DOMException("AbortError","AbortError")),ee()};j.addEventListener("complete",ye),j.addEventListener("error",oe),j.addEventListener("abort",oe)});le.set(j,ve)}(j),((j,ve)=>ve.some(W=>j instanceof W))(j,function te(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Ae):j)}function me(j){if(j instanceof IDBRequest)return function Q(j){const ve=new Promise((W,ne)=>{const ee=()=>{j.removeEventListener("success",ye),j.removeEventListener("error",oe)},ye=()=>{W(me(j.result)),ee()},oe=()=>{ne(j.error),ee()};j.addEventListener("success",ye),j.addEventListener("error",oe)});return ve.then(W=>{W instanceof IDBCursor&&ue.set(W,j)}).catch(()=>{}),B.set(ve,j),ve}(j);if($.has(j))return $.get(j);const ve=he(j);return ve!==j&&($.set(j,ve),B.set(ve,j)),ve}const ze=j=>B.get(j);function Qe(j,ve,{blocked:W,upgrade:ne,blocking:ee,terminated:ye}={}){const oe=indexedDB.open(j,ve),Oe=me(oe);return ne&&oe.addEventListener("upgradeneeded",at=>{ne(me(oe.result),at.oldVersion,at.newVersion,me(oe.transaction))}),W&&oe.addEventListener("blocked",()=>W()),Oe.then(at=>{ye&&at.addEventListener("close",()=>ye()),ee&&at.addEventListener("versionchange",()=>ee())}).catch(()=>{}),Oe}function De(j,{blocked:ve}={}){const W=indexedDB.deleteDatabase(j);return ve&&W.addEventListener("blocked",()=>ve()),me(W).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],Be=new Map;function Ue(j,ve){if(!(j instanceof IDBDatabase)||ve in j||"string"!=typeof ve)return;if(Be.get(ve))return Be.get(ve);const W=ve.replace(/FromIndex$/,""),ne=ve!==W,ee=Ee.includes(W);if(!(W in(ne?IDBIndex:IDBObjectStore).prototype)||!ee&&!we.includes(W))return;const ye=function(){var oe=(0,p.Z)(function*(Oe,...at){const Bt=this.transaction(Oe,ee?"readwrite":"readonly");let Ft=Bt.store;return ne&&(Ft=Ft.index(at.shift())),(yield Promise.all([Ft[W](...at),ee&&Bt.done]))[0]});return function(at){return oe.apply(this,arguments)}}();return Be.set(ve,ye),ye}!function Se(j){Ae=j(Ae)}(j=>({...j,get:(ve,W,ne)=>Ue(ve,W)||j.get(ve,W,ne),has:(ve,W)=>!!Ue(ve,W)||j.has(ve,W)}))},5861:(st,Te,P)=>{function p(O,ae,te,ge,ue,le,de){try{var $=O[le](de),B=$.value}catch(Q){return void te(Q)}$.done?ae(B):Promise.resolve(B).then(ge,ue)}function X(O){return function(){var ae=this,te=arguments;return new Promise(function(ge,ue){var le=O.apply(ae,te);function de(B){p(le,ge,ue,de,$,"next",B)}function $(B){p(le,ge,ue,de,$,"throw",B)}de(void 0)})}}P.d(Te,{Z:()=>X})}},st=>{st(st.s=5789)}]);